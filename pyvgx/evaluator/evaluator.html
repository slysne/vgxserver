<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>VGX Expression Language</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./rouge-github.css">
</head>
<body id="evaluator" class="article toc2 toc-left">
<div id="header">
<h1>VGX Expression Language <a href="../reference.html"><span class="icon"><i class="fa fa-arrow-circle-up" title="pyvgx Reference"></i></span></a> <a href="selectEvaluator.html"><span class="icon"><i class="fa fa-arrow-circle-right" title="Select Evaluator"></i></span></a> <a href="#theend"><span class="icon"><i class="fa fa-chevron-circle-down" title="Bottom of page"></i></span></a></h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#evaluatorquickstart">1. Quick Start</a>
<ul class="sectlevel2">
<li><a href="#quickfilter">1.1. filter</a></li>
<li><a href="#quickrank">1.2. rank</a></li>
<li><a href="#quickselect">1.3. select</a></li>
<li><a href="#operationreference">1.4. Quick Reference</a></li>
</ul>
</li>
<li><a href="#evaluatoroverview">2. Overview</a>
<ul class="sectlevel2">
<li><a href="#_safe_evaluation">2.1. Safe Evaluation</a>
<ul class="sectlevel3">
<li><a href="#_incompatible_objects">2.1.1. Incompatible Objects</a></li>
<li><a href="#_divide_by_zero">2.1.2. Divide by Zero</a></li>
<li><a href="#_domain_errors">2.1.3. Domain Errors</a></li>
<li><a href="#_non_existent_vertex_properties">2.1.4. Non-existent Vertex Properties</a></li>
<li><a href="#_out_of_range_subscripts">2.1.5. Out of Range Subscripts</a></li>
</ul>
</li>
<li><a href="#evaluatordatatypes">2.2. Data Types</a>
<ul class="sectlevel3">
<li><a href="#datatype_integer">2.2.1. Type <em>integer</em></a></li>
<li><a href="#datatype_real">2.2.2. Type <em>real</em></a></li>
<li><a href="#datatype_string">2.2.3. Type <em>string</em></a></li>
<li><a href="#datatype_group">2.2.4. Type <em>group</em></a></li>
<li><a href="#datatype_range">2.2.5. Type <em>range</em></a></li>
<li><a href="#datatype_set">2.2.6. Type <em>set</em></a></li>
<li><a href="#datatype_vector">2.2.7. Type <em>vector</em></a></li>
<li><a href="#datatype_bitvector">2.2.8. Type <em>bitvector</em></a></li>
<li><a href="#datatype_keyval">2.2.9. Type <em>keyval</em></a></li>
<li><a href="#datatype_vertex">2.2.10. Type <em>vertex</em></a></li>
<li><a href="#datatype_vertexid">2.2.11. Type <em>vertexid</em></a></li>
<li><a href="#datatype_nan">2.2.12. Type <em>nan</em></a></li>
<li><a href="#datatype_null">2.2.13. Type <em>null</em></a></li>
<li><a href="#datatype_inf">2.2.14. Type <em>inf</em></a></li>
</ul>
</li>
<li><a href="#noshortcircuiting">2.3. No Short Circuiting</a></li>
<li><a href="#_expression_examples">2.4. Expression Examples</a>
<ul class="sectlevel3">
<li><a href="#_filter_example">2.4.1. Filter Example</a></li>
<li><a href="#_dynamic_ranking_example">2.4.2. Dynamic Ranking Example</a></li>
<li><a href="#_select_result_fields_example">2.4.3. Select Result Fields Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#evaluatorreference">3. Expression Language Reference</a>
<ul class="sectlevel2">
<li><a href="#evaluatordefine">3.1. Define Functions with <code>Define()</code></a>
<ul class="sectlevel3">
<li><a href="#_syntax">3.1.1. Syntax</a></li>
<li><a href="#_parameters">3.1.2. Parameters</a></li>
<li><a href="#_return_value">3.1.3. Return Value</a></li>
<li><a href="#_remarks">3.1.4. Remarks</a></li>
</ul>
</li>
<li><a href="#evaluate">3.2. Evaluate Expressions with <code>Evaluate()</code></a>
<ul class="sectlevel3">
<li><a href="#_syntax_2">3.2.1. Syntax</a></li>
<li><a href="#_parameters_2">3.2.2. Parameters</a></li>
<li><a href="#_return_value_2">3.2.3. Return Value</a></li>
<li><a href="#_remarks_2">3.2.4. Remarks</a></li>
</ul>
</li>
<li><a href="#evaluatorsyntax">3.3. Basic Expression Syntax</a>
<ul class="sectlevel3">
<li><a href="#syn_group">3.3.1. Group</a></li>
<li><a href="#syn_set">3.3.2. Set</a></li>
<li><a href="#syn_functioncall">3.3.3. Function Call</a></li>
<li><a href="#syn_subscript">3.3.4. Subscript</a></li>
<li><a href="#syn_attribute">3.3.5. Attribute</a></li>
<li><a href="#syn_unaryplusminus">3.3.6. Unary Plus/Minus</a></li>
<li><a href="#syn_logicalnot">3.3.7. Logical NOT</a></li>
<li><a href="#syn_bitwisenot">3.3.8. Bitwise NOT</a></li>
<li><a href="#syn_exponentiation">3.3.9. Exponentiation</a></li>
<li><a href="#syn_innumericrange">3.3.10. In Numeric Range</a></li>
<li><a href="#syn_memberofset">3.3.11. Member of Set</a></li>
<li><a href="#syn_multiplication">3.3.12. Multiplication</a></li>
<li><a href="#syn_division">3.3.13. Division</a></li>
<li><a href="#syn_modulo">3.3.14. Modulo</a></li>
<li><a href="#syn_addition">3.3.15. Addition</a></li>
<li><a href="#syn_subtraction">3.3.16. Subtraction</a></li>
<li><a href="#syn_bitwiseshift">3.3.17. Bitwise Shift</a></li>
<li><a href="#syn_comparison">3.3.18. Comparison</a></li>
<li><a href="#syn_bitwiselogic">3.3.19. Bitwise Logic</a></li>
<li><a href="#syn_logicalcondition">3.3.20. Logical Condition</a></li>
<li><a href="#syn_ternaryconditional">3.3.21. Ternary Conditional</a></li>
<li><a href="#syn_define">3.3.22. Expression definition</a></li>
<li><a href="#syn_subexpr">3.3.23. Sub-expressions and Local Variables</a></li>
<li><a href="#syn_label">3.3.24. Label</a></li>
<li><a href="#syn_comma">3.3.25. Comma</a></li>
<li><a href="#syn_semicolon">3.3.26. Semicolon</a></li>
</ul>
</li>
<li><a href="#evaluatorattrprop">3.4. Attributes and Properties</a>
<ul class="sectlevel3">
<li><a href="#evaluatorneighborhoodnext">3.4.1. Neighborhood: <code>next*</code></a></li>
<li><a href="#evaluatorneighborhoodprev">3.4.2. Previous neighborhood: <code>prev*</code></a></li>
<li><a href="#evaluatorcurrentvertex">3.4.3. Current anchor: <code>vertex*</code></a></li>
<li><a href="#_example">3.4.4. Example</a></li>
<li><a href="#arcattributes">3.4.5. Arc Attributes</a></li>
<li><a href="#vertexattributes">3.4.6. Vertex Attributes</a></li>
<li><a href="#vertexproperties">3.4.7. Vertex Properties</a></li>
</ul>
</li>
<li><a href="#evaluator_synthetic_arcs">3.5. Synthetic Arcs</a>
<ul class="sectlevel3">
<li><a href="#synthetic_arcs__background">3.5.1. Background and Default Behavior</a></li>
<li><a href="#synthetic_arcs__arc_collapsing">3.5.2. Arc Collapsing with Synthetic Arc Operators</a>
<ul class="sectlevel4">
<li><a href="#synthetic_arcs__value_capture">3.5.2.1. Value Capture and Synthetic Arc Evaluation</a></li>
<li><a href="#synthetic_arcs__arc_attributes">3.5.2.2. Synthetic Arc Attributes</a></li>
<li><a href="#synthetic_arcs__operators">3.5.2.3. Synthetic Arc Operators</a></li>
</ul>
</li>
<li><a href="#_synthetic_arcs_examples">3.5.3. Synthetic Arcs Examples</a>
<ul class="sectlevel4">
<li><a href="#synthetic_arcs__example_1">3.5.3.1. Example 1: Conditional Collection of Composite Value</a></li>
<li><a href="#synthetic_arcs__example_2">3.5.3.2. Example 2: Avoiding Exhaustive Path Traversal using Arc Collapsing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#evaluatorconstants">3.6. Constants</a>
<ul class="sectlevel3">
<li><a href="#_null">3.6.1. Null</a></li>
<li><a href="#_boolean">3.6.2. Boolean</a></li>
<li><a href="#_timestamp_limits">3.6.3. Timestamp Limits</a></li>
<li><a href="#_arc_direction">3.6.4. Arc Direction</a></li>
<li><a href="#_arc_modifiers">3.6.5. Arc Modifiers</a></li>
<li><a href="#_memory_registers">3.6.6. Memory Registers</a></li>
<li><a href="#_collector_staging_slots">3.6.7. Collector Staging Slots</a></li>
<li><a href="#_mathematical_constants">3.6.8. Mathematical Constants</a></li>
</ul>
</li>
<li><a href="#evaluatorenvironment">3.7. Current Environment</a>
<ul class="sectlevel3">
<li><a href="#_current_graph_state">3.7.1. Current Graph State</a></li>
<li><a href="#_system_attributes">3.7.2. System Attributes</a></li>
<li><a href="#_current_evaluator_context">3.7.3. Current Evaluator Context</a></li>
</ul>
</li>
<li><a href="#evaluatorfunctions">3.8. Functions</a>
<ul class="sectlevel3">
<li><a href="#mathfunctions">3.8.1. Mathematical Functions</a></li>
<li><a href="#castandcheckfunctions">3.8.2. Type Cast and Checks</a></li>
<li><a href="#stringfunctions">3.8.3. String Functions</a></li>
<li><a href="#proplookupfunctions">3.8.4. Property Lookup</a></li>
<li><a href="#enumfunctions">3.8.5. Enumeration</a></li>
<li><a href="#similarityfunctions_feature">3.8.6. Similarity (Feature Vectors)</a></li>
<li><a href="#similarityfunctions_array">3.8.7. Similarity (Euclidean Vectors)</a></li>
<li><a href="#controlfunctions">3.8.8. Control Functions</a></li>
<li><a href="#variadicaggregatorfunctions">3.8.9. Variadic Aggregator Functions</a></li>
<li><a href="#simplerankingfunctions">3.8.10. Simple Ranking Functions</a></li>
<li><a href="#collectorstagingfunctions">3.8.11. Collector Staging Functions</a></li>
<li><a href="#bfssupport">3.8.12. Breadth-First Search Support</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#evaluatormemory">4. Evaluator Memory</a>
<ul class="sectlevel2">
<li><a href="#evaluatormemoryregisters">4.1. Memory Registers</a></li>
<li><a href="#evaluatormemorystack">4.2. Memory Stack</a></li>
<li><a href="#evaluatormemoryindexing">4.3. Memory Indexing</a></li>
<li><a href="#evaluatormemorypython">4.4. Memory Python Interface for Assignment and Lookup</a>
<ul class="sectlevel3">
<li><a href="#evaluatormemorysubscript">4.4.1. Memory Subscript</a></li>
<li><a href="#evaluatormemoryslice">4.4.2. Memory Slice</a></li>
<li><a href="#evaluatormemoryinit">4.4.3. Memory Initialization</a></li>
<li><a href="#evaluatormemorysort">4.4.4. Memory Sort</a></li>
<li><a href="#evaluatormemoryvaluetypes">4.4.5. A Note on Memory Value Types</a></li>
<li><a href="#evaluatormemory_note_on_strings">4.4.6. A note about strings and vectors in evaluator expressions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#evaluatormemoryreference">5. Memory Operation Reference</a>
<ul class="sectlevel2">
<li><a href="#_notation_conventions">5.1. Notation Conventions</a></li>
<li><a href="#evaluatormemorysingle">5.2. Operations on Single Memory Locations</a>
<ul class="sectlevel3">
<li><a href="#evaluatormemorystoreload">5.2.1. Storing and Loading</a></li>
<li><a href="#evaluatormemorystackops">5.2.2. Stack</a></li>
<li><a href="#evaluatormemorymovingdata">5.2.3. Moving Data</a></li>
<li><a href="#evaluatormemoryincdec">5.2.4. Increment and Decrement</a></li>
<li><a href="#evaluatormemorycomparator">5.2.5. Comparator</a></li>
<li><a href="#evaluatormemoryarithmetic">5.2.6. Arithmetic</a></li>
<li><a href="#evaluatormemorybitwise">5.2.7. Bitwise</a></li>
<li><a href="#evaluatormemoryvector">5.2.8. Vector Arithmetic</a></li>
<li><a href="#evaluatormemoryvarious">5.2.9. Various Functions</a></li>
<li><a href="#evaluatormemoryindexingop">5.2.10. Indexing</a></li>
</ul>
</li>
<li><a href="#evaluatormemory_multiple">5.3. Operations on Multiple Memory Locations</a>
<ul class="sectlevel3">
<li><a href="#_function_naming_conventions">5.3.1. Function Naming Conventions</a></li>
<li><a href="#_array_indexing_and_range_specification">5.3.2. Array Indexing and Range Specification</a></li>
<li><a href="#_applying_operations_to_memory_range">5.3.3. Applying Operations to Memory Range</a></li>
<li><a href="#_section_links">5.3.4. Section Links</a></li>
<li><a href="#evaluatormemory_arraysetcopy">5.3.5. Set and Copy</a></li>
<li><a href="#evaluatormemory_arrayheap">5.3.6. Heap Operations</a></li>
<li><a href="#evaluatormemory_arraysort">5.3.7. Sorting</a></li>
<li><a href="#evaluatormemory_arraycast">5.3.8. Type Cast</a></li>
<li><a href="#evaluatormemory_arrayincdec">5.3.9. Increment and Decrement</a></li>
<li><a href="#evaluatormemory_scalararrayarithmetic">5.3.10. Arithmetic</a></li>
<li><a href="#evaluatormemory_arraynumeric">5.3.11. Numeric</a></li>
<li><a href="#evaluatormemory_arraylogexp">5.3.12. Logarithms and Exponential Functions</a></li>
<li><a href="#evaluatormemory_arraytrighyp">5.3.13. Trigonometric and Hyperbolic</a></li>
<li><a href="#evaluatormemory_arraybitwise">5.3.14. Bitwise Operations</a></li>
<li><a href="#evaluatormemory_arrayhash">5.3.15. Hashing</a></li>
<li><a href="#evaluatormemory_arrayaggregate">5.3.16. Aggregation</a></li>
<li><a href="#evaluatormemory_arrayprobe">5.3.17. Array Probing</a></li>
</ul>
</li>
<li><a href="#evaluator_mappingsets">5.4. Mappings and Sets</a>
<ul class="sectlevel3">
<li><a href="#evaluator_integerset">5.4.1. Integer Set</a></li>
<li><a href="#evaluator_vertexset">5.4.2. Vertex Set</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#evaluator_specialpurpose">6. Special Purpose Operations</a>
<ul class="sectlevel2">
<li><a href="#evaluator_sumprodobj">6.1. <em>sumprodobj</em>()</a>
<ul class="sectlevel3">
<li><a href="#_syntax_3">6.1.1. Syntax</a></li>
<li><a href="#_parameters_3">6.1.2. Parameters</a></li>
<li><a href="#_return_value_3">6.1.3. Return Value</a></li>
<li><a href="#_remarks_3">6.1.4. Remarks</a></li>
<li><a href="#_formula">6.1.5. Formula</a></li>
<li><a href="#_example_2">6.1.6. Example</a></li>
</ul>
</li>
<li><a href="#evaluator_probealtarray">6.2. <em>probealtarray</em>()</a>
<ul class="sectlevel3">
<li><a href="#_syntax_4">6.2.1. Syntax</a></li>
<li><a href="#_parameters_4">6.2.2. Parameters</a></li>
<li><a href="#_return_value_4">6.2.3. Return Value</a></li>
<li><a href="#_remarks_4">6.2.4. Remarks</a></li>
<li><a href="#_example_3">6.2.5. Example</a></li>
</ul>
</li>
<li><a href="#evaluator_synarc_decay">6.3. <em>synarc.decay</em>() and <em>synarc.xdecay</em>()</a>
<ul class="sectlevel3">
<li><a href="#synarc_decay_syntax">6.3.1. Syntax</a></li>
<li><a href="#synarc_decay_parameters">6.3.2. Parameters</a></li>
<li><a href="#synarc_decay_return_value">6.3.3. Return Value</a></li>
<li><a href="#synarc_decay_remarks">6.3.4. Remarks</a>
<ul class="sectlevel4">
<li><a href="#synarc_decay_arc_components">6.3.4.1. Capture arc components</a></li>
<li><a href="#synarc_decay_post_traversal">6.3.4.2. Post-traversal evaluation</a></li>
<li><a href="#synarc_decay_synthetic_arc">6.3.4.3. Synthetic arc and return value</a></li>
<li><a href="#synarc_decay_formulas">6.3.4.4. Decay Formula Summary</a></li>
</ul>
</li>
<li><a href="#synarc_decay_collect">6.3.5. Returning decayed arc value in search result</a>
<ul class="sectlevel4">
<li><a href="#synarc_decay_collect_example">6.3.5.1. Example: Collect decayed arc value</a></li>
</ul>
</li>
<li><a href="#synarc_decay_example">6.3.6. Complete example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.copy-button {
    position: absolute;
    right: 5px;
    top: 5px;
    cursor: pointer;
    background-color: #e8e8e8;
    color: #888;
    border: 1px solid #ddd;
    padding: 2px 12px;
    width: 80px;
    border-radius: 3px;
    font-family: monospace;
    font-weight: bold;
    font-size: 13px;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll('div.copyable pre').forEach(function(codeBlock) {
        var button = document.createElement('button');
        button.className = 'copy-button';
        button.textContent = 'Copy';
        codeBlock.parentNode.style.position = 'relative';
        codeBlock.parentNode.appendChild(button);

        button.addEventListener('click', function() {
            var code = codeBlock.innerText || codeBlock.textContent;
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(code).then(function() {
                    button.textContent = 'Copied!';
                    setTimeout(function() {
                        button.textContent = 'Copy';
                    }, 2000);
                }, function() {
                    button.textContent = 'Failed';
                });
            } else {
                // Fallback method for older browsers
                var textArea = document.createElement('textarea');
                textArea.value = code;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    button.textContent = 'Copied!';
                    setTimeout(function() {
                        button.textContent = 'Copy';
                    }, 2000);
                } catch (err) {
                    button.textContent = 'Failed';
                }
                document.body.removeChild(textArea);
            }
        });
    });
});
</script>
<div class="stemblock">
<div class="content">
\[\DeclareMathOperator\arcsinh{arcsinh}
\DeclareMathOperator\arccosh{arcsinh}
\DeclareMathOperator\arctanh{arcsinh}
\DeclareMathOperator\sgn{sgn}\]
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="evaluatorquickstart">1. Quick Start</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Expressions can be used in query filters, for result sorting, and to select result fields. Below are three examples showing each case.</p>
</div>
<div class="sect2">
<h3 id="quickfilter">1.1. filter</h3>
<div class="paragraph">
<p>This filter requires the value of the arc from "A" to its neighbor to be greater than 10 and the neighbor id must equal "B" or start with "C" or end with "d".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
    <span class="nb">filter</span><span class="o">=</span><span class="sh">"</span><span class="s">.arc.value &gt; 10 &amp;&amp; next.id in {</span><span class="sh">'</span><span class="s">B</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">C*</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">*d</span><span class="sh">'</span><span class="s">}</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="quickrank">1.2. rank</h3>
<div class="paragraph">
<p>This custom ranking function will divide the neighbor&#8217;s "score" property by the arc value and multiply the result by the anchor&#8217;s "boost" property. The function&#8217;s output value is used for sorting the query results.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">rank</span><span class="o">=</span><span class="sh">"</span><span class="s">vertex[</span><span class="sh">'</span><span class="s">boost</span><span class="sh">'</span><span class="s">] * (next[</span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="s">] / .arc.value)</span><span class="sh">"</span>
    <span class="n">sortby</span><span class="o">=</span><span class="n">S_RANK</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="quickselect">1.3. select</h3>
<div class="paragraph">
<p>This select statement formats the query result to include the neighbor&#8217;s "score" property, the value of the arc from "A" to its neighbor, and a computed value with custom name "RATIO".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span> <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">select</span><span class="o">=</span><span class="sh">"</span><span class="s">score; .arc.value; RATIO: next[</span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="s">] / .arc.value</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="selectEvaluator.html#selectlabel">Select Evaluator</a> for details.</p>
</div>
</div>
<div class="sect2">
<h3 id="operationreference">1.4. Quick Reference</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 3.5714%;">
<col style="width: 3.5714%;">
<col style="width: 35.7142%;">
<col style="width: 57.143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="3">Section</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong><a href="#evaluatordefine">Define Functions with <code>Define()</code></a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define an expression and assign it to a name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong><a href="#evaluate">Evaluate Expressions with <code>Evaluate()</code></a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluate an expression</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong><a href="#evaluatorsyntax">Basic Expression Syntax</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expression syntax and operators</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong><a href="#evaluatorattrprop">Attributes and Properties</a></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#arcattributes">Arc Attributes</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arc attributes (relationship type, value, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#vertexattributes">Vertex Attributes</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex attributes (id, degree, timestamps, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#vertexproperties">Vertex Properties</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User defined vertex properties (key/value pairs)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong><a href="#evaluatorconstants">Constants</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-defined numeric constants for use in expressions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><strong><a href="#evaluatorenvironment">Current Environment</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variables derived from current execution environment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong><a href="#evaluatorfunctions">Functions</a></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#mathfunctions">Mathematical Functions</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basic math functions (<code>log</code>, <code>sqrt</code>, <code>sin</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#castandcheckfunctions">Type Cast and Checks</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check and convert data types (<code>int</code>, <code>isstr</code>, <code>len</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#stringfunctions">String Functions</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basic string operations (<code>join</code>, <code>replace</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#proplookupfunctions">Property Lookup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve vertex property by key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#enumfunctions">Enumeration</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encode or decode enumerations (<code>relenc</code>, <code>typedec</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#similarityfunctions_feature">Similarity (Feature Vectors)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute vector similarity (<code>cosine</code>, <code>hamdist</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#controlfunctions">Control Functions</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control functions (<code>do</code>, <code>firstval</code>, <code>returnif</code>, <code>halt</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#variadicaggregatorfunctions">Variadic Aggregator Functions</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate multiple variable arguments (<code>sum</code>, <code>prod</code>, <code>mean</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#simplerankingfunctions">Simple Ranking Functions</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basic functions for ranking search results (<code>rank</code>, <code>prox</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#collectorstagingfunctions">Collector Staging Functions</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collect result data in expressions (<code>stage</code>, <code>collectif</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong><a href="#evaluatormemory">Evaluator Memory</a></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#evaluatormemorysingle">Operations on Single Memory Locations</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">These functions perform operations on a specified memory location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemorystoreload">Storing and Loading</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Write and read memory data location (<code>store</code>, <code>write</code>, <code>load</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemorystackops">Stack</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory stack operations (<code>push</code>, <code>pop</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemorymovingdata">Moving Data</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move data between memory locations (<code>mov</code>, <code>xchg</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemoryincdec">Increment and Decrement</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inc/dec data in memory location (<code>inc</code>, <code>decif</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemorycomparator">Comparator</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare data in two memory locations (<code>equ</code>, <code>gt</code>, <code>lte</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemoryarithmetic">Arithmetic</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arithmetic operations on memory location (<code>add</code>, <code>divif</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemorybitwise">Bitwise</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitwise operations on memory location (<code>shr</code>, <code>and</code>, <code>xorif</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemoryvector">Vector Arithmetic</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AVX accelerated bytearray vector operations (<code>dp_pi8</code>, <code>cos_pi8</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemoryvarious">Various Functions</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Smoothing and counting (<code>smooth</code>, <code>count</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemoryindexingop">Indexing</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Various memory indexing helper functions (<code>modindex</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#evaluatormemory_multiple">Operations on Multiple Memory Locations</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">These functions perform array operations on multiple memory locations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arraysetcopy">Set and Copy</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign and copy data (<code>mset</code>, <code>mcopy</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arrayheap">Heap Operations</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Min/max-heap operations (<code>mheapifymin</code>, <code>mheappushmin</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arraysort">Sorting</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort a memory range (<code>msort</code>, <code>mreverse</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arraycast">Type Cast</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert data in multiple memory locations (<code>mint</code>, <code>mreal</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arrayincdec">Increment and Decrement</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inc/dec all locations in memory range (<code>minc</code>, <code>mdec</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_scalararrayarithmetic">Arithmetic</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arithmetic on multiple memory locations (<code>mmul</code>, <code>msqrt</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arraynumeric">Numeric</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric operations on multiple locations (<code>mround</code>, <code>mabs</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arraylogexp">Logarithms and Exponential Functions</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apply log/exp to memory range (<code>mlog2</code>, <code>mlog10</code>, <code>mexp</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arraytrighyp">Trigonometric and Hyperbolic</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apply trig/hyp functions to memory range (<code>msin</code>, <code>macosh</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arraybitwise">Bitwise Operations</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bit shift and logical operations on memory range (<code>mshr</code>, <code>mxor</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arrayhash">Hashing</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash multiple memory locations (<code>mhash</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arrayaggregate">Aggregation</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregate memory range (<code>msum</code>, <code>msumsqr</code>, <code>mharmmean</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="#evaluatormemory_arrayprobe">Array Probing</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search memory range (<code>mcount</code>, <code>mcmp</code>, <code>msubset</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="#evaluator_specialpurpose">Special Purpose Operations</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluator_probealtarray"><em>probealtarray</em>()</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>probealtarray()</code> compares special array object to probe stored in memory range and computes a match score.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluator_synarc_decay"><em>synarc.decay</em>() and <em>synarc.xdecay</em>()</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>synarc.decay()</code> and <code>synarc.xdecay()</code> compute time-decayed arc values.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="evaluatoroverview">2. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>VGX has a built-in evaluator engine for executing user-defined expressions. Custom formulas can be used in traversal filters (<code>filter=</code>), result ranking (<code>rank=</code>) and rendering of selected fields (<code>select=</code>). For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="nb">filter</span>  <span class="o">=</span> <span class="sh">"</span><span class="s">next.id in {</span><span class="sh">'</span><span class="s">B*</span><span class="sh">'</span><span class="s">,</span><span class="sh">'</span><span class="s">*ch*</span><span class="sh">'</span><span class="s">}</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">rank</span>    <span class="o">=</span> <span class="sh">"</span><span class="s">next.arc.value / next[</span><span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="s">]</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">select</span>  <span class="o">=</span> <span class="sh">"</span><span class="s">.id; age</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">sortby</span>  <span class="o">=</span> <span class="n">S_RANK</span>
<span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The expression <a href="#evaluatorsyntax">syntax</a> supports <a href="#syn_group">grouping</a>, <a href="#syn_group">nesting</a>, <a href="#syn_logicalcondition">logical operators</a>, <a href="#syn_comparison">comparison operators</a>, <a href="#syn_subscript">property lookup</a>, <a href="#_store">array indexing</a>, membership tests for <a href="#syn_memberofset">discrete</a> and <a href="#syn_innumericrange">continuous sets</a>, and all the standard mathematical operators and <a href="#evaluatorfunctions">functions</a>. Expressions can be <a href="#evaluatordefine">pre-defined</a> and referenced by name in graph queries.</p>
</div>
<div class="paragraph">
<p>A comprehensive library of <a href="#evaluatorfunctions">functions</a>, <a href="#evaluatorconstants">constants</a> and <a href="#evaluatorenvironment">environment variables</a> is available for use in expressions.</p>
</div>
<div class="paragraph">
<p>It is possible to define and pass a <a href="#evaluatormemory">memory array object</a> to queries. Expressions evaluated as part of a query may then read or write elements of the memory array, opening up many possibilities for algorithm design. For instance, variables captured by a filter expression may be passed as input to a ranking expression. The same memory array object can be used by different queries enabling information sharing from one query to the next. Other uses include value aggregation, creating histograms, tracking graph cycles, and computing averages or deviations just to name a few.</p>
</div>
<div class="paragraph">
<p>Expressions can also be evaluated stand-alone using <a href="#evaluate"><code>pyvgx.Graph.Evaluate()</code></a>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">1+1</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 2
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">log( (2.1e3 + 4.5) * (pi - sin(6.7)) )</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 8.66...</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_safe_evaluation">2.1. Safe Evaluation</h3>
<div class="paragraph">
<p>Due to the schemaless and dynamic nature of data values encountered during traversal the evaluator uses a best-effort approach when computing results. In general the evaluator will compute expressions "the way you intended." Where it deviates from many programming languages is in the lenient handling of operations on incompatible objects, zero division, domain errors, accessing non-existent properties, and out of range array indices.</p>
</div>
<div class="paragraph">
<p>It is impossible to write an expression that will crash, lock or leave the system in a corrupted state.</p>
</div>
<div class="sect3">
<h4 id="_incompatible_objects">2.1.1. Incompatible Objects</h4>
<div class="paragraph">
<p>Operations on incompatible objects will generally produce results as if the operations were not performed, which usually means keeping the leftmost operand. For example, <code>"'a string' + 2.5"</code> will produce <code>'a string'</code> and <code>"17.5 + 'a string' + 2.5"</code> will produce <code>20.0</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_divide_by_zero">2.1.2. Divide by Zero</h4>
<div class="paragraph">
<p>The result of zero division is generally a "very large number". For example, <code>1/0</code> evaluates to <code>8.5e37</code>. This interpretation of zero division ensures formulas are computable even as divisors approach (and reach) zero. The divisor <code>-0.0</code> is an exception in that <code>1/-0.0</code> produces <code>-inf</code> and <code>0/-0.0</code> produces <code>nan</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_domain_errors">2.1.3. Domain Errors</h4>
<div class="paragraph">
<p>Some mathematical functions accept arguments outside their defined domains. Roots of negative numbers produce zero (imaginary numbers are not supported.) Logarithms of zero or negative numbers produce a negative number which depends on the base. For example <code>sqrt(-1)</code> evaluates to 0, <code>log(0)</code> evaluates to -745.0 and <code>log2(-1)</code> evaluates to -1074.0. Computation involving roots and logarithms will always produce numeric results.</p>
</div>
<div class="paragraph">
<p>Other functions, such as the trigonometric functions, will produce <code>nan</code> for invalid arguments. For instance, <code>asin(2)</code> results in <code>nan</code> as does <code>sqrt(-1) + asin(2) + 5</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_non_existent_vertex_properties">2.1.4. Non-existent Vertex Properties</h4>
<div class="paragraph">
<p>Lookup of a non-existent property will be processed as if the lookup did not take place. For example, if property <em>"x"</em> does not exist then <code>1 + vertex['x'] + 2</code> evaluates to 3 and <code>5 / vertex['x']</code> evaluates to 5, even though <code>isnan( vertex['x'] )</code> yields <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Following this logic, <code>cos( vertex['x'] )</code> is <code>nan</code> while both <code>0 + cos( vertex['x'] )</code> and <code>cos( 0 + vertex['x'] )</code> return 1.</p>
</div>
<div class="paragraph">
<p>Default values for non-existent properties can be obtained in two ways. The first method is <a href="#_property">function <code>vertex.property( <em>"x"</em>, <em>default</em> )</code></a> which returns property <em>"x"</em> of current <em>tail</em> (i.e. <code>vertex['x']</code>) if it exists, or <em>default</em> if the property does not exist. The second method is <a href="#_firstval">function <code>firstval()</code></a>, which is variadic (i.e. any number of arguments) and returns the leftmost argument that is not <code>nan</code>. For example, <code>firstval( vertex['x'], 2.5 )</code> returns 2.5 if property <em>"x"</em> does not exist and <code>firstval( next['x'], asin(next['y']), pi/2 )</code> returns &#928;/2 if the two preceding arguments both produce <code>nan</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Substitute <code>next</code> or <code>prev</code> for <code>vertex</code> to access properties of the current <em>head</em> or previous <em>tail</em> when traversing arcs. E.g. <code>next.property( <em>x</em> )</code> or <code>prev[ <em>x</em> ]</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_out_of_range_subscripts">2.1.5. Out of Range Subscripts</h4>
<div class="paragraph">
<p>Operations involving array subscripts employ modulo indexing which guarantees safety. For example, if <a href="#evaluatormemory">Evaluator Memory</a> is used and the memory array object has 128 slots <code>store(5, 100)</code>, <code>store(133, 100)</code>, and <code>store(-123, 100)</code> are equivalent; they all assign value <code>100</code> to memory location 5. The size of memory array objects is always a power of two. The last four slots are <a href="#evaluatormemoryregisters">aliased with registers</a> <code>R1</code>, <code>R2</code>, <code>R3</code> and <code>R4</code>. There is also a <a href="#evaluatormemorystack">stack</a> which grows downward starting at the slot just before the registers. It is the responsibility of the programmer to ensure algorithm correctness and avoid undesired modulo indexing or aliasing conflicts between array subscripts, registers, and stack.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluatordatatypes">2.2. Data Types</h3>
<div class="paragraph">
<p>The evaluator engine can operate on objects of various types. If a function is called with an incompatible argument the result is generally the unprocessed argument, such as <code>sin('hello')</code> which simply returns <code>'hello'</code>.</p>
</div>
<div class="paragraph">
<p>Many operators and functions automatically adjust their behavior according to the argument types. For example, the function <code>hash()</code> produces a 64-bit integer hash of the argument, which can be of any type, but uses different algorithms depending on the type. (<code>hash( 123 )</code>, <code>hash( 'hello' )</code> and <code>hash( vector )</code> are all valid.)</p>
</div>
<div class="paragraph">
<p>The final result of an expression is interpreted according to the context where it appears. Filters are concerned with matching (positivity), ranking is concerned with numeric scores and select statements expect lists of objects to render.</p>
</div>
<table id="datatypes" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Evaluator Data Types</caption>
<colgroup>
<col style="width: 13.3333%;">
<col style="width: 13.3333%;">
<col style="width: 26.6666%;">
<col style="width: 13.3333%;">
<col style="width: 33.3335%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Positive Match</th>
<th class="tableblock halign-left valign-top">As Rank Score</th>
<th class="tableblock halign-left valign-top">Type Check</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_integer"><em>integer</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">real( <em>self</em> )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_isint">isint()</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit signed integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_real"><em>real</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>self</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_isreal">isreal()</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit (double precision) floating point.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_real"><em>string</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">real( <em>first_5_bytes_as_int</em> )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_isstr">isstr()</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text string or raw bytes. May appear as function argument or return value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_group"><em>group</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">first item</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">first item value</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of objects</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_range"><em>range</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(N/A)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(N/A)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuous set of numbers from <em>a</em> to <em>b</em> <code>range[a, b&gt;</code> for use with the <code>in</code> and <code>notin</code> operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_set"><em>set</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discrete set of objects <code>{a, b, c, &#8230;&#8203;}</code> for use with the <code>in</code> and <code>notin</code> operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_vector"><em>vector</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">real( <em>address</em> )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_isvector">isvector()</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object of type <a href="../similarity/vector.html">&#60;vector&#62;</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_bitvector"><em>bitvector</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">!= 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">real( <em>self</em> )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_isbitvector">isbitvector()</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit unsigned integer for use with certain operations that handle bit masks and integers differently.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_keyval"><em>keyval</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em> &gt; 0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2-tuple (<em>key</em>, <em>value</em>) where <em>key</em> is a 32-bit signed integer and <em>values</em> is a single precision float.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_vertex"><em>vertex</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">real( <em>address</em> )</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object of type <a href="../vertex/vertex.html#pyvgxvertex">pyvgx.Vertex</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_vertexid"><em>vertexid</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">real( <em>address</em>  )</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identifier string of an object of type <a href="../vertex/vertex.html#pyvgxvertex">pyvgx.Vertex</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_nan"><em>nan</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_isnan">isnan()</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not a number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_null"><em>null</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#datatype_inf"><em>inf</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Infinity</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="datatype_integer">2.2.1. Type <em>integer</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">1000</span><span class="sh">"</span> <span class="p">)</span>   <span class="c1"># -&gt; 1000
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">-1000</span><span class="sh">"</span> <span class="p">)</span>  <span class="c1"># -&gt; -1000
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">01000</span><span class="sh">"</span> <span class="p">)</span>  <span class="c1"># -&gt; 1000   leading zeros ignored
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">0x1000</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 4096   0x prefix for hexadecimal
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">0X1000</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 4096   0X also accepted
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">0xffffffffffffffff</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; -1   2's complement
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">0xfffffffffffffffe</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; -2   2's complement</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_real">2.2.2. Type <em>real</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">3.14</span><span class="sh">"</span> <span class="p">)</span>  <span class="c1"># -&gt; 3.14
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">.123</span><span class="sh">"</span> <span class="p">)</span>  <span class="c1"># -&gt; 0.123
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">1e3</span><span class="sh">"</span> <span class="p">)</span>   <span class="c1"># -&gt; 1000.0
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">-.1e1</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 1.0</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_string">2.2.3. Type <em>string</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"'</span><span class="s">hello</span><span class="sh">'"</span> <span class="p">)</span> <span class="c1"># -&gt; 'hello'</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_group">2.2.4. Type <em>group</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">(1,2,3,4)</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 1
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">(</span><span class="sh">'</span><span class="s">hello</span><span class="sh">'</span><span class="s">,2,3,4)</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 'hello'</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_range">2.2.5. Type <em>range</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">0.999 in range(1,3)</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 0
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">1 in range(1,3)</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 1
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">2.999 in range(1,3)</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 1
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">3 in range(1,3)</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 0</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_set">2.2.6. Type <em>set</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">{1, 2, 3}</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; '&lt;set&gt;'
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">2 in {1, 2, 3}</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 1
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">2.999 in {1, 2, 3}</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 0</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_vector">2.2.7. Type <em>vector</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">X</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">X</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">Y</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">X</span><span class="p">.</span><span class="nc">SetVector</span><span class="p">(</span> <span class="p">[(</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="sh">'</span><span class="s">b</span><span class="sh">'</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),(</span><span class="sh">'</span><span class="s">c</span><span class="sh">'</span><span class="p">,</span><span class="mf">0.25</span><span class="p">)]</span> <span class="p">)</span>
<span class="n">Y</span><span class="p">.</span><span class="nc">SetVector</span><span class="p">(</span> <span class="p">[(</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="sh">'</span><span class="s">b</span><span class="sh">'</span><span class="p">,</span><span class="mf">0.75</span><span class="p">),(</span><span class="sh">'</span><span class="s">c</span><span class="sh">'</span><span class="p">,</span><span class="mf">0.5</span><span class="p">)]</span> <span class="p">)</span>

<span class="n">E</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">Evaluate</span>

<span class="c1">### Vector type
</span><span class="nc">E</span><span class="p">(</span> <span class="sh">"</span><span class="s">next.vector</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">X</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; '&lt;vector&gt;'
</span>
<span class="c1">### Length
</span><span class="nc">E</span><span class="p">(</span> <span class="sh">"</span><span class="s">len( next.vector )</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">X</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 3
</span>
<span class="c1">### Magnitude
</span><span class="nc">E</span><span class="p">(</span> <span class="sh">"</span><span class="s">asreal( next.vector )</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">X</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 1.14564394951
</span>
<span class="c1">### Fingerprint
</span><span class="nc">E</span><span class="p">(</span> <span class="sh">"</span><span class="s">hash( next.vector )</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">X</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; -3579455383477239039
</span>
<span class="c1">### Address
</span><span class="nc">E</span><span class="p">(</span> <span class="sh">"</span><span class="s">int( next.vector )</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">X</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 2337927647264
</span>
<span class="c1">### Element of
</span><span class="nc">E</span><span class="p">(</span> <span class="sh">"'</span><span class="s">c</span><span class="sh">'</span><span class="s"> in next.vector</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">X</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 1
</span><span class="nc">E</span><span class="p">(</span> <span class="sh">"'</span><span class="s">d</span><span class="sh">'</span><span class="s"> in next.vector</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">X</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 0
</span>
<span class="c1">### Similarity
</span><span class="n">g</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">sim( prev.vector, next.vector )</span><span class="sh">"</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="sh">"</span><span class="s">X</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">Y</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 0.97265625</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_bitvector">2.2.8. Type <em>bitvector</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">0b11110000</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="sh">'</span><span class="s">&lt;bitvector 0x00000000000000f0&gt;</span><span class="sh">'</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_keyval">2.2.9. Type <em>keyval</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">keyval(1000,0.5)</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; '&lt;keyval (1000,0.5)&gt;'
</span>
<span class="c1">### Key
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">int( keyval(1000,0.5) )</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 1000
</span>
<span class="c1">### Value
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">real( keyval(1000,0.5) )</span><span class="sh">"</span> <span class="p">)</span> <span class="c1"># -&gt; 0.5
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_vertex">2.2.10. Type <em>vertex</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">V</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">Node1</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">V</span><span class="p">[</span><span class="sh">'</span><span class="s">x</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Connect</span><span class="p">(</span> <span class="sh">"</span><span class="s">Node1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">to</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">X</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Connect</span><span class="p">(</span> <span class="sh">"</span><span class="s">Node1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">to</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Y</span><span class="sh">"</span> <span class="p">)</span>

<span class="c1">### Attribute
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">next.odeg</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">2</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">next.tmc</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1642822680</span>

<span class="c1">### Internalid string
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">str(next)</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="sh">'</span><span class="s">42aa906a0037217e4bc4bcaafc11817e</span><span class="sh">'</span>

<span class="c1">### Address
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">int( next )</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">2336660804768</span>

<span class="c1">### Property
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">int( next )</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">2336660804768</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"'</span><span class="s">x</span><span class="sh">'</span><span class="s"> in next</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"'</span><span class="s">y</span><span class="sh">'</span><span class="s"> in next</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">0</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">next[</span><span class="sh">'</span><span class="s">x</span><span class="sh">'</span><span class="s">]</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1000</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_vertexid">2.2.11. Type <em>vertexid</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">V</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">Node1</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">next.id</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="sh">'</span><span class="s">Node1</span><span class="sh">'</span>
<span class="nf">hex</span><span class="p">(</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">hash( next.id )</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">))</span> <span class="o">-&gt;</span> <span class="sh">'</span><span class="s">0x4bc4bcaafc11817e</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_nan">2.2.12. Type <em>nan</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">nan</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nan</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">acos(2)</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nan</span>  <span class="c1"># domain error
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">acos(2) == nan</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">1.8e308</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nan</span>  <span class="c1"># out of range</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_null">2.2.13. Type <em>null</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">null</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isnan( null )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datatype_inf">2.2.14. Type <em>inf</em></h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">inf</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">inf</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">1e300 * 1e300</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">inf</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">1e300 * 1e300 == inf</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span>

<span class="c1">### Infinity is considered numeric
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isnan( inf )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">0</span>

<span class="c1">### NOTE: The expression language is designed to produce
###       numeric results even when infinity is involved
###       in the computation. Dividing by zero produces
###       "a very large number" and dividing by infinity
###       produces zero.
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">1/inf</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">0.0</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">1**inf</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">1.0</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">1.000001**inf</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">1.7976931348623157e+308</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">0.999999**inf</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">0.0</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">inf/inf</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nan</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">inf-inf</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nan</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">-1/-0.0</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">inf</span> <span class="c1"># Special case
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">-1/-0.0 == inf</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="noshortcircuiting">2.3. No Short Circuiting</h3>
<div class="paragraph">
<p>There are no short-circuit operators, leaving no doubt about which parts of expressions are evaluated: all sub-expressions within a complex expression are always executed.</p>
</div>
<div class="paragraph">
<p>For example <code>"1 &gt; 2 &amp;&amp; inc( R1 ) &gt; 10"</code> will naturally always be <code>false</code> (due to <code>1 &gt; 2</code> part), but will regardless execute <code>inc( R1 )</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This behavior is different from many programming languages, so beware.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Conditional execution requires explicit use of a conditional function. The above example may be rewritten to perform operations conditionally (also replacing <code>1 &gt; 2</code> with the more useful <code>.arc.value &gt; 2</code>), like this:</p>
</div>
<div class="paragraph">
<p><code>"incif( .arc.value &gt; 2, R1 ) &amp;&amp; load( R1 ) &gt; 10"</code>. Here the value in register <code>R1</code> is only incremented when <code>.arc.value &gt; 2</code> and the entire expression evaluates to true after 11 iterations where the <code>.arc.value</code> condition was met.</p>
</div>
<div class="paragraph">
<p><a href="#filtercaution">Be careful when writing filters</a> to avoid unintended overhead in computation and memory access.</p>
</div>
<div class="paragraph">
<p>There are exactly two exceptions to the no short-circuiting execution policy. The functions <a href="#_return"><code>return()</code></a> and <a href="#_returnif"><code>returnif()</code></a> can be placed within an expression to terminate execution at that point in the expression.</p>
</div>
</div>
<div class="sect2">
<h3 id="_expression_examples">2.4. Expression Examples</h3>
<div class="paragraph">
<p>Suppose we have created a graph with relationships between friends. The following examples show how we can filter, rank results and select fields to return.</p>
</div>
<div class="sect3">
<h4 id="_filter_example">2.4.1. Filter Example</h4>
<div class="listingblock">
<div class="title">Find Alice&#8217;s friends and pets</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="nb">filter</span>  <span class="o">=</span> <span class="sh">"</span><span class="s">( .arc.type in {</span><span class="sh">'</span><span class="s">friend</span><span class="sh">'</span><span class="s">,</span><span class="sh">'</span><span class="s">knows</span><span class="sh">'</span><span class="s">,</span><span class="sh">'</span><span class="s">likes</span><span class="sh">'</span><span class="s">} &amp;&amp; .type == </span><span class="sh">'</span><span class="s">person</span><span class="sh">'</span><span class="s"> ) || ( .arc.type == </span><span class="sh">'</span><span class="s">owns</span><span class="sh">'</span><span class="s"> &amp;&amp; .type = </span><span class="sh">'</span><span class="s">pet</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we use <code>filter=</code> to match three different relationships ("friend", "knows", or "likes") using the <code>in { &#8230;&#8203; }</code> set operator and combine sub-expressions with boolean operators <code>&amp;&amp;</code> and <code>||</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Complex matching logic like this is not possible using <code>arc=</code> and <code>neighbor=</code> parameters alone. However, in many cases it may be more efficient to also include <code>arc=</code> and <code>neighbor=</code> in the query, since they may help reduce the amount of processing performed by the expression evaluator by early termination of non-matching filters.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_dynamic_ranking_example">2.4.2. Dynamic Ranking Example</h4>
<div class="listingblock">
<div class="title">Boost Alice&#8217;s friends</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">sortby</span> <span class="o">=</span> <span class="n">S_RANK</span><span class="p">,</span>
    <span class="n">rank</span>   <span class="o">=</span> <span class="sh">"</span><span class="s">.arc.value * ( 1 + 9 * (.arc.type == </span><span class="sh">'</span><span class="s">friend</span><span class="sh">'</span><span class="s">)) / next.deg</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we use <code>rank=</code> to specify a custom scoring function. To use the computed scores for sorting results we must also specify <code>sortby=S_RANK</code>. In this example results are ordered according to arc values divided by neighbor&#8217;s degree, boosting relationships of type 'friend' by a factor 10.</p>
</div>
</div>
<div class="sect3">
<h4 id="_select_result_fields_example">2.4.3. Select Result Fields Example</h4>
<div class="listingblock">
<div class="title">Include selected and computed properties in result</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">select</span> <span class="o">=</span> <span class="sh">"</span><span class="s">age; address; SCORE1: .arc.value / (1 + log( next.odeg / next.ideg )); LABEL1: hash( next.id )</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The select statement specifies a semicolon-separated list of items to return. Items can be attributes, vertex properties, or computed values identified by labels. If the item is a single token it is interpreted as a vertex property key, unless it starts with a period <code>"."</code> which is interpreted as an attribute (such as <code>".id"</code> which is short for <code>"next.id"</code>).</p>
</div>
<div class="paragraph">
<p>When the item is a labeled expression <code>"label : &#8230;&#8203;"</code> any valid expression can be specified to dynamically compute values. The computed values will be identifiable in the result by their labels.</p>
</div>
<div class="paragraph">
<p>This example includes Alice&#8217;s neighbors' age, address, some computed number identified by label SCORE1, and another computed value identified by LABEL1.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="evaluatorreference">3. Expression Language Reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Expressions are constructed using syntax similar to many programming languages, and offer a wide variety of built-in function. The following sections summarize all available symbols, functions and constructs.</p>
</div>
<div class="paragraph">
<p>Expressions are available to use in query parameters <code>filter=</code>, <code>rank=</code> and <code>select=</code>.</p>
</div>
<div class="sect2">
<h3 id="evaluatordefine">3.1. Define Functions with <code>Define()</code></h3>
<div class="paragraph">
<p>An expression may be defined and stored in the graph for future use.</p>
</div>
<div class="sect3">
<h4 id="_syntax">3.1.1. Syntax</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code><strong>pyvgx.Graph.Define</strong>( <em>expression</em> )</code></dt>
<dd>
<p>Create a new function formula that can be used by queries for filtering and ranking. The <em>expression</em> parameter is a string of the form <code>&lt;name&gt; := &lt;formula&gt;</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_parameters">3.1.2. Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22.2222%;">
<col style="width: 22.2222%;">
<col style="width: 55.5556%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>expression</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expression definition of the form <code>&lt;name&gt; := &lt;formula&gt;</code> where <em>&lt;formula&gt;</em> is any valid evaluator expression and <em>&lt;name&gt;</em> is a label which is used later by queries to invoke the formula.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_value">3.1.3. Return Value</h4>
<div class="paragraph">
<p>This method does not return anything.</p>
</div>
</div>
<div class="sect3">
<h4 id="_remarks">3.1.4. Remarks</h4>
<div class="paragraph">
<p>Pre-defined expressions are stored in the graph object on which the Define() method was invoked. Expressions defined for a graph instance are exclusive to that instance and cannot be referenced by other graphs.</p>
</div>
<div class="paragraph">
<p>It is recommended to pre-define complex functions before using them in queries since parsing and compiling occur only when the expression is defined. Eliminating this overhead may help speed up query execution, and in cases where the same expression is used by multiple queries it is easier to maintain consistent functionality.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure <a href="../reference.html#graphobject_enummethods">type enumerations</a> exist for all arc relationship types and vertex types that appear in the expression <em>before</em> the expression is defined. Otherwise the expression will not be correctly evaluated.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluate">3.2. Evaluate Expressions with <code>Evaluate()</code></h3>
<div class="paragraph">
<p>An expression may be evaluated outside the context of a query for testing or for operations that do not require a graph query.</p>
</div>
<div class="sect3">
<h4 id="_syntax_2">3.2.1. Syntax</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code><strong>pyvgx.Graph.Evaluate</strong>( <em>expression</em><strong>[</strong>, <em>tail</em><strong>[</strong>, <em>arc</em><strong>[</strong>, <em>head</em><strong>[</strong>, <em>vector</em><strong>[</strong>, <em>memory</em> <strong>]]]]]</strong> )</code></dt>
<dd>
<p>Execute the <em>expression</em>, which is a string defining a new formula, or referencing a pre-defined formula. The optional parameters are used to supply information that may be referenced in the formula.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_2">3.2.2. Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 25%;">
<col style="width: 16.6666%;">
<col style="width: 41.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>expression</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expression to be evaluated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tail</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em> or <a href="../vertex/vertex.html#pyvgxvertex">pyvgx.Vertex</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex whose attributes and properties may be accessed via the various <a href="#vertexattributes"><code>vertex*</code> references</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>arc</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../specification/arcSpecificationSyntax.html#arcspecificationsyntax">Relationship specifier</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arc whose attributes may be accessed via the various <a href="#arcattributes"><code>next.arc*</code> references</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>head</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em> or <a href="../vertex/vertex.html#pyvgxvertex">pyvgx.Vertex</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex whose attributes and properties may be accessed via the various <a href="#vertexattributes"><code>next*</code> references</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>vector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../similarity/vector.html">&#60;vector&#62;</a> or Python list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similarity vector which may be accessed via the <a href="#_vector"><code>vector</code> reference</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>memory</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory">pyvgx.Memory</a> or <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory array object which may be accessed using the various <a href="#evaluatormemoryreference">memory operations</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_value_2">3.2.3. Return Value</h4>
<div class="paragraph">
<p>This method returns the result of the evaluation, which may be an integer, a floating point object (including <code>nan</code> or <code>inf</code>), a string, or other object.</p>
</div>
</div>
<div class="sect3">
<h4 id="_remarks_2">3.2.4. Remarks</h4>
<div class="paragraph">
<p>This method is useful for experimenting with expressions before using them with queries. It can also be used for pre/post processing memory arrays outside the context of a query. For example, if a query was used to gather information into a memory array object this method can then be used to access and further process that information.</p>
</div>
<div class="paragraph">
<p>All processing within the evaluator occurs outside the Python interpreter, allowing for multi-threaded operation and in some cases more efficient single-threaded processing. For instance, running <a href="#_msum"><code><strong>msum()</strong></code></a> on a large memory array of 100,000,000 floating point numbers is about 5 times faster than Python&#8217;s native sum() function on an equivalent Python array. Moreover, running <a href="#_mradd"><code><strong>mradd()</strong></code></a> on the same memory array is about 50 times faster than performing the equivalent operation in a pure Python loop.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluatorsyntax">3.3. Basic Expression Syntax</h3>
<div class="paragraph">
<p>Expressions are evaluated according to operator precedence and associativity, as commonly used in most programming languages. The table below summarizes the syntax rules.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Symbolic Operators</caption>
<colgroup>
<col style="width: 15.3846%;">
<col style="width: 30.7692%;">
<col style="width: 38.4615%;">
<col style="width: 15.3847%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Precedence</th>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Associativity</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(</code> <code>)</code> <a id="_opgroup"></a>
<br>
<code>{</code> <code>}</code> <a id="_opset"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Group (parentheses)
<br>
Set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code> <a id="_opcall"></a>
<br>
<code>[]</code> <a id="_opsubscript"></a>
<br>
<code>.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Function call
<br>
Subscript (property)
<br>
Attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>` [[_opunaryplus]]
 +
`-` [[_opunaryminus]]
 +
`!` [[_oplogicalnot]]
 +
`~` [[_opbitwisenot]]
 +
`**+</code> <a id="_opexponentiation"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unary plus
<br>
Unary minus
<br>
Logical NOT
<br>
Bitwise NOT (one&#8217;s complement)
<br>
Exponentiation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Right-to-left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>in range(&#8230;&#8203;)</code> <a id="_opinrange"></a>
<br>
<code>notin range(&#8230;&#8203;)</code> <a id="_opnotinrange"></a>
<br>
<code>in { &#8230;&#8203; }</code> <a id="_opinset"></a>
<br>
<code>notin { &#8230;&#8203; }</code> <a id="_opnotinset"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In numeric range
<br>
Not in numeric range
<br>
Is element of set
<br>
Is not element of set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code> <a id="_opmultiplication"></a>
<br>
<code>/</code> <a id="_opdivision"></a>
<br>
<code>%</code> <a id="_opmodulo"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplication
<br>
Division
<br>
Modulo (remainder)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code> <a id="_opaddition"></a>
<br>
<code>-</code> <a id="_opsubtraction"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Addition
<br>
Subtraction</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&lt;</code> <a id="_opleftshift"></a>
<br>
<code>&gt;&gt;</code> <a id="_oprightshift"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitwise left shift
<br>
Bitwise right shift</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;</code> <a id="_oplessthan"></a>
<br>
<code>&lt;=</code> <a id="_oplessthanequal"></a>
<br>
<code>&gt;</code> <a id="_opgreaterthan"></a>
<br>
<code>&gt;=</code> <a id="_opgreaterthanequal"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less than
<br>
Less than or equal to
<br>
Greater than
<br>
Greater than or equal to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>==</code> <a id="_opequal"></a>
<br>
<code>!=</code> <a id="_opnotequal"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equal to
<br>
Not equal to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;</code> <a id="_opbitwiseand"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitwise AND</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>^</code> <a id="_opbitwisexor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitwise XOR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|</code> <a id="_opbitwiseor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitwise OR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;&amp;</code> <a id="_oplogicaland"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical AND</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>||</code> <a id="_oplogicalor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical OR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?:</code> <a id="_opternaryconditional"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ternary conditional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Right-to-left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>:=</code> <a id="_opdefine"></a>
<br>
 <code>=</code> <a id="_opvarassign"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expression definition
<br>
 Variable assignment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Right-to-left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>:</code> <a id="_oplabel"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label (<code>select=</code> only)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Right-to-left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>,</code> <a id="_opcomma"></a>
<br>
 <code>;</code> <a id="_opsemicolon"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma
<br>
 Semicolon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Left-to-right</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="syn_group">3.3.1. Group</h4>
<div class="paragraph">
<p>Operations may be enclosed in parentheses <code>(</code> <code>)</code> to override default precedence rules. Groups may be nested to construct any mathematical formula or logical expression. Nesting is unlimited.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span> <span class="p">(</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="p">)</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">5</span> <span class="p">)</span> <span class="p">)</span>                   <span class="o">-&gt;</span> <span class="mf">0.02222</span><span class="bp">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A group can also be used to perform one or more "hidden" operations needed for their side-effects. When multiple expressions separated by comma <code>,</code> appear within the group only the value of the first expression becomes the value of the group. All subsequent expressions are evaluated but their return values are discarded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span> <span class="o">+</span> <span class="p">(</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">3.5</span> <span class="p">)</span>                 <span class="o">-&gt;</span> <span class="mf">2.5</span>
<span class="mi">10</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="nf">store</span><span class="p">(</span> <span class="n">R1</span><span class="p">,</span> <span class="n">pi</span> <span class="p">)</span> <span class="p">)</span>                     <span class="o">-&gt;</span> <span class="mi">20</span>
<span class="mi">4</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span>                                  <span class="o">-&gt;</span> <span class="mi">63</span>
<span class="mi">4</span> <span class="o">**</span> <span class="p">(</span><span class="mi">3</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>                                <span class="o">-&gt;</span> <span class="mi">5</span>
<span class="mi">4</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>                                <span class="o">-&gt;</span> <span class="mi">61</span>
<span class="mi">4</span> <span class="o">**</span> <span class="p">(</span><span class="mi">3</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>                                <span class="o">-&gt;</span> <span class="mi">16</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_set">3.3.2. Set</h4>
<div class="paragraph">
<p>A set of discrete numbers or objects is created by placing them within braces <code>{</code> <code>}</code>, items separated by commas <code>,</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="p">{</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sh">'</span><span class="s">hello</span><span class="sh">'</span><span class="p">,</span> <span class="mf">6.7</span> <span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_functioncall">3.3.3. Function Call</h4>
<div class="paragraph">
<p>A pair of parentheses <code>(&#8230;&#8203;)</code> with optional comma <code>,</code> separated arguments is interpreted as a function call when the preceding token is a string.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="nf">random</span><span class="p">()</span>
<span class="nf">log</span><span class="p">(</span> <span class="mf">1.23</span> <span class="p">)</span>
<span class="nf">mmul</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="n">pi</span> <span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_subscript">3.3.4. Subscript</h4>
<div class="paragraph">
<p>A literal string <code><em>'s'</em></code> within a pair of brackets <code>[ <em>'s'</em> ]</code> denotes a property lookup when the preceding token is a vertex object. Properties are readonly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">vertex</span><span class="p">[</span> <span class="sh">'</span><span class="s">prop1</span><span class="sh">'</span> <span class="p">]</span>
<span class="nb">next</span><span class="p">[</span> <span class="sh">'</span><span class="s">value</span><span class="sh">'</span> <span class="p">]</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_attribute">3.3.5. Attribute</h4>
<div class="paragraph">
<p>The dot <code>.</code> operator is used to access vertex attributes, arc attributes and various context information. Attributes are readonly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">vertex</span><span class="p">.</span><span class="nb">id</span>
<span class="nb">next</span><span class="p">.</span><span class="n">arc</span><span class="p">.</span><span class="n">value</span>
<span class="n">graph</span><span class="p">.</span><span class="n">size</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_unaryplusminus">3.3.6. Unary Plus/Minus</h4>
<div class="paragraph">
<p>Unary plus <code>+</code> and minus <code>&#8722;</code> set the sign of a numeric value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="o">-</span><span class="mi">1</span>                      <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span>
<span class="o">-</span><span class="p">(</span><span class="o">+</span><span class="mi">2</span> <span class="o">-</span> <span class="o">+</span><span class="mi">5</span><span class="p">)</span>              <span class="o">-&gt;</span> <span class="mi">3</span>
<span class="o">-</span><span class="mi">7</span><span class="o">+-</span><span class="mi">1</span><span class="o">--</span><span class="mi">8</span>                <span class="o">-&gt;</span> <span class="mi">0</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_logicalnot">3.3.7. Logical NOT</h4>
<div class="paragraph">
<p>The exclamation point <code>!</code> negates a logical value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="err">!</span><span class="mi">0</span>                      <span class="o">-&gt;</span> <span class="mi">1</span>
<span class="err">!</span><span class="mi">1</span>                      <span class="o">-&gt;</span> <span class="mi">0</span>
<span class="err">!</span><span class="mi">2</span>                      <span class="o">-&gt;</span> <span class="mi">0</span>
<span class="err">!</span><span class="p">(</span> <span class="n">true</span> <span class="o">||</span> <span class="n">false</span> <span class="p">)</span>      <span class="o">-&gt;</span> <span class="mi">0</span>
<span class="err">!</span><span class="p">(</span> <span class="err">!</span><span class="n">true</span> <span class="o">||</span> <span class="n">false</span> <span class="p">)</span>     <span class="o">-&gt;</span> <span class="mi">1</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_bitwisenot">3.3.8. Bitwise NOT</h4>
<div class="paragraph">
<p>A tilde <code>~</code> denotes one&#8217;s complement of a numeric value, i.e. all bits are inverted.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="o">~</span><span class="mi">0</span>                      <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span>
<span class="o">~</span><span class="mi">1</span>                      <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">2</span>
<span class="o">~</span><span class="mh">0xffffffffffffffff</span>     <span class="o">-&gt;</span> <span class="mi">0</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_exponentiation">3.3.9. Exponentiation</h4>
<div class="paragraph">
<p>A pair of infix asterisks <code>**</code> raises a number to the power of another number.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">16</span> <span class="o">**</span> <span class="mi">2</span>                 <span class="o">-&gt;</span> <span class="mi">256</span>
<span class="mf">100.0</span> <span class="o">**</span> <span class="mf">0.5</span>            <span class="o">-&gt;</span> <span class="mf">10.0</span>
<span class="n">e</span> <span class="o">**</span> <span class="o">-</span><span class="mf">0.1</span>               <span class="o">-&gt;</span> <span class="mf">0.9048</span><span class="bp">...</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_innumericrange">3.3.10. In Numeric Range</h4>
<div class="paragraph">
<p>The <code>in</code> and <code>notin</code> operators followed by <code>range( <em>a</em>, <em>b</em> )</code> express the numeric range conditions &#8712; [ <em>a</em>, <em>b</em> &gt; and &#8713; [ <em>a</em>, <em>b</em> &gt;, respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">5</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span> <span class="p">)</span>          <span class="o">-&gt;</span> <span class="n">true</span>
<span class="mi">5</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span> <span class="p">)</span>          <span class="o">-&gt;</span> <span class="n">false</span>
<span class="n">pi</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span> <span class="mf">3.1</span><span class="p">,</span> <span class="mf">3.2</span> <span class="p">)</span>     <span class="o">-&gt;</span> <span class="n">true</span>
<span class="mi">10</span> <span class="n">notin</span> <span class="nf">range</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span> <span class="p">)</span>      <span class="o">-&gt;</span> <span class="n">true</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_memberofset">3.3.11. Member of Set</h4>
<div class="paragraph">
<p>The <code>in</code> and <code>notin</code> operators followed by set <code>{ <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> }</code> express the discrete set membership conditions &#8712; { <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> } and &#8713; { <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> }, respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">5</span> <span class="ow">in</span> <span class="p">{</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sh">'</span><span class="s">cat</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">dog</span><span class="sh">'</span> <span class="p">}</span>                 <span class="o">-&gt;</span> <span class="n">true</span>
<span class="mi">4</span> <span class="ow">in</span> <span class="p">{</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sh">'</span><span class="s">cat</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">dog</span><span class="sh">'</span> <span class="p">}</span>                 <span class="o">-&gt;</span> <span class="n">false</span>
<span class="sh">'</span><span class="s">cat</span><span class="sh">'</span> <span class="ow">in</span> <span class="p">{</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sh">'</span><span class="s">cat</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">dog</span><span class="sh">'</span> <span class="p">}</span>             <span class="o">-&gt;</span> <span class="n">true</span>
<span class="sh">'</span><span class="s">mouse</span><span class="sh">'</span> <span class="n">notin</span> <span class="p">{</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sh">'</span><span class="s">cat</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">dog</span><span class="sh">'</span> <span class="p">}</span>        <span class="o">-&gt;</span> <span class="n">true</span>
<span class="sh">'</span><span class="s">mouse</span><span class="sh">'</span> <span class="ow">in</span> <span class="p">{</span> <span class="sh">'</span><span class="s">*ous*</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">m*e</span><span class="sh">'</span> <span class="p">}</span>               <span class="o">-&gt;</span> <span class="n">true</span>
<span class="sh">'</span><span class="s">mice</span><span class="sh">'</span> <span class="ow">in</span> <span class="p">{</span> <span class="sh">'</span><span class="s">*ous*</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">m*e</span><span class="sh">'</span> <span class="p">}</span>                <span class="o">-&gt;</span> <span class="n">true</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_multiplication">3.3.12. Multiplication</h4>
<div class="paragraph">
<p>Infix <code>*</code> multiplies two numbers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span>           <span class="o">-&gt;</span> <span class="mi">6</span>
<span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span>          <span class="o">-&gt;</span> <span class="mf">6.28</span><span class="bp">...</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_division">3.3.13. Division</h4>
<div class="paragraph">
<p>Infix <code>/</code> divides a number by another.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">15</span> <span class="o">/</span> <span class="mi">3</span>              <span class="o">-&gt;</span> <span class="mi">5</span>
<span class="mi">16</span> <span class="o">/</span> <span class="mi">3</span>              <span class="o">-&gt;</span> <span class="mf">5.33</span><span class="bp">...</span>
<span class="mf">3.14</span> <span class="o">/</span> <span class="n">pi</span>           <span class="o">-&gt;</span> <span class="mf">0.999</span><span class="bp">...</span>
<span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span>               <span class="o">-&gt;</span> <span class="mf">8.51e37</span>
<span class="mi">1</span> <span class="o">/</span> <span class="o">-</span><span class="mf">0.0</span>            <span class="o">-&gt;</span> <span class="o">-</span><span class="n">inf</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When integer division has a remainder the result is promoted to floating point. Zero division results in a large floating point value except for the special case divisor -0.0 which produces <code>-inf</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="syn_modulo">3.3.14. Modulo</h4>
<div class="paragraph">
<p>Infix <code>%</code> yields the remainder after dividing two numbers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">15</span> <span class="o">%</span> <span class="mi">3</span>              <span class="o">-&gt;</span> <span class="mi">0</span>
<span class="mi">16</span> <span class="o">%</span> <span class="mi">3</span>              <span class="o">-&gt;</span> <span class="mi">1</span>
<span class="mf">3.14</span> <span class="o">%</span> <span class="n">pi</span>           <span class="o">-&gt;</span> <span class="mf">3.14</span>
<span class="mf">6.2</span> <span class="o">%</span> <span class="n">pi</span>            <span class="o">-&gt;</span> <span class="mf">3.06</span><span class="bp">...</span>
<span class="mi">1</span> <span class="o">%</span> <span class="mi">0</span>               <span class="o">-&gt;</span> <span class="mi">0</span>
<span class="mf">1.1</span> <span class="o">%</span> <span class="mi">0</span>             <span class="o">-&gt;</span> <span class="mf">1.18e-38</span>
<span class="mi">1</span> <span class="o">%</span> <span class="o">-</span><span class="mf">0.0</span>            <span class="o">-&gt;</span> <span class="n">nan</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Modulo zero results in 0 (or very close to 0) except for the special case divisor -0.0 which produces <code>nan</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="syn_addition">3.3.15. Addition</h4>
<div class="paragraph">
<p>Infix <code>+</code> adds two numbers or concatenates a string with another object implicitly cast to string.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span>               <span class="o">-&gt;</span> <span class="mi">2</span>
<span class="n">pi</span> <span class="o">+</span> <span class="n">e</span>              <span class="o">-&gt;</span> <span class="mf">5.8599</span><span class="bp">...</span>
<span class="sh">'</span><span class="s">x</span><span class="sh">'</span> <span class="o">+</span> <span class="sh">'</span><span class="s">y</span><span class="sh">'</span>           <span class="o">-&gt;</span> <span class="sh">"</span><span class="s">xy</span><span class="sh">"</span>
<span class="sh">'</span><span class="s">x</span><span class="sh">'</span> <span class="o">+</span> <span class="n">pi</span>            <span class="o">-&gt;</span> <span class="sh">"</span><span class="s">x3.14159</span><span class="sh">"</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_subtraction">3.3.16. Subtraction</h4>
<div class="paragraph">
<p>Infix <code>-</code> subtracts a number from another.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">1</span> <span class="o">-</span> <span class="mi">2</span>               <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">pi</span> <span class="o">-</span> <span class="n">e</span>              <span class="o">-&gt;</span> <span class="mf">0.42331</span><span class="bp">...</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_bitwiseshift">3.3.17. Bitwise Shift</h4>
<div class="paragraph">
<p>Infix <code>&lt;&lt;</code> and <code>&gt;&gt;</code> perform left and right bit shift, respectively, of the integer representation of the left operand by the amount specified by the right operand. Bits are not rotated, i.e. once bits are shifted off the left or right edge they are discarded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span>             <span class="o">-&gt;</span> <span class="mi">1024</span>
<span class="mf">1.9</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span>           <span class="o">-&gt;</span> <span class="mi">1024</span>
<span class="mf">1.9</span> <span class="o">&lt;&lt;</span> <span class="mf">10.0</span>         <span class="o">-&gt;</span> <span class="mf">1.9</span>
<span class="mh">0xff</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span>           <span class="o">-&gt;</span> <span class="mi">7</span>
<span class="mh">0xff</span> <span class="o">&gt;&gt;</span> <span class="mi">40</span>          <span class="o">-&gt;</span> <span class="mi">0</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the right operand is not an integer the shift operation is not performed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="syn_comparison">3.3.18. Comparison</h4>
<div class="paragraph">
<p>The infix comparison operators <code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code> compare the left and right operands yielding true or false. Operands may be numbers, strings, vertices or vectors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="sh">'</span><span class="s">hello</span><span class="sh">'</span> <span class="o">==</span> <span class="sh">'</span><span class="s">*llo</span><span class="sh">'</span>           <span class="o">-&gt;</span> <span class="n">true</span>
<span class="sh">'</span><span class="s">cat</span><span class="sh">'</span> <span class="o">!=</span> <span class="sh">'</span><span class="s">dog</span><span class="sh">'</span>              <span class="o">-&gt;</span> <span class="n">true</span>
<span class="mi">5</span> <span class="o">&gt;</span> <span class="mi">4</span>                       <span class="o">-&gt;</span> <span class="n">true</span>
<span class="mi">5</span> <span class="o">&gt;=</span> <span class="mf">5.0</span>                    <span class="o">-&gt;</span> <span class="n">true</span>
<span class="mf">5.0</span> <span class="o">&lt;</span> <span class="mf">4.5</span>                   <span class="o">-&gt;</span> <span class="n">false</span>
<span class="mi">5</span> <span class="o">&lt;=</span> <span class="mf">4.9999999</span>              <span class="o">-&gt;</span> <span class="n">false</span>
<span class="mi">5</span> <span class="o">==</span> <span class="mf">4.9999999</span>              <span class="o">-&gt;</span> <span class="n">true</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Two floating point values compare equal when their difference is smaller than approximately 1.1921e-7. This affects <code>==</code> and <code>!=</code>, but not <code>&gt;=</code> and <code>&lt;=</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="syn_bitwiselogic">3.3.19. Bitwise Logic</h4>
<div class="paragraph">
<p>Infix operators <code>&amp;</code>, <code>|</code> and <code>^</code> perform bitwise AND, OR and XOR, respectively, on their left and right operands.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mh">0xf0</span> <span class="o">&amp;</span> <span class="mh">0x3c</span>                 <span class="o">-&gt;</span> <span class="mh">0x30</span>
<span class="mh">0xf0</span> <span class="o">|</span> <span class="mh">0x3c</span>                 <span class="o">-&gt;</span> <span class="mh">0xfc</span>
<span class="mh">0xf0</span> <span class="o">^</span> <span class="mh">0x3c</span>                 <span class="o">-&gt;</span> <span class="mh">0xcc</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_logicalcondition">3.3.20. Logical Condition</h4>
<div class="paragraph">
<p>Infix conditional operators <code>&amp;&amp;</code> and <code>||</code> apply the logical conditions AND and OR, respectively, to their left and right operands.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">1</span>             <span class="o">-&gt;</span> <span class="n">false</span>
<span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">1</span>             <span class="o">-&gt;</span> <span class="n">true</span>
<span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nf">store</span><span class="p">(</span> <span class="n">R1</span><span class="p">,</span> <span class="mi">777</span> <span class="p">)</span>  <span class="o">-&gt;</span> <span class="nf">false   </span><span class="p">(</span><span class="mi">777</span> <span class="n">still</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">R1</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Logical short circuiting is not applied. All parts of an expression are always evaluated regardless of whether or not they contribute to the overall result of the expression.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="syn_ternaryconditional">3.3.21. Ternary Conditional</h4>
<div class="paragraph">
<p>The infix <code>?:</code> operator selects the second or third operand depending on the value of the first operand.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="err">?</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span> <span class="p">:</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">6</span>                      <span class="o">-&gt;</span> <span class="mi">7</span>
<span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="err">?</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span> <span class="p">:</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">6</span>                      <span class="o">-&gt;</span> <span class="mi">11</span>
<span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="err">?</span> <span class="nf">store</span><span class="p">(</span> <span class="n">R1</span><span class="p">,</span> <span class="mi">33</span> <span class="p">)</span> <span class="p">:</span> <span class="nf">store</span><span class="p">(</span> <span class="n">R1</span><span class="p">,</span> <span class="mi">44</span> <span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">33</span>  <span class="p">(</span><span class="n">R1</span> <span class="n">contains</span> <span class="mi">44</span><span class="p">)</span>
<span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="err">?</span> <span class="nf">store</span><span class="p">(</span> <span class="n">R1</span><span class="p">,</span> <span class="mi">33</span> <span class="p">)</span> <span class="p">:</span> <span class="nf">store</span><span class="p">(</span> <span class="n">R1</span><span class="p">,</span> <span class="mi">44</span> <span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">44</span>  <span class="p">(</span><span class="n">R1</span> <span class="n">contains</span> <span class="mi">44</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Logical short circuiting is not applied. All operations are completely evaluated, left to right, regardless of condition.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="syn_define">3.3.22. Expression definition</h4>
<div class="paragraph">
<p>The assignment operator <code>:=</code> associates a <a href="#evaluatordefine">definition</a> with a name that can be referenced later to invoke the expression. Expressions are normally assigned to names using <code>pyvgx.Graph.Define()</code>. However, it is also possible to dynamically assign expressions to names during query execution and then reference those names in other parts of the same query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">func</span> <span class="p">:</span><span class="o">=</span> <span class="nb">next</span><span class="p">[</span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="p">.</span><span class="n">arc</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
<span class="n">quad</span> <span class="p">:</span><span class="o">=</span> <span class="nf">load</span><span class="p">(</span> <span class="n">R2</span> <span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="nf">load</span><span class="p">(</span> <span class="n">R1</span> <span class="p">)</span> <span class="o">+</span> <span class="n">vertex</span><span class="p">[</span><span class="sh">'</span><span class="s">offset</span><span class="sh">'</span><span class="p">]</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Each graph instance has its own expression name scope and expressions cannot be shared between separate graph instances. Assigning an expression to a name will overwrite any previous assignment to that name.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="syn_subexpr">3.3.23. Sub-expressions and Local Variables</h4>
<div class="paragraph">
<p>An expression may contain one or more independent sub-expressions separated by semicolons <code>;</code>. The last sub-expression determines the value of the overall expression. It is optional to terminate the last expression with a semicolon.</p>
</div>
<div class="paragraph">
<p>It is possible to assign the result of a sub-expression to a local variable. The scope of such a variable extends from the point of assignment until the end of the expression. Variable assignment uses the <code>=</code> operator, and must appear directly after the variable name at the start of a sub-expression. Variable names can be freely chosen so long as they conform to <a href="../limits.html#property_key">valid key</a> syntax and do not conflict with pre-defined names or functions like <code>pi</code>, <code>e</code>, <code>next</code>, <code>sqrt</code>, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="mi">1</span><span class="p">;</span> <span class="mi">5</span> <span class="o">+</span> <span class="nf">log</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="mf">2.5</span><span class="p">;</span>                          <span class="o">-&gt;</span> <span class="mf">2.5</span>
<span class="nf">store</span><span class="p">(</span><span class="n">R1</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span> <span class="mi">3</span> <span class="o">+</span> <span class="nf">load</span><span class="p">(</span> <span class="n">R1</span> <span class="p">);</span>                 <span class="o">-&gt;</span> <span class="mi">10</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">;</span> <span class="n">b</span> <span class="o">=</span> <span class="nf">rad</span><span class="p">(</span><span class="mi">360</span><span class="p">);</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="p">;</span>                <span class="o">-&gt;</span> <span class="mf">1.0</span>
<span class="n">pi</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>    <span class="o">==&gt;</span>    <span class="n">Syntax</span> <span class="n">Error</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">variable</span> <span class="n">assignment</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Variable scope is local to the current evaluation of the expression. Once the last sub-expression has completed and returned its result all variables go out of scope. Use <a href="#evaluatormemory">Evaluator Memory</a> for global scope and to transfer data between different expressions or repeated evaluations of the same expression.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="syn_label">3.3.24. Label</h4>
<div class="paragraph">
<p>The label operator <code>:</code> is exclusive to <a href="selectEvaluator.html#selectlabel">select statements</a>, allowing processing of rendered result values to take place and making those values identifiable by the label.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">val1</span><span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">.</span><span class="n">arc</span><span class="p">.</span><span class="n">value</span><span class="p">;</span> <span class="n">val2</span><span class="p">:</span> <span class="nb">next</span><span class="p">[</span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0xFFFF</span><span class="p">;</span> <span class="n">val3</span><span class="p">:</span> <span class="n">graph</span><span class="p">.</span><span class="n">ts</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This syntax is only available in <code>select=</code> and the expression cannot be pre-defined.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="syn_comma">3.3.25. Comma</h4>
<div class="paragraph">
<p>The comma <code>,</code> is used to separate multiple objects such as function arguments, set members, and group elements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="nf">max</span><span class="p">(</span> <span class="nb">next</span><span class="p">[</span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="p">],</span> <span class="n">vertex</span><span class="p">[</span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="p">]</span> <span class="p">)</span>
<span class="nb">next</span><span class="p">.</span><span class="nb">id</span> <span class="ow">in</span> <span class="p">{</span> <span class="sh">'</span><span class="s">Alice</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">*lie</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">B*</span><span class="sh">'</span> <span class="p">}</span>
<span class="p">(</span> <span class="p">.</span><span class="n">arc</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="nf">inc</span><span class="p">(</span> <span class="n">R1</span> <span class="p">)</span> <span class="p">)</span> <span class="o">*</span> <span class="nf">firstval</span><span class="p">(</span> <span class="nb">next</span><span class="p">[</span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="p">],</span> <span class="mf">1.0</span> <span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">next</span><span class="p">[</span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="p">]</span> <span class="o">*</span> <span class="n">pi</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">.</span><span class="n">arc</span><span class="p">.</span><span class="n">value</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="syn_semicolon">3.3.26. Semicolon</h4>
<div class="paragraph">
<p>The semicolon <code>;</code> is used to terminate sub-expressions within a larger expression, and to separate fields or labeled expressions in <code>select=</code> statements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="o">/*</span> <span class="n">Sub</span><span class="o">-</span><span class="n">Expression</span> <span class="o">*/</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">next</span><span class="p">[</span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="p">]</span> <span class="o">/</span> <span class="nb">next</span><span class="p">.</span><span class="n">degree</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="nf">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">x</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="n">z</span> <span class="o">=</span> <span class="nf">log2</span><span class="p">(</span> <span class="n">y</span> <span class="o">*</span> <span class="n">x</span> <span class="p">);</span>

<span class="o">/*</span> <span class="n">Select</span> <span class="n">Statement</span> <span class="o">*/</span>
<span class="p">.</span><span class="nb">id</span><span class="p">;</span> <span class="p">.</span><span class="n">arc</span><span class="p">.</span><span class="n">value</span><span class="p">;</span> <span class="n">SCORE</span><span class="p">:</span> <span class="nb">next</span><span class="p">[</span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="p">]</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">;</span> <span class="p">.</span><span class="n">degree</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluatorattrprop">3.4. Attributes and Properties</h3>
<div class="paragraph">
<p>Expressions may read information stored in arcs and vertices. Which arc or vertex is currently in scope for the evaluator depends on the query and how the graph is traversed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Attributes and properties refer to two different classes of information associated with an object in the graph. An <em>attribute</em> is a built-in piece of information such as the arc type, arc value, vertex type, vertex degree, etc. A <em>property</em> is a custom key/value pair assigned to a vertex.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="evaluatorneighborhoodnext">3.4.1. Neighborhood: <code>next*</code></h4>
<div class="paragraph">
<p>Attributes named <code>next*</code> refer to arcs ("Current Arc" column in <a href="#arcattributes">Arc Attributes</a>) that are traversed to reach the current anchor&#8217;s neighborhood, or to the contents of those neighbors ("Head" column in <a href="#vertexattributes">Vertex Attributes</a> and <a href="#vertexproperties">Vertex Properties</a>.)</p>
</div>
<div class="paragraph">
<p>When the attribute prefix is omitted it defaults to <code>next</code>. For example, <code>.arc.value</code> is equivalent to <code>next.arc.value</code> and <code>.id</code> is equivalent to <code>next.id</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>When used in <code>select=</code> the <code>next</code> prefix must be omitted</strong>, otherwise the field is interpreted as a vertex property.
 <br>
 <br>
  For example, <code>select=".arc.value; .id; next.degree"</code> would interpret <code>next.degree</code> as a property of that name (i.e. <code>next[ "next.degree" ]</code>.) This is because the simplified <code>select=</code> syntax allows a list of field names to be specified, where anything starting with a period <code>.</code> is an attribute and everything else is a property.
 <br>
 <br>
  Labeled items in the select list are not subject to this restriction. For example, <code>select=".arc.value; .id; DEG : next.degree"</code> would evaluate <code>next.degree</code> as the vertex degree attribute and identify its value with the label "DEG" in the result.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="evaluatorneighborhoodprev">3.4.2. Previous neighborhood: <code>prev*</code></h4>
<div class="paragraph">
<p>Attributes named <code>prev*</code> refer back to the arc ("Previous Arc" column in <a href="#arcattributes">Arc Attributes</a>) that was traversed to reach the current anchor, or to the contents of that arc&#8217;s initial vertex ("Previous Tail" column in <a href="#vertexattributes">Vertex Attributes</a> and <a href="#vertexproperties">Vertex Properties</a>.)</p>
</div>
</div>
<div class="sect3">
<h4 id="evaluatorcurrentvertex">3.4.3. Current anchor: <code>vertex*</code></h4>
<div class="paragraph">
<p>Attributes names <code>vertex*</code> reference the current anchor ("Tail" column in <a href="#vertexattributes">Vertex Attributes</a> and <a href="#vertexproperties">Vertex Properties</a>.)</p>
</div>
</div>
<div class="sect3">
<h4 id="_example">3.4.4. Example</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="nb">filter</span>      <span class="o">=</span> <span class="sh">"</span><span class="s">next.arc.type == </span><span class="sh">'</span><span class="s">knows</span><span class="sh">'</span><span class="s"> &amp;&amp; next[</span><span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="s">] &gt;= 21</span><span class="sh">"</span>
    <span class="n">neighbor</span>    <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>       <span class="p">:</span> <span class="n">D_OUT</span>
        <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>    <span class="p">:</span> <span class="sh">"</span><span class="s">prev.arc.value &lt; next.arc.value</span><span class="sh">"</span>
    <span class="p">}</span>
<span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This query asks for all neighbors that Alice has a "knows" relationship to, whose age is at least 21 and also have connections to other neighbors that are stronger than Alice&#8217;s connection to them. (I.e Alice&#8217;s adult friends with better friends.)</p>
</div>
<div class="paragraph">
<p>Here <code>"Alice"</code> is the current anchor, <code>next.arc.type</code> is the relationship type of the arc from Alice to her neighbors, <code>next['age']</code> is a property of Alice&#8217;s neighbors, <code>prev.arc.value</code> is the value of the arc from Alice to one of her neighbors, and <code>next.arc.value</code> is the value of the arc from one of her neighbors to their neighbors. Notice how in this example <code>next.arc.type</code> and <code>next.arc.value</code> reference different sets of arcs because they appear in two different expressions with different contexts.</p>
</div>
</div>
<div class="sect3">
<h4 id="arcattributes">3.4.5. Arc Attributes</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23.0769%;">
<col style="width: 23.0769%;">
<col style="width: 15.3846%;">
<col style="width: 38.4616%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Previous Arc</th>
<th class="tableblock halign-left valign-top">Current Arc</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.arc.type</code> <a id="_prevarctype"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.arc.type</code> <a id="_nextarctype"></a>
<br>
<code>.arc.type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relationship type enumeration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.arc.dir</code> <a id="_prevarcdir"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.arc.dir</code> <a id="_nextarcdir"></a>
<br>
<code>.arc.dir</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em> (<a href="../constants/arcDirectionConstants.html">D_*</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relationship direction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.arc.mod</code> <a id="_prevarcmod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.arc.mod</code> <a id="_nextarcmod"></a>
<br>
<code>.arc.mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em> (<a href="../constants/arcModifierConstants.html">M_*</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relationship value modifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.arc.value</code> <a id="_prevarcvalue"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.arc.value</code> <a id="_nextarcvalue"></a>
<br>
<code>.arc.value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em> or <em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relationship value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.arc.dist</code> <a id="_prevarcdist"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.arc.dist</code> <a id="_nextarcdist"></a>
<br>
<code>.arc.dist</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arc head&#8217;s distance from original query anchor vertex</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.arc.issyn</code> <a id="_prevarcissyn"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.arc.issyn</code> <a id="_nextarcissyn"></a>
<br>
 <code>.arc.issyn</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bool</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is <code>true</code> if arc is a synthetic arc or <code>false</code> if arc is explicit. Explicit arcs are normal graph arcs. Synthetic arcs are produced as temporary arguments to expressions evaluated outside of arc traversal context.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.arc.isfwd</code> <a id="_prevarcisfwd"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.arc.isfwd</code> <a id="_nextarcisfwd"></a>
<br>
 <code>.arc.isfwd</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bool</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is <code>true</code> if arc is a <a href="../constants/arcModifierConstants.html#M_FWDONLY">forward-only arc</a>, or <code>false</code> otherwise.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
References to <code>prev.arc*</code> have meaning only when evaluated in a context where a traversal has already taken place. All <code>prev.arc*</code> attributes will be zero otherwise.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Expressions involving arc type equality checks may specify integer enumerations or string literals as the comparison operand. String literals are implicitly encoded as relationship type enumerations in this context. E.g. <code>.arc.type == 'likes'</code> is equivalent to <code>.arc.type == relenc( 'likes' )</code>. Note, however, that implicit encoding applies to string literals only. If the string operand is the result of a vertex property lookup it must be explicitly encoded for the match to work. E.g. <code>.arc.type == vertex['relstr']</code> should instead be written as <code>.arc.type == relenc( vertex['relstr'] )</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Wildcards are not supported in relationship type string literals. E.g. <code>.arc.type == '*'</code> and <code>.arc.type == 'fr*'</code> are always false.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Alice&#8217;s close relationships</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="nb">filter</span>    <span class="o">=</span> <span class="sh">"</span><span class="s">.arc.type in { </span><span class="sh">'</span><span class="s">friend</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">knows</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">likes</span><span class="sh">'</span><span class="s"> }</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">neighbor</span>  <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>    <span class="p">:</span> <span class="n">D_IN</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span> <span class="p">:</span> <span class="sh">"</span><span class="s">prev.arc.type == </span><span class="sh">'</span><span class="s">friend</span><span class="sh">'</span><span class="s"> || prev.arc.value &gt; 100</span><span class="sh">"</span>
    <span class="p">}</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="vertexattributes">3.4.6. Vertex Attributes</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tail (vertex)</th>
<th class="tableblock halign-left valign-top">Head (next)</th>
<th class="tableblock halign-left valign-top">Previous(prev)</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex</code> <a id="_vertex"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next</code> <a id="_next"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev</code> <a id="_prev"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex object, interpreted as the vertex address (integer) when used in mathematical expressions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.id</code> <a id="_vertexid"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.id</code> <a id="_nextid"></a>
<br>
<code>.id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.id</code> <a id="_previd"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>vertexid</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.internalid</code> <a id="_vertexinternalid"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.internalid</code> <a id="_nextinternalid"></a>
<br>
<code>.internalid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.internalid</code> <a id="_previnternalid"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>vertex</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.type</code> <a id="_vertextype"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.type</code> <a id="_nexttype"></a>
<br>
<code>.type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.type</code> <a id="_prevtype"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex type enumeration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.deg</code> <a id="_vertexdeg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.deg</code> <a id="_nextdeg"></a>
<br>
<code>.deg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.deg</code> <a id="_prevdeg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex degree</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.ideg</code> <a id="_vertexideg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.ideg</code> <a id="_nextideg"></a>
<br>
<code>.ideg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.ideg</code> <a id="_prevideg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex indegree</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.odeg</code> <a id="_vertexodeg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.odeg</code> <a id="_nextodeg"></a>
<br>
<code>.odeg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.odeg</code> <a id="_prevodeg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex outdegree</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.vector</code> <a id="_vertexvector"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.vector</code> <a id="_nextvector"></a>
<br>
<code>.vector</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.vector</code> <a id="_prevvector"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../similarity/vector.html"><em>vector</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex similarity vector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.tmc</code> <a id="_vertextmc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.tmc</code> <a id="_nexttmc"></a>
<br>
<code>.tmc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.tmc</code> <a id="_prevtmc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex <a href="../vertex/vertexMembers.html#vertexTMC">creation time</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.tmm</code> <a id="_vertextmm"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.tmm</code> <a id="_nexttmm"></a>
<br>
<code>.tmm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.tmm</code> <a id="_prevtmm"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex <a href="../vertex/vertexMembers.html#vertexTMM">modification time</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.tmx</code> <a id="_vertextmx"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.tmx</code> <a id="_nexttmx"></a>
<br>
<code>.tmx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.tmx</code> <a id="_prevtmx"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex <a href="../vertex/vertexMembers.html#vertexTMX">expiration time</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.c1</code> <a id="_vertexc1"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.c1</code> <a id="_nextc1"></a>
<br>
<code>.c1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.c1</code> <a id="_prevc1"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex dynamic rank score <a href="../vertex/vertexRank.html#vertexgetrank">1<sup>st</sup> order coefficient</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.c0</code> <a id="_vertexc0"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.c0</code> <a id="_nextc0"></a>
<br>
<code>.c0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.c0</code> <a id="_prevc0"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex dynamic rank score <a href="../vertex/vertexRank.html#vertexgetrank">0<sup>th</sup> order coefficient</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.virtual</code> <a id="_vertexvirtual"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.virtual</code> <a id="_nextvirtual"></a>
<br>
<code>.virtual</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.virtual</code> <a id="_prevvirtual"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code> if vertex is virtual, <code>0</code> if vertex is real</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.locked</code> <a id="_vertexlocked"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.locked</code> <a id="_nextlocked"></a>
<br>
<code>.locked</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.locked</code> <a id="_prevlocked"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True when vertex is locked writable by another thread</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.address</code> <a id="_vertexaddress"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.address</code> <a id="_nextaddress"></a>
<br>
<code>.address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.address</code> <a id="_prevaddress"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex memory address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.index</code> <a id="_vertexindex"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.index</code> <a id="_nextindex"></a>
<br>
<code>.index</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.index</code> <a id="_previndex"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex object location index based on its memory address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.bitindex</code> <a id="_vertexbitindex"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.bitindex</code> <a id="_nextbitindex"></a>
<br>
<code>.bitindex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.bitindex</code> <a id="_prevbitindex"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex bitvector quadword offset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.bitvector</code> <a id="_vertexbitvector"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.bitvector</code> <a id="_nextbitvector"></a>
<br>
<code>.bitvector</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.bitvector</code> <a id="_prevbitvector"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bitvector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex bitvector quadword</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.op</code> <a id="_vertexop"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.op</code> <a id="_nextop"></a>
<br>
<code>.op</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.op</code> <a id="_prevop"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operation id of the last modifying graph operation for this vertex.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.refc</code> <a id="_vertexrefc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.refc</code> <a id="_nextrefc"></a>
<br>
<code>.refc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.refc</code> <a id="_prevrefc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex object reference count</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.bidx</code> <a id="_vertexbidx"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.bidx</code> <a id="_nextbidx"></a>
<br>
<code>.bidx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.bidx</code> <a id="_prevbidx"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex object allocator block index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.oidx</code> <a id="_vertexoidx"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.oidx</code> <a id="_nextoidx"></a>
<br>
<code>.oidx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.oidx</code> <a id="_prevoidx"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex object allocator block offset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.handle</code> <a id="_vertexhandle"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.handle</code> <a id="_nexthandle"></a>
<br>
<code>.handle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.handle</code> <a id="_prevhandle"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric vertex identifier (process independent) with 42 significant bits, in the range 2199023255552 - 3298534883327.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.enum</code> <a id="_vertexenum"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.enum</code> <a id="_nextenum"></a>
<br>
<code>.enum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.enum</code> <a id="_prevenum"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric vertex identifier (process independent) with 31 significant bits, in the range 0 - 2147483647. (May evaluate to -1 in large graphs, if so use .handle)</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
References to <code>prev*</code> have meaning only when evaluated in a context where a traversal has already taken place. All <code>prev*</code> attributes are undefined otherwise.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Alice&#8217;s well-connected friends with first initial "B"</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">arc</span>       <span class="o">=</span> <span class="p">(</span><span class="sh">"</span><span class="s">friend</span><span class="sh">"</span><span class="p">,</span> <span class="n">D_OUT</span><span class="p">),</span>
    <span class="nb">filter</span>    <span class="o">=</span> <span class="sh">"</span><span class="s">next.deg &gt; 100 || next.ideg &gt; 70</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">neighbor</span>  <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>   <span class="p">:</span> <span class="sh">"</span><span class="s">vertex.id == </span><span class="sh">'</span><span class="s">B*</span><span class="sh">'"</span>
    <span class="p">}</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="vertexproperties">3.4.7. Vertex Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tail (vertex)</th>
<th class="tableblock halign-left valign-top">Head (next)</th>
<th class="tableblock halign-left valign-top">Previous (prev)</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.propcount</code> <a id="_vertexpropcount"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.propcount</code> <a id="_nextpropcount"></a>
<br>
 <code>.propcount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.propcount</code> <a id="_prevpropcount"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of vertex properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex[ <em>key</em> ]</code> <a id="_vertexkey"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next[ <em>key</em> ]</code> <a id="_nextkey"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev[ <em>key</em> ]</code> <a id="_prevkey"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value of vertex property <em>key</em> if it exists. The default value is 0 when property lookup
occurs within arithmetic expressions. The default value is <code>nan</code> in all other contexts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.property( key[, default[, condition]] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.property( key[, default[, condition]] )</code>
<br>
 <code>.property( key[, default[, condition]] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.property( key[, default[, condition]] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as subscript syntax when only <em>key</em> is given. If specified, <em>default</em> value is produced when property does not exist. If <em>condition</em> is also specified the lookup takes place only if condition is true, otherwise <em>default</em> is produced.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Accessing <code>prev[ <em>key</em> ]</code> or <code>prev.property( <em>key</em>, &#8230;&#8203; )</code> has meaning only when evaluated in a context where a traversal has already taken place. The lookup will always return <code>nan</code> otherwise.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Alice&#8217;s well-connected friends who are 20 - 29 years old</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">arc</span>       <span class="o">=</span> <span class="p">(</span><span class="sh">"</span><span class="s">friend</span><span class="sh">"</span><span class="p">,</span> <span class="n">D_OUT</span><span class="p">),</span>
    <span class="nb">filter</span>    <span class="o">=</span> <span class="sh">"</span><span class="s">next.deg &gt; 100 || next.ideg &gt; 70</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">neighbor</span>  <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>   <span class="p">:</span> <span class="sh">"</span><span class="s">vertex[</span><span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="s">] in range( 20, 30 )</span><span class="sh">"</span>
    <span class="p">}</span>
<span class="p">)</span></code></pre>
</div>
</div>
<div id="filtercaution" class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Be careful when writing filters that involve access to head vertex attributes or properties. There is a significant performance penalty when dereferencing a vertex object, especially when traversing large neighborhoods. Even if your filter includes a condition on the arc designed to reduce the number of candidates the <a href="#noshortcircuiting">entire expression is still evaluated</a> leading to unnecessary overhead.
 <br>
 <br>
  The problem is easily avoided by splitting the expression into separate filters and using the <code>arc=(&#8230;&#8203;)</code> and <code>neighbor={&#8230;&#8203;}</code> parameters, ensuring that expensive operations are only executed after passing less expensive filters. As a rule, avoid mixing quick conditions with expensive conditions within the same filter. Arc conditions and current vertex attribute conditions are quick. Head vertex conditions are expensive, especially when property lookup is involved.
 <br>
 <br>
  As in the example above, the arc condition is placed in the <code>arc=</code> parameter and therefore evaluated first, avoiding premature execution of <code>next.deg &gt; 100 || next.ideg &gt; 70</code>. Furthermore, the property condition <code>vertex['age'] in range( 20, 30 )</code> is deferred until the very last by placing it in a separate filter within <code>neighbor={&#8230;&#8203;}</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Since vertex properties are costly to store and reference, in some cases you may consider using the general purpose <a href="../vertex/vertexMembers.html#vertexrankc0">c0 and c1</a> numeric attributes. Although primarily intended for use with certain <a href="#simplerankingfunctions">dynamic ranking</a> functions, you are free to "abuse" them as light-weight numeric (single precision float) properties.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluator_synthetic_arcs">3.5. Synthetic Arcs</h3>
<div class="paragraph">
<p>Synthetic arcs are virtual arcs generated by evaluator expressions to enable filtering, collection and traversal based on more than one arc value.</p>
</div>
<div class="sect3">
<h4 id="synthetic_arcs__background">3.5.1. Background and Default Behavior</h4>
<div class="paragraph">
<p>Two vertices <em>A</em> and <em>B</em> may be connected with one or more arcs <em>AB</em> = { <em>ab<sub>1</sub></em>, <em>ab<sub>2</sub></em>, &#8230;&#8203; }. When <em>AB</em> contains a single component arc <em>ab<sub>1</sub></em> (or just <em>ab</em>) we call <em>AB</em> a simple arc. When <em>AB</em> contains two or more component arcs we call <em>AB</em> a multiple arc.</p>
</div>
<div class="paragraph">
<p>When traversing arc <em>AB</em> each component arc <em>ab<sub>i</sub></em> is processed separately without regard to any other component arc in <em>AB</em>. If a second level of traversal of <em>B</em>'s neighborhood is performed then <em>B</em>'s neighborhood will be traversed repeatedly each time <em>B</em> is visited as a result of traversing a component arc in <em>AB</em>.</p>
</div>
<div class="paragraph">
<p>For example, if <em>A</em> is connected to <em>B</em> with multiple arc <em>AB</em> = { <em>ab<sub>1</sub></em>, <em>ab<sub>2</sub></em>, <em>ab<sub>3</sub></em> } and <em>B</em> is connected to <em>C</em> with multiple arc <em>BC</em> = { <em>bc<sub>1</sub></em>, <em>bc<sub>2</sub></em>, <em>bc<sub>3</sub></em> } then there are 3 paths from <em>A</em> to <em>B</em> and 3*3=9 paths from <em>A</em> to <em>C</em>. The default query behavior is to exhaustively traverse all unique paths.</p>
</div>
<div class="listingblock">
<div class="title">This query returns <em>ab<sub>1</sub></em>, <em>ab<sub>2</sub></em>, <em>ab<sub>3</sub></em> plus all nine combinations of (<em>ab<sub>i</sub></em>, <em>bc<sub>j</sub></em>) for a total of 12 arcs/paths.</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="nb">id</span>        <span class="o">=</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">fields</span>    <span class="o">=</span> <span class="n">F_AARC</span><span class="p">,</span>
    <span class="n">collect</span>   <span class="o">=</span> <span class="n">C_COLLECT</span><span class="p">,</span>
    <span class="n">neighbors</span> <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>    <span class="p">:</span> <span class="n">D_OUT</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">collect</span><span class="sh">'</span><span class="p">:</span> <span class="n">C_COLLECT</span>
    <span class="p">}</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span> <span class="n">of</span> <span class="mi">12</span> <span class="n">entries</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="synthetic_arcs__arc_collapsing">3.5.2. Arc Collapsing with Synthetic Arc Operators</h4>
<div class="paragraph">
<p><em>Synthetic arcs</em> are helpful when the default behavior is not desired. A synthetic arc <em>ab<sub>syn</sub></em> is a simple arc substitute for arc <em>AB</em> (simple or multiple) between two vertices <em>A</em> and <em>B</em>.</p>
</div>
<div class="paragraph">
<p>Synthetic arcs are not stored in the graph. They are temporary virtual relationships created by the expression evaluator for the purpose of filtering, traversal and collection.</p>
</div>
<div class="sect4">
<h5 id="synthetic_arcs__value_capture">3.5.2.1. Value Capture and Synthetic Arc Evaluation</h5>
<div class="paragraph">
<p>A filter expression containing one or more <a href="#synthetic_arcs__operators">Synthetic Arc Operators</a> triggers synthetic arc mode for the expression evaluator. In synthetic arc mode <em>one additional evaluation</em> occurs after all component arcs <em>ab<sub>i</sub></em> in <em>AB</em> have been processed. The additional evaluation at the end is performed for synthetic arc <em>ab<sub>syn</sub></em>.</p>
</div>
<div class="paragraph">
<p>When evaluating component arcs <em>ab<sub>i</sub></em> all synthetic arc operators (except '*.arc.issyn') capture arc information into temporary registers and return <code>null</code>. When evaluating synthetic arc <em>ab<sub>syn</sub></em> the synthetic arc operators return the previously captured values. Most expressions involving <code>null</code> operands are no-ops, making it possible to write the expression as if <em>AB</em> were a dictionary with simultaneous access to all of its component arcs <em>ab<sub>i</sub></em>.</p>
</div>
<div class="paragraph">
<p>See <a href="#synthetic_arcs__example_1">Example 1: Conditional Collection of Composite Value</a> for a detailed description of how information is captured and used.</p>
</div>
</div>
<div class="sect4">
<h5 id="synthetic_arcs__arc_attributes">3.5.2.2. Synthetic Arc Attributes</h5>
<div class="paragraph">
<p>Synthetic arcs have the special reserved relationship name <code>"__synthetic__"</code> and they have no value and no modifier unless a value is assigned with <code>collect()</code> or <code>collectif()</code>. When a value is assigned the modifier is automatically set to <code>M_INT</code> or <code>M_FLT</code> depending on the value type.</p>
</div>
</div>
<div class="sect4">
<h5 id="synthetic_arcs__operators">3.5.2.3. Synthetic Arc Operators</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Synthetic Arc Operators</caption>
<colgroup>
<col style="width: 41.1764%;">
<col style="width: 11.7647%;">
<col style="width: 23.5294%;">
<col style="width: 23.5295%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top"><em>ab<sub>i</sub></em> Capture Phase</th>
<th class="tableblock halign-left valign-top">Synthetic Arc <em>ab<sub>syn</sub></em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.arc.issyn</code>
<br>
 <code>next.arc.issyn</code>
<br>
 <code>prev.arc.issyn</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true or false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluate to <strong>false</strong> when processing component arcs <em>ab<sub>i</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluate to <strong>true</strong> when processing synthetic arc <em>ab<sub>syn</sub></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>synarc.value( <em>rel</em>, <em>mod</em> )</code> <a id="_synarcvalue"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>null</em>, <em>real</em>, or <em>integer</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capture the value of component arc <em>ab<sub>i</sub></em> matching relationship <em>rel</em> and modifier <em>mod</em>. The captured value is stored in a hidden temporary register. Return <code>null</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the value of component arc <em>ab<sub>i</sub></em> matching relationship <em>rel</em> and modifier <em>mod</em>. If no match was found <code>null</code> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>synarc.hasrel( <em>r<sub>n-1</sub></em>, &#8230;&#8203;, <em>r<sub>i</sub></em>, &#8230;&#8203;, <em>r<sub>0</sub></em> )</code> <a id="_synarchasrel"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>null</em> or <em>bitvector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set bit <em>i</em> in temporary hidden bitvector <em>V</em> to 1 if relationship <em>r<sub>i</sub></em> exists in arc <em>AB</em>. Maximum <em>n</em> is 64. Leftmost arguments <em>n</em> and higher are ignored if <em>n</em> &gt; 64.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return bitvector <em>V</em>. Bits are set to 1 in positions corresponding to relationships in the argument list that exist in arc <em>AB</em>. All other bits are 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>synarc.hasmod( <em>m<sub>n-1</sub></em>, &#8230;&#8203;, <em>m<sub>i</sub></em>, &#8230;&#8203;, <em>m<sub>0</sub></em> )</code> <a id="_synarchasmod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>null</em> or <em>bitvector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set bit <em>i</em> in temporary hidden bitvector <em>V</em> to 1 if modifier <em>m<sub>i</sub></em> exists in arc <em>AB</em>. Maximum <em>n</em> is 64. Leftmost arguments <em>n</em> and higher are ignored if <em>n</em> &gt; 64.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return bitvector <em>V</em>. Bits are set to 1 in positions corresponding to modifiers in the argument list that exist in arc <em>AB</em>. All other bits are 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>synarc.hasrelmod( <em>r<sub>n-1</sub></em>, <em>m<sub>n-1</sub></em>, &#8230;&#8203;, <em>r<sub>0</sub></em>, <em>m<sub>0</sub></em> )</code> <a id="_synarchasrelmod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>null</em> or <em>bitvector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set bit <em>i</em> in temporary hidden bitvector <em>V</em> to 1 if a component arc in <em>AB</em> with relationship <em>r<sub>i</sub></em> <strong><em>and</em></strong> modifier <em>m<sub>i</sub></em> exists. Maximum <em>n</em> is 64. Leftmost arguments <em>n</em> and higher are ignored if <em>n</em> &gt; 64. An even number of arguments is required.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return bitvector <em>V</em>. Bits are set to 1 in positions corresponding to relationship/modifier pairs in the argument list that match a component arc in <em>AB</em>. All other bits are 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>synarc.decay( <em>rel</em>[, <em>rate</em>] )</code> [[<em>synarcdecay]]
<br>
 <code>synarc.xdecay( _rel</em>[, <em>rate</em>] )</code> <a id="_synarcxdecay"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>null</em> or <em>real</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collect relevant values and time information from components arcs <em>ab<sub>i</sub></em> with relationship <em>rel</em>. Return <code>null</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a <em>real</em> value representing a decayed version of relationship <em>rel</em>'s initial value. See <a href="#evaluator_synarc_decay"><em>synarc.decay</em>() and <em>synarc.xdecay</em>()</a> for a detailed description.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_synthetic_arcs_examples">3.5.3. Synthetic Arcs Examples</h4>
<div class="sect4">
<h5 id="synthetic_arcs__example_1">3.5.3.1. Example 1: Conditional Collection of Composite Value</h5>
<div class="paragraph">
<p>Consider vertex <em>A</em> connected to two terminals <em>X</em> and <em>Y</em> with arcs <em>AX</em> = { ('count', M_CNT, 25), ('weight', M_FLT, 4.0 ) }, and <em>AY</em> = { ('count', M_CNT, 20), ('weight', M_FLT, 2.0) }. A filter expression can be written to conditionally collect synthetic arcs rather than individual component arcs.</p>
</div>
<div class="listingblock">
<div class="title">Conditionally collect synthetic arc based on composite value</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="nb">id</span>        <span class="o">=</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">fields</span>    <span class="o">=</span> <span class="n">F_AARC</span><span class="p">,</span>
    <span class="n">collect</span>   <span class="o">=</span> <span class="n">C_SCAN</span><span class="p">,</span>
    <span class="nb">filter</span>    <span class="o">=</span> <span class="sh">"""</span><span class="s">
                c = synarc.value(</span><span class="sh">'</span><span class="s">count</span><span class="sh">'</span><span class="s">,M_CNT);
                w = synarc.value(</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="s">,M_FLT);
                score = c * w;
                collectif( score &lt; 50.0, score );
                </span><span class="sh">"""</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="sh">'</span><span class="s">( A )-[ __synthetic__ &lt;M_FLT&gt; 40.000 ]-&gt;( Y )</span><span class="sh">'</span><span class="p">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The filter expression is evaluated three times for (multiple) arcs <em>AX</em> and <em>AY</em>. First consider the processing of <em>AX</em>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">First filter iteration for <em>AX</em></dt>
<dd>
<p>The neighborhood query visits component arc <em>ax<sub>1</sub></em> = ('count', M_CNT, 25). The sub-expression <code>c = synarc.value('count',M_CNT);</code> has a match on <em>ax<sub>1</sub></em> and captures the value 25 into an internal register. The value <code>null</code> is returned and assigned to <code>c</code>. The sub-expression <code>w = synarc.value('weight',M_FLT);</code> does not match <em>ax<sub>1</sub></em> and is a no-op. The value <code>null</code> is returned and assigned to <code>w</code>. The sub-expression <code>score = c * w;</code> assigns <code>null</code> to <code>score</code> since both factors are <code>null</code>. The sub-expression <code>collectif( score &lt; 50.0, score );</code> is a no-op because <code>score &lt; 50.0</code> is false when <code>score</code> is <code>null</code>. (Comparisons involving <code>null</code> are always false, except when testing equality between two <code>null</code> values.)</p>
</dd>
<dt class="hdlist1">Second filter iteration for <em>AX</em></dt>
<dd>
<p>The neighborhood query visits component arc <em>ax<sub>2</sub></em> = ('weight', M_FLT, 4.0). Evaluation is the same as for <em>ax<sub>1</sub></em> as above, except sub-expression <code>w = synarc.value('weight',M_FLT);</code> now matches <em>ax<sub>2</sub></em> and captures the value 4.0 into another internal register.</p>
</dd>
<dt class="hdlist1">Third filter iteration for <em>AX</em></dt>
<dd>
<p>The neighborhood query now invokes the evaluator one final time for synthetic arc <em>ax<sub>syn</sub></em> = ('__synthetic__', M_NONE, 0). The sub-expression <code>c = synarc.value('count',M_CNT);</code> assigns 25 to <code>c</code> as this value is retrieved from the internal register that previously captured this value from <em>ax<sub>1</sub></em>. The sub-expression <code>w = synarc.value('weight',M_FLT);</code> assigned 4.0 to <code>w</code> as this value is retrieved from the internal register that previously captured this value from <em>ax<sub>2</sub></em>. The sub-expression <code>score = c * w;</code> multiplies the two values and assigns 100.0 to <code>score</code>; The sub-expression <code>collectif( score &lt; 50.0, score );</code> is a no-op since the condition is not met. The arc <em>AX</em> did not match and is not collected.</p>
</dd>
<dt class="hdlist1">First filter iteration for <em>AY</em></dt>
<dd>
<p>Component arc <em>ay<sub>1</sub></em> = ('count', M_CNT, 20) matches and the value 20 is captured, in the same manner as described above for <em>ax<sub>1</sub></em>.</p>
</dd>
<dt class="hdlist1">Second filter iteration for <em>AY</em></dt>
<dd>
<p>Component arc <em>ay<sub>2</sub></em> = ('weight', M_FLT, 2.0) matches and the value 2.0 is captured, in the same manner as described above for <em>ax<sub>2</sub></em>.</p>
</dd>
<dt class="hdlist1">Third filter iteration for <em>AY</em></dt>
<dd>
<p>Synthetic arc <em>ay<sub>syn</sub></em> = ('__synthetic__', M_NONE, 0) is processed, assigning <code>c = 20</code> and <code>w = 2.0</code> in the same manner as described above for <em>ax<sub>syn</sub></em>. In this case <code>score = 40.0</code> and <code>collectif( score &lt; 50.0, score );</code> therefore collects the synthetic arc <em>ay<sub>syn</sub></em> with a value 40.0 provided by the second argument to <code>collectif()</code>. We have now built and collected a single composite arc ('__synthetic__', M_FLT, 40.0) based on components of <em>AY</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="synthetic_arcs__example_2">3.5.3.2. Example 2: Avoiding Exhaustive Path Traversal using Arc Collapsing</h5>
<div class="paragraph">
<p>Consider a graph connecting a root vertex to many neighbors with wide multiple arcs, which in turn are connected to many neighbors with wide multiple arcs. This graph has a very large number of unique paths from the root to each vertex in the 2<sup>nd</sup> level neighborhood.</p>
</div>
<div class="paragraph">
<p>Formally, such a graph can be described as follows. Root vertex <em>A</em> has <em>n</em> terminals <strong>B</strong> = { <em>B<sub>1</sub></em>, &#8230;&#8203; <em>B<sub>n</sub></em> }, where each <em>B<sub>i</sub></em> has <em>m</em> terminals <strong>C<sub>i</sub></strong> = { <em>C<sub>i,1</sub></em>, &#8230;&#8203;, <em>C<sub>i,m</sub></em> }. <em>A</em> connects to each <em>B<sub>i</sub></em> with <em>k</em>-multiple arc <em>AB<sub>i</sub></em> = { <em>ab<sub>i,1</sub></em>, &#8230;&#8203;, <em>ab<sub>i,k</sub></em> } and <em>B<sub>i</sub></em> connects to each <em>C<sub>i,j</sub></em> with <em>q</em>-multiple arc <em>BC<sub>i,j</sub></em> = { <em>bc<sub>i,j,1</sub></em>, &#8230;&#8203;, <em>bc<sub>i,j,q</sub></em>}.</p>
</div>
<div class="listingblock">
<div class="title">Build graph connecting <em>A</em> via <strong>B</strong> to <strong>C</strong> with wide multiple arcs</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="k">def</span> <span class="nf">build</span><span class="p">(</span> <span class="n">n</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mi">10</span> <span class="p">):</span>
    <span class="n">g</span> <span class="o">=</span> <span class="nc">Graph</span><span class="p">(</span> <span class="sh">"</span><span class="s">levels</span><span class="sh">"</span> <span class="p">)</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span> <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span> <span class="p">):</span>
        <span class="n">Bi</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">B_%d</span><span class="sh">"</span> <span class="o">%</span> <span class="n">i</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">ab</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="o">+</span><span class="mi">1</span> <span class="p">):</span>
            <span class="n">g</span><span class="p">.</span><span class="nc">Connect</span><span class="p">(</span> <span class="n">A</span><span class="p">,</span> <span class="p">(</span><span class="sh">"</span><span class="s">r%d</span><span class="sh">"</span><span class="o">%</span><span class="n">ab</span><span class="p">,</span> <span class="n">M_FLT</span><span class="p">,</span> <span class="n">i</span><span class="o">*</span><span class="n">ab</span><span class="p">),</span> <span class="n">Bi</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="n">m</span><span class="o">+</span><span class="mi">1</span> <span class="p">):</span>
            <span class="n">Cij</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">C_%d_%d</span><span class="sh">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">bc</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="n">q</span><span class="o">+</span><span class="mi">1</span> <span class="p">):</span>
                <span class="n">g</span><span class="p">.</span><span class="nc">Connect</span><span class="p">(</span> <span class="n">Bi</span><span class="p">,</span> <span class="p">(</span><span class="sh">"</span><span class="s">r%d</span><span class="sh">"</span><span class="o">%</span><span class="n">bc</span><span class="p">,</span> <span class="n">M_FLT</span><span class="p">,</span> <span class="n">i</span><span class="o">*</span><span class="n">ab</span><span class="o">*</span><span class="n">j</span><span class="o">*</span><span class="n">bc</span><span class="p">),</span> <span class="n">Cij</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">g</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If <em>n</em> = <em>m</em> = 1000 and <em>k</em> = <em>q</em> = 100, then <em>A</em> has 1000 terminals <em>B<sub>1</sub></em> through <em>B<sub>1000</sub></em> (each connected via a <em>100</em>-multiple arc) and each <em>B<sub>i</sub></em> has 1000 terminals <em>C<sub>i,1</sub></em> through <em>C<sub>i,1000</sub></em> (each connected via a <em>100</em>-multiple arc.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span> <span class="o">=</span> <span class="nf">build</span><span class="p">(</span> <span class="n">n</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="mi">100</span> <span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following query collects all paths from <em>A</em> to all <strong>C</strong>, yielding a large result set with <em>n</em> * <em>k</em> * <em>m</em> * <em>q</em> = 10,000,000,000 arcs.</p>
</div>
<div class="listingblock">
<div class="title">Exhaustive path traversal from <em>A</em> to <strong>C</strong></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="nb">id</span>        <span class="o">=</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">fields</span>    <span class="o">=</span> <span class="n">F_AARC</span><span class="p">,</span>
    <span class="n">collect</span>   <span class="o">=</span> <span class="n">C_SCAN</span><span class="p">,</span>
    <span class="n">neighbor</span>  <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">traverse</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>    <span class="p">:</span> <span class="n">D_OUT</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">collect</span><span class="sh">'</span><span class="p">:</span> <span class="n">C_COLLECT</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">n</span><span class="o">*</span><span class="n">k</span><span class="o">*</span><span class="n">m</span><span class="o">*</span><span class="n">q</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span> <span class="n">arcs</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use synthetic arcs to avoid exhaustive path traversal. By adding filter conditions that check for <code>.arc.issyn == true</code> we can restrict traversal and collection to synthetic arcs:</p>
</div>
<div class="listingblock">
<div class="title">Collapsed path traversal from <em>A</em> to <strong>C</strong></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="nb">id</span>        <span class="o">=</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">fields</span>    <span class="o">=</span> <span class="n">F_AARC</span><span class="p">,</span>
    <span class="n">collect</span>   <span class="o">=</span> <span class="n">C_SCAN</span><span class="p">,</span>
    <span class="nb">filter</span>    <span class="o">=</span> <span class="sh">"</span><span class="s">.arc.issyn</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">neighbor</span>  <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">traverse</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>    <span class="p">:</span> <span class="n">D_OUT</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">collect</span><span class="sh">'</span><span class="p">:</span> <span class="n">C_COLLECT</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span> <span class="p">:</span> <span class="sh">"</span><span class="s">.arc.issyn</span><span class="sh">"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">n</span><span class="o">*</span><span class="n">m</span> <span class="n">arcs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span> <span class="n">arcs</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We can also use a combination of synthetic arcs and value aggregation to collect collapsed arcs with computed values. The query below uses memory registers to accumulate values.  Register <code>R1</code> accumulates the sum of values of arcs { <em>ab<sub>i,1</sub></em>, &#8230;&#8203;, <em>ab<sub>i,k</sub></em> }.  Register <code>R2</code> accumulates the sum of values of arcs { <em>bc<sub>i,j,1</sub></em>, &#8230;&#8203;, <em>bc<sub>i,j,q</sub></em> }.</p>
</div>
<div class="listingblock">
<div class="title">Fancy collapsed path traversal from <em>A</em> to <strong>C</strong></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="nb">id</span>         <span class="o">=</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">sortby</span>     <span class="o">=</span> <span class="n">S_VAL</span><span class="p">,</span>
    <span class="n">fields</span>     <span class="o">=</span> <span class="n">F_AARC</span><span class="p">,</span>
    <span class="n">collect</span>    <span class="o">=</span> <span class="n">C_SCAN</span><span class="p">,</span>
    <span class="n">pre</span>        <span class="o">=</span> <span class="sh">"""</span><span class="s">
                 /* Init AB and BC value accumulators */
                 do( store(R1,0),store(R2,0) )
                 </span><span class="sh">"""</span><span class="p">,</span>
    <span class="nb">filter</span>     <span class="o">=</span> <span class="sh">"""</span><span class="s">
                 // Accumulate AB_i
                 add(R1,.arc.value);
                 // Traverse to B for synthetic arc only
                 .arc.issyn
                 </span><span class="sh">"""</span><span class="p">,</span>
    <span class="n">neighbor</span>   <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">traverse</span><span class="sh">'</span> <span class="p">:</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>     <span class="p">:</span> <span class="n">D_OUT</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">collect</span><span class="sh">'</span> <span class="p">:</span> <span class="n">C_SCAN</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>  <span class="p">:</span> <span class="sh">"""</span><span class="s">
                        // Accumulate BC_ij and continue
                        add(R2,.arc.value);
                        returnif(!.arc.issyn,0);
                        // Synthetic arc with computed value
                        score = load(R1) + load(R2);
                        collect(score);
                        // Reset BC_ij accumulator
                        do(store(R2,0));
                        </span><span class="sh">"""</span>
        <span class="p">},</span>
        <span class="sh">'</span><span class="s">post</span><span class="sh">'</span>     <span class="p">:</span> <span class="sh">"""</span><span class="s">
                     // Reset AB_i accumulator
                     do(store(R1,0))
                     </span><span class="sh">"""</span>
    <span class="p">}</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluatorconstants">3.6. Constants</h3>
<div class="paragraph">
<p>Many numeric constants are available for use in expressions. These are summarized below.</p>
</div>
<div class="sect3">
<h4 id="_null">3.6.1. Null</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15.3846%;">
<col style="width: 15.3846%;">
<col style="width: 23.0769%;">
<col style="width: 46.1539%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> <a id="_null"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>null</em></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No value</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Non-existent vertex attributes</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">CreateVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">V</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">vertex[</span><span class="sh">'</span><span class="s">prop1</span><span class="sh">'</span><span class="s">] == null</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">V</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_boolean">3.6.2. Boolean</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15.3846%;">
<col style="width: 15.3846%;">
<col style="width: 23.0769%;">
<col style="width: 46.1539%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code> <a id="_true"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean True</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code> <a id="_false"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean False</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Boolean values are integers</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">true == 1 &amp;&amp; false == 0</span><span class="sh">"</span> <span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">1</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_timestamp_limits">3.6.3. Timestamp Limits</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15.3846%;">
<col style="width: 15.3846%;">
<col style="width: 23.0769%;">
<col style="width: 46.1539%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T_NEVER</code> <a id="_t_never"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/timestampConstants.html#T_NEVER">4102444800</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Never</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T_MAX</code> <a id="_t_max"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/timestampConstants.html#T_MAX">4102444799</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thu Dec 31 23:59:59 2099</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T_MIN</code> <a id="_t_min"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/timestampConstants.html#T_MIN">1</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thu Jan 01 00:00:01 1970</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Alice&#8217;s connections that will expire at some point</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="nb">filter</span> <span class="o">=</span> <span class="sh">"</span><span class="s">.arc.mod == M_TMX &amp;&amp; .arc.value &lt; T_NEVER</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_arc_direction">3.6.4. Arc Direction</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15.3846%;">
<col style="width: 15.3846%;">
<col style="width: 23.0769%;">
<col style="width: 46.1539%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>D_ANY</code> <a id="_d_any"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcDirectionConstants.html#D_ANY">0</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any arc direction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>D_IN</code> <a id="_d_in"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcDirectionConstants.html#D_IN">1</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inbound arc direction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>D_OUT</code> <a id="_d_out"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcDirectionConstants.html#D_OUT">2</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outbound arc direction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>D_BOTH</code> <a id="_d_both"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcDirectionConstants.html#D_BOTH">3</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bi-directional arc</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Sort by arc value, boosting inbound arcs by 1000 extra points</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">arc</span>    <span class="o">=</span> <span class="n">D_ANY</span><span class="p">,</span>
    <span class="n">rank</span>   <span class="o">=</span> <span class="sh">"</span><span class="s">1000 * (.arc.dir == D_IN) + .arc.value</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">sortby</span> <span class="o">=</span> <span class="n">S_RANK</span><span class="p">,</span>
    <span class="n">select</span> <span class="o">=</span> <span class="sh">"</span><span class="s">.arc.dir; .rank</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The <code>.arc.dir</code> attribute is "observational" only and cannot be used to control traversal direction. Traversal direction is controlled by the <code>arc=</code> parameter and <code>.arc.dir</code> reflects the current direction. This implies that <code>.arc.dir</code> will never equal <code>D_ANY</code>. Furthermore, in <code>filter=</code> expressions <code>.arc.dir</code> will either be <code>D_IN</code> or <code>D_OUT</code>, never <code>D_BOTH</code>. However, in <code>rank=</code> and <code>select=</code> expressions <code>.arc.dir</code> may equal <code>D_BOTH</code> if a bi-directional relationship was collected. This subtle point warrants another example:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Sort bi-directional arcs before other arcs</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">X</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">rank</span>     <span class="o">=</span> <span class="sh">"</span><span class="s">.arc.dir == D_BOTH</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">sortby</span>   <span class="o">=</span> <span class="n">S_RANK</span><span class="p">,</span>
    <span class="n">neighbor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">collect</span><span class="sh">'</span>  <span class="p">:</span> <span class="n">C_COLLECT</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>      <span class="p">:</span> <span class="n">D_BOTH</span>
    <span class="p">},</span>
    <span class="n">select</span>   <span class="o">=</span> <span class="sh">"</span><span class="s">.arc.dir</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_arc_modifiers">3.6.5. Arc Modifiers</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15.3846%;">
<col style="width: 15.3846%;">
<col style="width: 23.0769%;">
<col style="width: 46.1539%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_ANY</code> <a id="_m_any"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_ANY">0</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No modifier / wildcard</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_STAT</code> <a id="_m_stat"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_STAT">1</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Static relationship (no value)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_SIM</code> <a id="_m_sim"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_SIM">18</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similarity relationship, explicit score</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_DIST</code> <a id="_m_dist"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_DIST">19</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generic distance relationship value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_LSH</code> <a id="_m_lsh"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_LSH">4</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LSH bit pattern subject to hamming distance filter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_INT</code> <a id="_m_int"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_INT">5</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">General purpose integer relationship value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_UINT</code> <a id="_m_uint"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_UINT">6</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">General purpose unsigned integer relationship value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_FLT</code> <a id="_m_flt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_FLT">23</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">General purpose floating point relationship value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_CNT</code> <a id="_m_cnt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_CNT">8</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatic counter relationship value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_ACC</code> <a id="_m_acc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_ACC">25</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automatic accumulator relationship value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_TMC</code> <a id="_m_tmc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_TMC">12</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arc creation time relationship value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_TMM</code> <a id="_m_tmm"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_TMM">13</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arc modification time relationship value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_TMX</code> <a id="_m_tmx"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../constants/arcModifierConstants.html#M_TMX">14</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arc expiration time relationship value</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Match multiple arc modifiers</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="nb">filter</span> <span class="o">=</span> <span class="sh">"</span><span class="s">.arc.mod in { M_INT, M_FLT } &amp;&amp; .arc.value &gt; 10</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_memory_registers">3.6.6. Memory Registers</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15.3846%;">
<col style="width: 15.3846%;">
<col style="width: 23.0769%;">
<col style="width: 46.1539%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R1</code> <a id="_r1"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory">Evaluator Memory</a> register #1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R2</code> <a id="_r2"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory">Evaluator Memory</a> register #2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R3</code> <a id="_r3"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory">Evaluator Memory</a> register #3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>R4</code> <a id="_r4"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory">Evaluator Memory</a> register #4</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Sort higher when arc and neighbor&#8217;s arc have similar values</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="nb">filter</span>   <span class="o">=</span> <span class="sh">"</span><span class="s">store( R1, .arc.value ) in range( 1, 100 )</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">neighbor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>     <span class="p">:</span> <span class="n">D_OUT</span>
        <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>  <span class="p">:</span> <span class="sh">"</span><span class="s">store( R2, .arc.value ) in range( 1, 100 )</span><span class="sh">"</span>
    <span class="p">},</span>
    <span class="n">rank</span>     <span class="o">=</span> <span class="sh">"</span><span class="s">prox( load(R1), load(R2) )</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">sortby</span>   <span class="o">=</span> <span class="n">S_RANK</span><span class="p">,</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_collector_staging_slots">3.6.7. Collector Staging Slots</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15.3846%;">
<col style="width: 15.3846%;">
<col style="width: 23.0769%;">
<col style="width: 46.1539%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C1</code> <a id="_c1"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collector staging slot #1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C2</code> <a id="_c2"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collector staging slot #2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C3</code> <a id="_c3"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collector staging slot #3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C4</code> <a id="_c4"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collector staging slot #4</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Find the most visited country for each of Alice&#8217;s friends.</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">collect</span>  <span class="o">=</span> <span class="n">C_NONE</span><span class="p">,</span>
    <span class="n">neighbor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">type</span><span class="sh">'</span>     <span class="p">:</span> <span class="sh">"</span><span class="s">person</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>   <span class="p">:</span> <span class="sh">"</span><span class="s">do( store( R1, 0 ) )</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">traverse</span><span class="sh">'</span> <span class="p">:</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>     <span class="p">:</span> <span class="p">(</span> <span class="sh">"</span><span class="s">visit</span><span class="sh">"</span><span class="p">,</span> <span class="n">D_OUT</span> <span class="p">),</span>
            <span class="sh">'</span><span class="s">collect</span><span class="sh">'</span> <span class="p">:</span> <span class="n">C_SCAN</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>  <span class="p">:</span> <span class="sh">"""</span><span class="s">
                        stageif(
                            storeif(
                                next.arc.value &gt; load(R1),
                                R1,
                                next.arc.value
                            ),
                            null,
                            C1
                        )
                        </span><span class="sh">"""</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">neighbor</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span>
                <span class="sh">'</span><span class="s">type</span><span class="sh">'</span>  <span class="p">:</span> <span class="sh">"</span><span class="s">country</span><span class="sh">"</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="sh">'</span><span class="s">post</span><span class="sh">'</span>     <span class="p">:</span> <span class="sh">"</span><span class="s">commitif( load(R1) &gt; 0, C1 )</span><span class="sh">"</span>
    <span class="p">}</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mathematical_constants">3.6.8. Mathematical Constants</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15.3846%;">
<col style="width: 15.3846%;">
<col style="width: 23.0769%;">
<col style="width: 46.1539%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pi</code> <a id="_pi"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.14159265358979323846</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( \pi \)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>e</code> <a id="_e"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.71828182845904523536</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( e \)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>root2</code> <a id="_root2"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.4142135623730950488</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( \sqrt{ 2 } \)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>root3</code> <a id="_root3"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.73205080756887729353</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( \sqrt{ 3 } \)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>root5</code> <a id="_root5"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.23606797749978969641</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( \sqrt{ 5 } \)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phi</code> <a id="_phi"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6180339887498948482</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( \varphi = \frac{1+\sqrt{5}}{2} \) (golden ratio)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zeta3</code> <a id="_zeta3"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2020569031595942854</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( \zeta(3) = \displaystyle \sum_{n=1}^\infty \frac{1}{n^3} \) (Apry&#8217;s constant)</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">(e + root2) / pi</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">1.3154</span><span class="bp">...</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluatorenvironment">3.7. Current Environment</h3>
<div class="paragraph">
<p>These attributes are relative to the current execution environment.</p>
</div>
<div class="sect3">
<h4 id="_current_graph_state">3.7.1. Current Graph State</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>graph.ts</code> <a id="_graphts"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current graph time, in seconds since 1970</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>graph.t0</code> <a id="_grapht0"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graph inception time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>graph.age</code> <a id="_graphage"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graph age = <code>graph.ts - graph.t0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>graph.order</code> <a id="_graphorder"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of vertices in graph</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>graph.size</code> <a id="_graphsize"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of arcs in graph</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>graph.op</code> <a id="_graphop"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current operation counter</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Graph state attributes are sampled the first time an expression is evaluated in a query and remain constant for the duration of the query.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Derive information from graph attributes</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">graph.size / graph.order</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">average</span> <span class="n">outdegree</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">graph.ts - graph.age</span><span class="sh">"</span> <span class="p">)</span>     <span class="o">-&gt;</span> <span class="n">graph</span> <span class="n">creation</span> <span class="n">time</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_system_attributes">3.7.2. System Attributes</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sys.tick</code> <a id="_systick"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System tick in nanoseconds since computer boot time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sys.uptime</code> <a id="_sysuptime"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System uptime in seconds</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
System attributes are re-read from their source each time an expression is evaluated.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Perform deep traversal and return results in the order of most time consuming</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
    <span class="nb">filter</span>   <span class="o">=</span> <span class="sh">"</span><span class="s">store(R1, sys.tick)</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">neighbor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>      <span class="p">:</span> <span class="n">D_OUT</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">neighbor</span><span class="sh">'</span> <span class="p">:</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span> <span class="p">:</span> <span class="sh">"</span><span class="s">.id == </span><span class="sh">'</span><span class="s">*z*</span><span class="sh">'"</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="n">rank</span>     <span class="o">=</span> <span class="sh">"</span><span class="s">sys.tick - load(R1)</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">sortby</span>   <span class="o">=</span> <span class="n">S_RANK</span><span class="p">,</span>
    <span class="n">select</span>   <span class="o">=</span> <span class="sh">"</span><span class="s">.rank</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_current_evaluator_context">3.7.3. Current Evaluator Context</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>context.rank</code> <a id="_context_rank"></a>
<br>
<code>.rank</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <a href="selectEvaluator.html#selectstatement"><code>select=</code> statements</a> this is the result sorting value as determined by the <code>sortby=</code> parameter.<br></p>
<p class="tableblock">In <code>filter=</code> or <code>rank=</code> expressions this value is normally 0. However, when the expression is evaluated in the context of traversal or collection resulting from <a href="#bfssupport">breadth-first search with <code>mcull()</code></a> this value is set to the score of the culled item being processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vector</code> <a id="_vector"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../similarity/vector.html"><em>vector</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similarity probe vector as supplied in the query <code>vector=</code> parameter or <a href="../vertex/vertexFilter.html#vertexfiltersimilarity">similarity filter</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectable.real</code> <a id="_collectable_real"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An item&#8217;s rank score must be greater than (less than) this value to have a chance of being included in a query result sorted by a floating point field in descending (ascending) order.</p>
<p class="tableblock">NOTE: Query <a href="../constants/sortSpecificationConstants.html">sortby</a> parameter determines the data type. Use <code>collectable.real</code> with sortby constants <code>S*</code> whose Type is (or may be) <em>float</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectable.int</code> <a id="_collectable_int"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An item&#8217;s rank score must be greater than (less than) this value to have a chance of being included in a query result sorted by an integer field in descending (ascending) order.</p>
<p class="tableblock">NOTE: Query <a href="../constants/sortSpecificationConstants.html">sortby</a> parameter determines the data type. Use <code>collectable.int</code> with sortby constants <code>S*</code> whose Type is <em>int</em>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Sort results by length of neighbor&#8217;s id and render result by custom label</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="sh">"</span><span class="s">X</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">rank</span>   <span class="o">=</span> <span class="sh">"</span><span class="s">len( .id )</span><span class="sh">"</span>
    <span class="n">sortby</span> <span class="o">=</span> <span class="n">S_RANK</span><span class="p">,</span>
    <span class="n">select</span> <span class="o">=</span> <span class="sh">"</span><span class="s">ID LEN : int( .rank )</span><span class="sh">"</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluatorfunctions">3.8. Functions</h3>
<div class="paragraph">
<p>This section summarizes built-in functions available for use in expressions.</p>
</div>
<div class="sect3">
<h4 id="mathfunctions">3.8.1. Mathematical Functions</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 26.6666%;">
<col style="width: 46.6666%;">
<col style="width: 26.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inv( <em>x</em> )</code> <a id="_inv"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \frac{1}{x} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOTE: <code>inv(0)</code> is defined as 3.4&#183;10<sup>38</sup>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>neg( <em>x</em> )</code> <a id="_neg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = -x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>log2( <em>x</em> )</code> <a id="_log2"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \log_2 x  \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOTE: <em>x</em> &#8804; 0 &#8594; &#8722;1074</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>log( <em>x</em> )</code> <a id="_log"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \ln{x} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOTE: <em>x</em> &#8804; 0 &#8594; &#8722;745</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>log10( <em>x</em> )</code> <a id="_log10"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \log_{10} x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOTE: <em>x</em> &#8804; 0 &#8594; &#8722;324</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rad( <em>x</em> )</code> <a id="_rad"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \frac{\pi x}{180} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Degrees to radians</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deg( <em>x</em> )</code> <a id="_deg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \frac{180 \cdot x}{\pi} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Radians to degrees</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sin( <em>x</em> )</code> <a id="_sin"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \sin x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cos( <em>x</em> )</code> <a id="_cos"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \cos x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tan( <em>x</em> )</code> <a id="_tan"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \tan x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>asin( <em>x</em> )</code> <a id="_asin"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \arcsin x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>acos( <em>x</em> )</code> <a id="_acos"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \arccos x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>atan( <em>x</em> )</code> <a id="_atan"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \arctan x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>atan2( <em>a</em>, <em>b</em> )</code> <a id="_atan2"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \arctan { \frac{a}{b} } \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both signs of <em>a</em> and <em>b</em> are used to determine the correct quadrant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sinh( <em>x</em> )</code> <a id="_sinh"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \sinh x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cosh( <em>x</em> )</code> <a id="_cosh"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \cosh x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tanh( <em>x</em> )</code> <a id="_tanh"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \tanh x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>asinh( <em>x</em> )</code> <a id="_asinh"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \arcsinh x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>acosh( <em>x</em> )</code> <a id="_acosh"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \arccosh x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>atanh( <em>x</em> )</code> <a id="_atanh"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \arctanh x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sinc( <em>x</em> )</code> <a id="_sinc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \frac{sin (\pi x)}{\pi x} \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exp( <em>x</em> )</code> <a id="_exp"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle e^x \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>abs( <em>x</em> )</code> <a id="_abs"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = | x | \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sqrt( <em>x</em> )</code> <a id="_sqrt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \sqrt x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOTE: The result will be 0 when <em>x</em> is negative</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ceil( <em>x</em> )</code> <a id="_ceil"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \lceil x \rceil \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>floor( <em>x</em> )</code> <a id="_floor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \lfloor x \rfloor \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>round( <em>x</em> )</code> <a id="_round"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \lfloor x \rceil \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOTE: Rounding rule is to round away from zero. (Differs from Python3 <em>round-to-even</em> rule!)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sign( <em>x</em> )</code> <a id="_sign"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{if } x &gt; 0 \\ 0 &amp; \quad \text{if } x = 0 \\ -1 &amp; \quad \text{if } x &lt; 0 \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fac( <em>x</em> )</code> <a id="_fac"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = x! \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>popcnt( <em>x</em> )</code> <a id="_popcnt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the number of bits set to 1 in the binary representation of <em>x</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>comb( <em>n</em>, <em>k</em> )</code> <a id="_comb"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \binom{n}{k} =  \frac{n!}{k!(n-k)!} \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max( <em>a</em>, <em>b</em> )</code> <a id="_max"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} a &amp; \quad \text{if } a \geq b \\ b &amp; \quad \text{if } a &lt; b \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min( <em>a</em>, <em>b</em> )</code> <a id="_min"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} a &amp; \quad \text{if } a &lt; b \\ b &amp; \quad \text{if } a \geq b \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hash( <em>x</em> )</code> <a id="_hash"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a 64-bit integer hash value \( y = h(x) \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>random()</code> <a id="_random"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a random number \( y \in [0, 1] \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>randbits()</code> <a id="_randbits"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a random bitvector</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>randint( <em>a</em>, <em>b</em> )</code> <a id="_randint"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a random integer \(y \in [a, b \rangle \)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Miscellaneous function calls</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">log( 5 ) - sqrt( 17 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mf">2.51</span><span class="bp">...</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">acos( sin( pi / 3 ) )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">0.524</span><span class="bp">...</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">sqrt( log( exp(4) ) )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">2.0</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">hash( </span><span class="sh">'</span><span class="s">helloworld!</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">7982852363355633418</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="castandcheckfunctions">3.8.2. Type Cast and Checks</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int( <em>x</em> )</code> <a id="_int"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the integer representation of object <em>x</em>. If <em>x</em> is a non-numeric object with a memory address the address is returned. If <em>x</em> is <em>real</em> <code>inf</code> (or <code>-inf</code>) the maximum (or minimum) integer value is returned. If <em>x</em> is the result of a non-existent property lookup 0 is returned. If <em>x</em> is any other object <em>x</em> is returned unchanged.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>intr( <em>x</em> )</code> <a id="_intr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>int()</code> except <em>x</em> is rounded to the nearest whole number before the cast if <em>x</em> is <em>real</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>asint( <em>x</em> )</code> <a id="_asint"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reinterpret the bits of object <em>x</em> as an integer. If <em>x</em> is <em>real</em> (including <code>inf</code> and <code>nan</code>) the bits are reinterpreted directly as a 64-bit signed integer. If <em>x</em> is a <em>string</em> representing a number it is reinterpreted as the corresponding integer. If the string does not represent a number 0 is returned. If <em>x</em> is a <em>vector</em> it is interpreted as the vector&#8217;s length. If <em>x</em> is any other object with a memory address the address is returned. If <em>x</em> is the result of a non-existent property lookup 0 is returned. If <em>x</em> is any other object <em>x</em> is returned unchanged.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>asbits( <em>x</em> )</code> <a id="_asbits"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the raw bits of object <em>x</em> with type set to <em>int</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real( <em>x</em> )</code> <a id="_real"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the floating point representation of object <em>x</em>. If <em>x</em> is a non-numeric object with a memory address the address is returned as a floating point number. If <em>x</em> is <em>int</em> the corresponding floating point value is returned. If <em>x</em> is the result of a non-existent property lookup 0.0 is returned. If <em>x</em> is any other object (including <em>real</em>) <em>x</em> is returned unchanged.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>asreal( <em>x</em> )</code> <a id="_asreal"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reinterpret the bits of object <em>x</em> as a floating point number. If <em>x</em> is <em>int</em> the bits are reinterpreted directly as a double precision floating point value. If <em>x</em> is <em>real</em> <code>inf</code> (or <code>-inf</code>) the maximum (or minimum) double value is returned. If <em>x</em> is a <em>string</em> representing a number it is reinterpreted as the corresponding floating point value. If the string does not represent a number <code>nan</code> is returned. If <em>x</em> is a <em>vector</em> it is interpreted as the vector&#8217;s magnitude. If <em>x</em> is any other object with a memory address the address is returned as a floating point number. If <em>x</em> is the result of a non-existent property lookup 0.0 is returned. If <em>x</em> is any other object <em>x</em> is returned unchanged.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str( <em>x</em> )</code> <a id="_str"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the string representation of object <em>x</em>.
<br>
<br>
 <strong>NOTE</strong>: The returned string is a new string object stored in the <a href="#evaluatormemory">Evaluator Memory</a> object used by the expression. Strings produced by this function are not deallocated until the memory object is deleted or explicitly cleared using <code>"mreset()"</code> in an expression or calling <code>Reset()</code> on the associated Python object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bitvector( <em>x</em> )</code> <a id="_bitvector"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the raw bits of object <em>x</em> with type set to <em>bitvector</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isint( <em>x</em> )</code> <a id="_isint"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is an integer, otherwise return 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isreal( <em>x</em> )</code> <a id="_isreal"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is a floating point value, otherwise return 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isstr( <em>x</em> )</code> <a id="_isstr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is a string object, otherwise return 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isvector( <em>x</em> )</code> <a id="_isvector"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is a vector object, otherwise return 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isbitvector( <em>x</em> )</code> <a id="_isbitvector"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is a bitvector, otherwise return 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isnan( <em>x</em> )</code> <a id="_isnan"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is <em>real</em> <code>nan</code> or any object other than integer, bitvector or floating point, otherwise return 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isinf( <em>x</em> )</code> <a id="_isinf"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is <em>real</em> <code>inf</code> or <code>-inf</code>, otherwise return 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isarray( <em>x</em> )</code> <a id="_isarray"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is a numeric array type, otherwise return 0. See <a href="../vertex/vertexProperty.html#vertex_property_type_list">Vertex Property Types: <em>list</em></a> for how to assign a property for which <code>isarray()</code> is true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ismap( <em>x</em> )</code> <a id="_ismap"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is a map of <em>keyval</em> items, otherwise return 0. See <a href="../vertex/vertexProperty.html#vertex_property_type_dict">Vertex Property Types: <em>dict</em></a> for how to assign a property for which <code>ismap()</code> is true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iskeyval( <em>x</em> )</code> <a id="_iskeyval"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is a <em>keyval</em> type, otherwise return 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isbytearray( <em>x</em> )</code> <a id="_isbytearray"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is an array of bytes (0-255), otherwise return 0. See <a href="../vertex/vertexProperty.html#vertex_property_type_bytearray">Vertex Property Types: <em>bytearray</em></a> for how to assign a property for which <code>isbytearray()</code> is true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isbytes( <em>x</em> )</code> <a id="_isbytes"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>x</em> is an array of bytes (0-255), otherwise return 0. See <a href="../vertex/vertexProperty.html#vertex_property_type_bytes">Vertex Property Types: <em>bytes</em></a> for how to assign a property for which <code>isbytes()</code> is true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>len( <em>x</em> )</code> <a id="_len"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the length of object <em>x</em>. Definition of length depends on object type.
<br>
<br>
 Length of <em>string</em> and <em>vertexid</em> is number of UTF-8 bytes in encoded string.
<br>
 Length of <em>vector</em> is number of dimensions.
<br>
 Length of <em>bitvector</em> is number of bits set to 1.
<br>
 Length of <em>bytearray</em> and <em>bytes</em> is number of bytes.
<br>
 Length of <em>dict</em> and <em>list</em> is number of items.
<br>
 Length of any other object is 0.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Miscellaneous casts and checks</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">int( 2.5 )</span><span class="sh">"</span> <span class="p">)</span>              <span class="o">-&gt;</span> <span class="mi">2</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">asint( 2.5 )</span><span class="sh">"</span> <span class="p">)</span>            <span class="o">-&gt;</span> <span class="mh">0x4004000000000000</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">asint( </span><span class="sh">'</span><span class="s">123</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span> <span class="p">)</span>          <span class="o">-&gt;</span> <span class="mi">123</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">real( 2 )</span><span class="sh">"</span> <span class="p">)</span>               <span class="o">-&gt;</span> <span class="mf">2.0</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">asreal( 0x4004 &lt;&lt; 48 )</span><span class="sh">"</span> <span class="p">)</span>  <span class="o">-&gt;</span> <span class="mf">2.5</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">bitvector( 0xCC )</span><span class="sh">"</span> <span class="p">)</span>       <span class="o">-&gt;</span> <span class="mh">0xCC</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isinf( -1/-0.0 )</span><span class="sh">"</span> <span class="p">)</span>        <span class="o">-&gt;</span> <span class="mi">1</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">len( </span><span class="sh">'</span><span class="s">hello</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span> <span class="p">)</span>          <span class="o">-&gt;</span> <span class="mi">5</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="stringfunctions">3.8.3. String Functions</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 34.7826%;">
<col style="width: 21.7391%;">
<col style="width: 13.0434%;">
<col style="width: 30.4349%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">New Str</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>strcmp( <em>a</em>, <em>b</em> )</code> <a id="_strcmp"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare strings <em>a</em> and <em>b</em>. Return zero if strings are equal, negative if <em>a</em> compares less than <em>b</em>, or positive if <em>a</em> compares greater than <em>b</em>. If either <em>a</em> or <em>b</em> is not a string, <code>null</code> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>strcasecmp( <em>a</em>, <em>b</em> )</code> <a id="_strcasecmp"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare strings <em>a</em> and <em>b</em>, ignoring case. Return zero if strings are equal, negative if <em>a</em> compares less than <em>b</em>, or positive if <em>a</em> compares greater than <em>b</em>. If either <em>a</em> or <em>b</em> is not a string, <code>null</code> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>strlen( <em>x</em> )</code> <a id="_strlen"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the number of bytes in string <em>x</em>. If <em>x</em> is not <em>string</em> or <em>vertexid</em> 0 is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startswith( <em>s</em>, <em>p</em> )</code> <a id="_startswith"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 or 1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if string <em>s</em> starts with string <em>p</em>, otherwise return 0. If either <em>a</em> or <em>b</em> is not a string, <code>null</code> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>endswith( <em>string</em>, <em>probe</em> )</code> <a id="_endswith"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 or 1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if string <em>s</em> ends with string <em>p</em>, otherwise return 0. If either <em>a</em> or <em>b</em> is not a string, <code>null</code> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>join( <em>sep</em>, <em>s<sub>1</sub></em>, <em>s<sub>2</sub></em>, &#8230;&#8203;, <em>s<sub>n</sub></em> )</code> <a id="_join"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>s<sub>1</sub></em> <em>sep</em> <em>s<sub>2</sub></em> <em>sep</em> &#8230;&#8203; <em>sep</em> <em>s<sub>n</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Concatenate any number of strings <em>s<sub>i</sub></em> with string <em>sep</em> inserted between each. Returns a new string object. If <em>sep</em> or <em>s<sub>i</sub></em> are not strings they are implicitly cast using <a href="#_str"><code>str()</code></a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>replace( <em>str</em>, <em>probe</em>, <em>repl</em>  )</code> <a id="_replace"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modified copy of <em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a new string object copied from <em>str</em> with all occurrences of <em>probe</em> replaced with <em>repl</em>. All non-string arguments are implicitly cast using <a href="#_str"><code>str()</code></a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idx( <em>s</em>, <em>i</em> )</code> <a id="_idx"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer or real</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the value at index <em>i</em> of string <em>s</em>. For normal strings this is the byte value at offset <em>i</em>. For a vertex property numeric array this is the numeric value at offset <em>i</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>slice( <em>str</em>, <em>a</em>, <em>b</em> )</code> <a id="_slice"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Substring of <em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a new string object representing the substring of <em>str</em> starting at index <em>a</em> and ending at index <em>b</em> - 1. If <em>str</em> is not a string object it is implicitly cast using <a href="#_str"><code>str()</code></a>. Arguments <em>a</em> and <em>b</em> must be integers or <code>null</code>, which is interpreted as 0 and -1 for <em>a</em> and <em>b</em>, respectively.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
For those functions returning strings, each time the function is evaluated a new string is created and stored in the <a href="#evaluatormemory">Evaluator Memory</a> object used by the expression. Strings are not deallocated until the memory object is deleted or explicitly cleared using <code>"mreset()"</code> in an expression or calling <code>Reset()</code> on the associated Python object.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is also possible to concatenate strings using the infix <code>` operator. As long as the first operand is a string object all subsequent infix operands added with `</code> are implicitly cast using <a href="#_str"><code>str()</code></a>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: String functions</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">strcmp( </span><span class="sh">'</span><span class="s">hello</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">hi</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span> <span class="p">)</span>          <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">strcasecmp( </span><span class="sh">'</span><span class="s">Hello</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">hello</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span> <span class="p">)</span>   <span class="o">-&gt;</span> <span class="mi">0</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">startswith( </span><span class="sh">'</span><span class="s">Hello</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">He</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span> <span class="p">)</span>      <span class="o">-&gt;</span> <span class="mi">1</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">endswith( </span><span class="sh">'</span><span class="s">Hello</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">lo</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span> <span class="p">)</span>        <span class="o">-&gt;</span> <span class="mi">1</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">join( </span><span class="sh">'</span><span class="s"> </span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">b</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">c</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span> <span class="p">)</span>       <span class="o">-&gt;</span>  <span class="sh">"</span><span class="s">a b c</span><span class="sh">"</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">replace( </span><span class="sh">'</span><span class="s">say soda</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">s</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">y</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span> <span class="p">)</span>  <span class="o">-&gt;</span>  <span class="sh">"</span><span class="s">yay yoda</span><span class="sh">"</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">slice( </span><span class="sh">'</span><span class="s">hello</span><span class="sh">'</span><span class="s">, 1, 4 )</span><span class="sh">"</span> <span class="p">)</span>           <span class="o">-&gt;</span>  <span class="sh">"</span><span class="s">ell</span><span class="sh">"</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">str(pi)</span><span class="sh">"</span><span class="p">)</span>                           <span class="o">-&gt;</span>  <span class="sh">"</span><span class="s">3.14159</span><span class="sh">"</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"'</span><span class="s">hello</span><span class="sh">'</span><span class="s"> + 1 + 2</span><span class="sh">"</span><span class="p">)</span>                   <span class="o">-&gt;</span>  <span class="sh">"</span><span class="s">hello12</span><span class="sh">"</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"''</span><span class="s">+sin(1)+sin(0)</span><span class="sh">"</span> <span class="p">)</span>                 <span class="o">-&gt;</span>  <span class="sh">"</span><span class="s">0.8414710.00000</span><span class="sh">"</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="proplookupfunctions">3.8.4. Property Lookup</h4>
<table id="_property" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 44.4444%;">
<col style="width: 55.5556%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex.property( <em>x</em>[, <em>default</em>[, <em>cond</em> ]] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return property <em>x</em> of current <em>tail</em> vertex. If the property does not exist and no <em>default</em> is given, the return value depends on context: In infix arithmetic context the non-existent property evaluates to 0. In all other contexts the non-existent property evaluates to <code>nan</code>.
<br>
<br>
 When <em>default</em> is provided it is returned if the property does not exist.
<br>
<br>
 When condition <em>cond</em> is provided the lookup only takes place if <em>cond</em> is true. If <em>cond</em> is false OR the property does not exist, <em>default</em> is returned.
<br>
<br>
 <strong>TIP</strong>: Conditional lookup can be used to avoid unnecessary memory access during evaluation and can speed up processing significantly in some cases. Because of <a href="#noshortcircuiting">No Short Circuiting</a> unconditional property lookup is executed regardless of whether or not the final value of the expression depends on it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>next.property( <em>x</em>[, <em>default</em>[, <em>cond</em> ]] )</code>
<br>
 <code>.property( <em>x</em>[, <em>default</em>[, <em>cond</em> ]] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>vertex.property()</code> except lookup occurs in current <em>head</em> vertex.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prev.property( <em>x</em>[, <em>default</em>[, <em>cond</em> ]] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <code>vertex.property()</code> except lookup occurs in <em>previous tail</em> vertex.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Property lookup</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">V</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">V</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">V</span><span class="p">[</span><span class="sh">'</span><span class="s">x</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">g</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">vertex.property( </span><span class="sh">'</span><span class="s">x</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span>                <span class="o">-&gt;</span> <span class="mi">100</span>
<span class="n">g</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">vertex.property( </span><span class="sh">'</span><span class="s">y</span><span class="sh">'</span><span class="s">, 999 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span>           <span class="o">-&gt;</span> <span class="mi">999</span>
<span class="n">g</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">next.property( </span><span class="sh">'</span><span class="s">x</span><span class="sh">'</span><span class="s">, 0, next.deg &gt; 0 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice how the 3rd property lookup does not perform any lookup unless the degree is non-zero. If evaluated for millions of arcs where the condition is mostly false the memory load is reduced and the query runs faster.</p>
</div>
</div>
<div class="sect3">
<h4 id="enumfunctions">3.8.5. Enumeration</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 18.75%;">
<col style="width: 18.75%;">
<col style="width: 37.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Argument Type</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relenc( <em>x</em> )</code> <a id="_relenc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the internal enumeration code for relationship <em>x</em>. If <em>x</em> is an integer then <em>x</em> is returned, otherwise if <em>x</em> is not a string 0 is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>typeenc( <em>x</em> )</code> <a id="_typeenc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the internal enumeration code for vertex type <em>x</em>. If <em>x</em> is an integer then <em>x</em> is returned, otherwise if <em>x</em> is not a string 0 is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reldec( <em>x</em> )</code> <a id="_reldec"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the relationship string for internal enumeration code <em>x</em>. The default string "__UNKNOWN__" is returned if integer <em>x</em> is not a valid enumeration code. If <em>x</em> is not an integer <em>x</em> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>typedec( <em>x</em> )</code> <a id="_typedec"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the vertex type string for internal enumeration code <em>x</em>. The default string "__UNKNOWN__" is returned if integer <em>x</em> is not a valid enumeration code. If <em>x</em> is not an integer <em>x</em> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>modtostr( <em>x</em> )</code> <a id="_modtostr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M_*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the string representation of <a href="../constants/arcModifierConstants.html">arc modifier constant</a> <em>x</em>. If <em>x</em> is not a valid modifier constant the result is undefined.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dirtostr( <em>x</em> )</code> <a id="_dirtostr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>D_*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the string representation of <a href="../constants/arcDirectionConstants.html">arc direction constant</a> <em>x</em>. If <em>x</em> is not a valid direction constant the result is undefined.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Miscellaneous enumerations</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">modtostr( 5 )</span><span class="sh">"</span> <span class="p">)</span>      <span class="o">-&gt;</span> <span class="sh">"</span><span class="s">M_INT</span><span class="sh">"</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">relenc( </span><span class="sh">'</span><span class="s">likes</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span> <span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">3229</span>  <span class="p">(</span><span class="n">may</span> <span class="n">vary</span><span class="err">!</span><span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">reldec( 3229 )</span><span class="sh">"</span> <span class="p">)</span>     <span class="o">-&gt;</span> <span class="sh">"</span><span class="s">likes</span><span class="sh">"</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="similarityfunctions_feature">3.8.6. Similarity (Feature Vectors)</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23.5294%;">
<col style="width: 17.647%;">
<col style="width: 17.647%;">
<col style="width: 5.8823%;">
<col style="width: 35.2943%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Argument Type</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">Return Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sim( <em>v1</em>, <em>v2</em> )</code> <a id="_sim_feature"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../similarity/vector.html"><em>vector</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( s \in \lbrack 0, 1 \rbrack \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the <a href="../similarity/similarityMethods.html#similaritysimilarity">similarity score</a> <em>s</em> for vectors <em>v1</em> and <em>v2</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cosine( <em>v1</em>, <em>v2</em> )</code> <a id="_cosine_feature"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../similarity/vector.html"><em>vector</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( c \in \lbrack 0, 1 \rbrack \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the <a href="../similarity/similarityMethods.html#similaritycosine">cosine similarity</a> <em>c</em> for vectors <em>v1</em> and <em>v2</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jaccard( <em>v1</em>, <em>v2</em> )</code> <a id="_jaccard_feature"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../similarity/vector.html"><em>vector</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( J \in \lbrack 0, 1 \rbrack \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the <a href="../similarity/similarityMethods.html#similarityjaccard">Jaccard index</a> <em>J</em> for vectors <em>v1</em> and <em>v2</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hamdist( <em>v1</em>, <em>v2</em> )</code> <a id="_hamdist_feature"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../similarity/vector.html"><em>vector</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( h \in \lbrack 0, 64 \rbrack \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the hamming distance <em>h</em> (i.e. number of differing bits) between the fingerprints for vectors <em>v1</em> and <em>v2</em>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Feature Vector similarity calculation</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">A</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">B</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">A</span><span class="p">.</span><span class="nc">SetVector</span><span class="p">(</span> <span class="p">[</span> <span class="p">(</span><span class="sh">"</span><span class="s">hello</span><span class="sh">"</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="sh">"</span><span class="s">world</span><span class="sh">"</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="p">]</span> <span class="p">)</span>
<span class="n">B</span><span class="p">.</span><span class="nc">SetVector</span><span class="p">(</span> <span class="p">[</span> <span class="p">(</span><span class="sh">"</span><span class="s">hello</span><span class="sh">"</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="sh">"</span><span class="s">there</span><span class="sh">"</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="p">]</span> <span class="p">)</span>

<span class="c1"># -&gt; 0.5
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">sim( vertex.vector, next.vector )</span><span class="sh">"</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">B</span><span class="sh">"</span> <span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="similarityfunctions_array">3.8.7. Similarity (Euclidean Vectors)</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 18.75%;">
<col style="width: 18.75%;">
<col style="width: 37.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Argument Type</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sim( <em>v1</em>, <em>v2</em> )</code>
<br>
 <code>cosine( <em>v1</em>, <em>v2</em> )</code> <a id="_sim_array"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../similarity/vector.html"><em>vector</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( s \in \lbrack -1, 1 \rbrack \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the <a href="../similarity/similarityMethods.html#similaritycosine">cosine similarity</a> <em>s</em> for vectors <em>v1</em> and <em>v2</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hamdist( <em>v1</em>, <em>v2</em> )</code> <a id="_hamdist_array"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../similarity/vector.html"><em>vector</em></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( h \in \lbrack 0, 64 \rbrack \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the hamming distance <em>h</em> (i.e. number of differing bits) between the fingerprints for vectors <em>v1</em> and <em>v2</em>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Euclidean Vector similarity calculation</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">A</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">B</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">A</span><span class="p">.</span><span class="nc">SetVector</span><span class="p">(</span> <span class="p">[</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.7</span> <span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">28</span> <span class="p">)</span>
<span class="n">B</span><span class="p">.</span><span class="nc">SetVector</span><span class="p">(</span> <span class="p">[</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span> <span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">28</span> <span class="p">)</span>

<span class="c1"># -&gt; 0.9672
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">sim( vertex.vector, next.vector )</span><span class="sh">"</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">B</span><span class="sh">"</span> <span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="controlfunctions">3.8.8. Control Functions</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 41.6666%;">
<col style="width: 16.6666%;">
<col style="width: 41.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>return( <em>x</em> )</code> <a id="_return"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Immediately terminate execution of expression and set the return value of the expression to <em>x</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>returnif( <em>cond</em>, <em>x</em> )</code> <a id="_returnif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x</em> if <em>cond</em> is true, otherwise 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is true, immediately terminate execution of expression and set the return value of the expression to <em>x</em>. If <em>cond</em> is false this function returns 0 and execution continues.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>require( <em>cond</em> )</code> <a id="_require"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is true this function returns 0 and execution continues. If <em>cond</em> is false, immediately terminate execution of expression and set the return value of the expression to 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>halt()</code> <a id="_halt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 if halted, else 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminate execution of query containing this expression. Evaluation of expression continues until completion, after which all other query activity is terminated immediately without raising an exception. This function returns 1 if termination will occur, or 0 if query cannot be terminated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>haltif( cond )</code> <a id="_haltif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is true <a href="#_halt">perform <code>halt()</code></a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>halted()</code> <a id="_halted"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 if halted, 0 if not halted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the status of query execution termination.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>continue()</code> <a id="_continue"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continue query execution. If query execution was <a href="#_halt">previously halted</a>, termination is cancelled and the query continues executing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>continueif( cond )</code> <a id="_continueif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is true, continue query execution. If query execution was <a href="#_halt">previously halted</a>, termination is cancelled and the query continues executing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>firstval( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_firstval"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x<sub>kmin</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the leftmost argument <em>x<sub>kmin</sub></em> that is a valid numeric value or other object other than <code>null</code>. If none of the arguments are valid values the last argument <em>x<sub>n</sub></em> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lastval( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_lastval"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x<sub>kmax</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the rightmost argument <em>x<sub>kmax</sub></em> that is a valid numeric value or other object other than <code>null</code>. If none of the arguments are valid values the first argument <em>x<sub>1</sub></em> is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>do( <em>&lt;expr<sub>1</sub>&gt;</em>, &#8230;&#8203;, <em>&lt;expr<sub>n</sub>&gt;</em> )</code> <a id="_do"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluate any number of sub-expressions <em>&lt;expr<sub>k</sub>&gt;</em> (discarding their return values) and finally return <em>true</em>. This provides a way to execute expressions that don&#8217;t contribute directly to the overall expression result value, but may be needed for their side-effects such as operating on memory locations that will be used later.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void( <em>&lt;expr<sub>1</sub>&gt;</em>, &#8230;&#8203;, <em>&lt;expr<sub>n</sub>&gt;</em> )</code> <a id="_void"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluate any number of sub-expressions <em>&lt;expr<sub>k</sub>&gt;</em> (discarding their return values) and finally return <code>null</code>. This provides a way to execute expressions that don&#8217;t contribute directly to the overall expression result value, but may be needed for their side-effects such as operating on memory locations that will be used later.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Miscellaneous control function calls</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="c1"># Use return() for clarity
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">a=1+2; return( a )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">3</span>

<span class="c1"># Stop execution when returnif() condition satisfied
</span><span class="n">V</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span><span class="sh">"</span><span class="s">V</span><span class="sh">"</span><span class="p">)</span>
<span class="n">V</span><span class="p">[</span><span class="sh">'</span><span class="s">x</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">V</span><span class="p">[</span><span class="sh">'</span><span class="s">y</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">a=next[</span><span class="sh">'</span><span class="s">x</span><span class="sh">'</span><span class="s">]; returnif(a,a); next[</span><span class="sh">'</span><span class="s">y</span><span class="sh">'</span><span class="s">]</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">V</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span>

<span class="c1"># Return first argument
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">firstval()</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nan</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">firstval( 1, 2, 3, 4 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">firstval( -1/-0.0, asin(2), 42, 43 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">42</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">firstval( vertex[</span><span class="sh">'</span><span class="s">xxx</span><span class="sh">'</span><span class="s">], 123 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">tail</span><span class="o">=</span><span class="sh">"</span><span class="s">A</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">123</span>

<span class="c1"># Return last argument
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">lastval( 1, 2, 3, 4 )</span><span class="sh">"</span> <span class="p">)</span>  <span class="o">-&gt;</span> <span class="mi">4</span>

<span class="c1"># Execute anything and return 1
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">do()</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">do( 0, 0/-0.0)</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">1</span>

<span class="c1"># Execute anything and return nan
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">void( 1, 2, 3 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nan</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="variadicaggregatorfunctions">3.8.9. Variadic Aggregator Functions</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 31.25%;">
<col style="width: 18.75%;">
<col style="width: 18.75%;">
<col style="width: 31.25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sum( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_sum"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \sum_{i=1}^n x_i \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sum of all numeric arguments <em>x</em><sub>i</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sumsqr( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_sumsqr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \sum_{i=1}^n x_i^2 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sum of the squares of all numeric arguments <em>x</em><sub>i</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stdev( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_stdev"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \sqrt{ \frac{\displaystyle \sum_{i=1}^n {x_i^2} - \frac{\left( \sum_{i=1}^n {x_i} \right) ^ 2}{n}}{n-1} } \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard deviation of numeric arguments <em>x</em><sub>i</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>invsum( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_invsum"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \sum_{i=1}^n \frac{1}{x_i} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The inverse sum of all numeric arguments <em>x</em><sub>i</sub></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<em>x</em><sub>i</sub>)<sup>&#8722;1</sup> &#8776; 8.5&#183;10<sup>38</sup> when <em>x</em><sub>i</sub> = 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prod( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_prod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \prod_{i=1}^n x_i \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Product of all numeric arguments <em>x</em><sub>i</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mean( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_mean"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \frac{1}{n} \displaystyle \sum_{i=1}^n x_i \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arithmetic mean (i.e. average) of all numeric arguments <em>x</em><sub>i</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>harmmean( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_harmmean"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \left( \frac{1}{n} \displaystyle \sum_{i=1}^n \frac{1}{x_i} \right) ^ {-1} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Harmonic mean of all numeric arguments <em>x</em><sub>i</sub></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<em>x</em><sub>i</sub>)<sup>&#8722;1</sup> &#8776; 8.5&#183;10<sup>38</sup> when <em>x</em><sub>i</sub> = 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geomean( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_geomean"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \sqrt[n]{ \prod_{i=1}^n x_i } \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geometric mean of all numeric arguments <em>x</em><sub>i</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These functions also accept numeric array vertex properties as x<sub>i</sub>. When multiple properties and/or scalar x<sub>i</sub> are mixed, the result is as if all arrays were flattened prior to the operation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Aggregator function calls</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">sum( 2, 2, 3, 5, 7 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">19</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">sumsqr( 2, 2, 3, 5, 7 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">91</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">stdev( 2, 2, 3, 5, 7 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">2.17</span><span class="bp">...</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">invsum( 2, 2, 3, 5, 7 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">1.68</span><span class="bp">...</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">prod( 2, 2, 3, 5, 7 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">420</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">mean( 2, 2, 3, 5, 7 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">3.8</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">harmmean( 2, 2, 3, 5, 7 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">2.98</span><span class="bp">...</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">geomean( 2, 2, 3, 5, 7 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">3.35</span><span class="bp">...</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="simplerankingfunctions">3.8.10. Simple Ranking Functions</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 37.5%;">
<col style="width: 25%;">
<col style="width: 37.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rank( <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_rank"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \text{next.c1} \cdot \displaystyle \sum_{i=1}^n x_i + \text{next.c0} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute a rank score <em>y</em> for head vertex <em>next</em> using its <a href="../vertex/vertexRank.html">ranking coefficients</a> <code>c1</code> and <code>c0</code> to evaluate <code>y=c1&#183;X+c0</code>, where <code>X</code> is the sum of all arguments <em>x</em><sub>i</sub>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prox( <em>a</em>, <em>b</em> )</code> <a id="_prox"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \displaystyle \frac{256}{256 + | a-b | } \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute a proximity score \( y \in \langle 0,1 ] \) for values <em>a</em> and <em>b</em>. The result is equal to 1.0 when <em>a</em> = <em>b</em>, and moves towards 0.0 as \( |a-b| \to \infty\).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geodist( <em>lat<sub>A</sub></em>, <em>lon<sub>A</sub></em>, <em>lat<sub>B</sub></em>, <em>lon<sub>B</sub></em>)</code> <a id="_geodist"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 6371001 \cdot 2 \cdot \arctan{ \frac{\sqrt{a}}{\sqrt{1-a}}} &amp; \quad \text{if } a &lt; 1 \\ 6371001 \cdot \pi &amp; \quad \text{if } a = 1 \end{cases} \)
<br>
<br>
 \( a = \frac{1 - \cos( \varphi_B - \varphi_A )}{2} + \cos{\varphi_A} \cdot \cos{\varphi_B} \cdot \frac{1 - \cos( \lambda_B - \lambda_A )}{2} \)
<br>
<br>
 \( \varphi_x = \displaystyle \frac{ \pi \cdot lat_x}{180} \)
<br>
<br>
 \( \lambda_x = \displaystyle \frac{ \pi \cdot lon_x}{180} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute approximate distance in meters between two geographic locations A = ( <em>lat<sub>A</sub></em>, <em>lon<sub>A</sub></em> ) and B = ( <em>lat<sub>A</sub></em>, <em>lon<sub>A</sub></em> ). This formula simplifies the calculation by assuming the Earth is a sphere, leading to small errors up to 0.5%.
<br>
This function expects arguments in degrees.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geoprox( <em>lat<sub>1</sub></em>, <em>lon<sub>1</sub></em>, <em>lat<sub>2</sub></em>, <em>lon<sub>2</sub></em>)</code> <a id="_geoprox"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = 1 - \displaystyle \frac{ g(lat_A,lon_A,lat_B,lon_B)}{6371001 \cdot \pi} \)
<br>
<br>
 where \( g() \) is the <code>geodist()</code> function.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute a geographic proximity score \( y \in \langle 0,1] \) for two locations A = ( <em>lat<sub>1</sub></em>, <em>lon<sub>1</sub></em> ) and B = ( <em>lat<sub>2</sub></em>, <em>lon<sub>2</sub></em> ). A location will have a proximity score 1.0 to itself and 0.0 to a point on the opposite side of the Earth.
<br>
This function expects arguments in degrees.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>georank( <em>v</em> )</code>
<br>
<code>georank( <em>lat</em>, <em>lon</em> )</code> <a id="_georank"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} p(\text{next}_{c1},\text{next}_{c0},v_{c1},v_{c0}) &amp; \quad \text{if one arg} \\ p(\text{next}_{c1},\text{next}_{c0},lat,lon) &amp; \quad \text{if two args} \end{cases}\)
<br>
<br>
 where \( p() \) is the <code>geoprox()</code> function.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute a rank score <em>y</em> for head vertex <em>next</em> as a function of its geographic proximity to another vertex <em>v</em> or to a location given by <em>lat</em> and <em>lon</em>. The coordinates of head vertex <em>next</em> are determined by its <a href="../vertex/vertexRank.html">ranking coefficients</a> where <code>c1=latitude</code> and <code>c0=longitude</code>. When a single <em>v</em> argument is provided it is interpreted as a vertex instance whose latitude and longitude are represented by that instance&#8217;s <code>c1</code> and <code>c0</code> coefficients. When two arguments <em>lat</em> and <em>lon</em> are provided they are interpreted as the coordinates against which <em>next</em> will be compared. All values of <code>c1</code>, <code>c0</code>, <em>lat</em>, and <em>lon</em> are expressed in degrees.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Miscellaneous ranking functions</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">prox( 1000, 1050 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">0.8366</span><span class="bp">...</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">geodist( 42.3, 71.0, 35.7, -139.7 )</span><span class="sh">"</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">10797873.8</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">A</span><span class="p">.</span><span class="n">c0</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">A</span><span class="p">.</span><span class="n">c1</span> <span class="o">=</span> <span class="mf">2.5</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">rank()</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">1000.0</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">rank(10)</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">1025.0</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">rank(10,1,2)</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="mf">1032.5</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="collectorstagingfunctions">3.8.11. Collector Staging Functions</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 26.6666%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stage( [ <em>value</em>[, <em>slot</em>] ] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{if arc staged} \\ 0 &amp; \quad \text{if not staged} \\ -1 &amp; \quad \text{if error} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Store the currently traversed arc (i.e. <code>next.arc</code>) into temporary staging buffer <em>slot</em>=0. Optionally override the staged arc&#8217;s value with <em>value</em>. Optionally specify staging buffer \( slot \in \{0,1,2,3\} \).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stageif( <em>cond</em> [, <em>value</em>[, <em>slot</em>] ] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If condition <em>cond</em> is true store the currently traversed arc (i.e. <code>next.arc</code>) into temporary staging buffer <em>slot</em>=0. Optionally override the staged arc&#8217;s value with <em>value</em>. Optionally specify staging buffer \( slot \in \{0,1,2,3\} \).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unstage( [ <em>slot</em> ] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{if arc unstaged} \\ 0 &amp; \quad \text{if not unstaged} \\ -1 &amp; \quad \text{if error} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove any staged arc from selected <em>slot</em>, which defaults to 0 if not specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unstageif( <em>cond</em> [, <em>slot</em> ] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if condition <em>cond</em> is true remove any staged arc from selected <em>slot</em>, which defaults to 0 if not specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commit( [ <em>slot</em> ] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{if arc collected} \\ 0 &amp; \quad \text{if not collected} \\ -1 &amp; \quad \text{if error} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collect staged arc in selected <em>slot</em> into result set. Default <em>slot</em>=0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commitif( <em>cond</em> [, <em>slot</em> ] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is true collect staged arc in selected <em>slot</em> into result set. Default <em>slot</em>=0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collect( [ <em>value</em> ] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{if arc collected} \\ 0 &amp; \quad \text{if not collected} \\ -1 &amp; \quad \text{if error} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collect the currently traversed arc (i.e. <code>next.arc</code>) directly into the result set (bypassing any temporary staging.) Optionally override the collected arc&#8217;s value with <em>value</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectif( <em>cond</em> [, <em>value</em> ] )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If condition <em>cond</em> is true collect the currently traversed arc (i.e. <code>next.arc</code>) directly into the result set (bypassing any temporary staging.) Optionally override the collected arc&#8217;s value with <em>value</em>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example: Collect neighbor&#8217;s neighbor arc with the highest value and return the top 10 of those arcs</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
  <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
  <span class="n">hits</span>     <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
  <span class="n">neighbor</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>   <span class="p">:</span> <span class="sh">"</span><span class="s">do( store( R1, 0 ) )</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">adjacent</span><span class="sh">'</span> <span class="p">:</span> <span class="p">{</span>
      <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>      <span class="p">:</span> <span class="p">(</span> <span class="sh">"</span><span class="s">to</span><span class="sh">"</span><span class="p">,</span> <span class="n">D_OUT</span> <span class="p">),</span>
      <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>   <span class="p">:</span> <span class="sh">"""</span><span class="s">
                   void(
                       storeif(
                           stageif( next.arc.value &gt; load( R1 ) ),
                           R1,
                           next.arc.value
                       )
                   )
                   </span><span class="sh">"""</span>
    <span class="p">},</span>
    <span class="sh">'</span><span class="s">post</span><span class="sh">'</span>     <span class="p">:</span> <span class="sh">"</span><span class="s">commit()</span><span class="sh">"</span>
  <span class="p">},</span>
  <span class="n">sortby</span>   <span class="o">=</span> <span class="n">S_VAL</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="bfssupport">3.8.12. Breadth-First Search Support</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30.7692%;">
<col style="width: 23.0769%;">
<col style="width: 46.1539%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mcull( <em>score</em>, <em>k</em> )</code> <a id="_mcull"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \text{if cand.} \\ 0 &amp; \text{if not cand.} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When executed in a <code>'neighbor': {}</code> vertex condition perform exhaustive evaluation of neighborhood level before any traversal to a deeper neighborhood, constraining the number of vertices that can be anchors for deeper traversal to the at most <em>k</em> vertices with the highest (positive) numeric <em>score</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mcullif( <em>cond</em>, <em>score</em>, <em>k</em> )</code> <a id="_mcullif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as <a href="#_mcull"><code>mcull()</code></a> but with the added constraint that <em>cond</em> must be true for the vertex to be a candidate.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Use of this function is restricted to the local filter evaluator in Neighborhood()'s' <code>'neighbor': {}</code> vertex condition.</p>
</div>
<div class="paragraph">
<p>The presence of <code>mcull()</code> / <code>mcullif()</code> in a local filter changes the traversal and collection behavior from depth-first to breadth-first. The top-<em>k</em> scoring vertices in the neighborhood are selected <em>before</em> collection of vertices or traversal of vertices' next-level neighborhoods.</p>
</div>
<div class="paragraph">
<p>A return value 1 from <code>mcull()</code> does not mean the visited vertex will be in the final top <em>k</em>, only that at the time of its evaluation it is among the top <em>k</em> visited up until that point.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Collect arcs from A&#8217;s top-5 highest out-degree neighbors</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
  <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
  <span class="n">collect</span>  <span class="o">=</span> <span class="n">C_NONE</span><span class="p">,</span>
  <span class="n">neighbor</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>   <span class="p">:</span> <span class="sh">"</span><span class="s">mcull( vertex.odeg, 5 )</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">traverse</span><span class="sh">'</span> <span class="p">:</span> <span class="p">{</span>
      <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>     <span class="p">:</span> <span class="n">D_OUT</span><span class="p">,</span>
      <span class="sh">'</span><span class="s">collect</span><span class="sh">'</span> <span class="p">:</span> <span class="n">C_COLLECT</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example: Collect arcs from A&#8217;s top-5 highest out-degree neighbors, and from those neighbors' neighbors top-3 highest in-degree neighbors</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
  <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
  <span class="n">collect</span>  <span class="o">=</span> <span class="n">C_NONE</span><span class="p">,</span>
  <span class="n">neighbor</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>   <span class="p">:</span> <span class="sh">"</span><span class="s">mcull(vertex.odeg, 5)</span><span class="sh">"</span><span class="p">,</span>
    <span class="sh">'</span><span class="s">traverse</span><span class="sh">'</span> <span class="p">:</span> <span class="p">{</span>
      <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>     <span class="p">:</span> <span class="n">D_OUT</span><span class="p">,</span>
      <span class="sh">'</span><span class="s">collect</span><span class="sh">'</span> <span class="p">:</span> <span class="n">C_COLLECT</span><span class="p">,</span>
      <span class="sh">'</span><span class="s">neighbor</span><span class="sh">'</span> <span class="p">:</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">filter</span><span class="sh">'</span>   <span class="p">:</span> <span class="sh">"</span><span class="s">mcull(vertex.ideg, 3)</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">traverse</span><span class="sh">'</span> <span class="p">:</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">arc</span><span class="sh">'</span>     <span class="p">:</span> <span class="n">D_OUT</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">collect</span><span class="sh">'</span> <span class="p">:</span> <span class="n">C_COLLECT</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="evaluatormemory">4. Evaluator Memory</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="../reference.html#memoryobject">Memory arrays</a> can be used to implement advanced algorithms. By default a graph query allocates a temporary memory array for use with expressions in the query. This memory is initialized to empty before the query starts executing and is deleted once the query completes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/defaultmem.png" alt="fig_defaultmem">
</div>
<div class="title">Figure 1. Default memory array</div>
</div>
<div class="paragraph">
<p>The default memory array contains eight slots 0 - 7. The last four slots are also accessible as <a href="#evaluatormemoryregisters">Memory Registers</a> via index aliases <code>R1</code>, <code>R2</code>, <code>R3</code>, and <code>R4</code>. A virtual <a href="#evaluatormemorystack">Memory Stack</a> starts at the index labeled SP and grows downward.</p>
</div>
<div class="paragraph">
<p>Memory arrays use <a href="#evaluatormemoryindexing">modulo indexing</a> allowing both positive and negative indices, as well as indices beyond the array end points which are aliased to slots within the array.</p>
</div>
<div class="paragraph">
<p>Memory array objects can be created with <a href="../reference.html#memoryobject">pyvgx.Memory()</a> and passed to graph queries using the <a href="../graph/graphQuery.html#graphneighborhood"><code>memory=</code> query parameter</a>. Queries will then use the supplied memory array instead of the default. The memory array is not initialized by the query and will remain after the query completes. A query may read and/or modify the memory array via one or more expressions in the query. The same memory object can be passed to subsequent queries for further processing.</p>
</div>
<div class="paragraph">
<p>Memory array objects are accessible from Python as regular list objects.</p>
</div>
<div class="paragraph">
<p>Memory array objects can have any size, only limited by system resources. Size is always a power of two, 2<sup><em>p</em></sup> where <em>p</em> is the array <em>order</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/memarray.png" alt="fig_memarray">
</div>
<div class="title">Figure 2. Memory array object with 2<sup><em>p</em></sup> slots (order=<em>p</em>)</div>
</div>
<div class="listingblock">
<div class="title">Example: Create arc value histogram</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="c1"># Assumption: arc values are 0-99
# Create array with 100 slots (actual size will be 128)
</span><span class="n">mem</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span> <span class="mi">100</span> <span class="p">)</span> <span class="c1"># size rounded up to nearest power of two
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span>
    <span class="nb">id</span>     <span class="o">=</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="n">mem</span><span class="p">,</span>
    <span class="nb">filter</span> <span class="o">=</span> <span class="sh">"</span><span class="s">inc( int(.arc.value) )</span><span class="sh">"</span>
<span class="p">)</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># freq of val=0
</span><span class="n">mem</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># freq of val=1
</span><span class="n">mem</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># freq of val=2
#...
</span><span class="n">mem</span><span class="p">[</span><span class="mi">99</span><span class="p">]</span> <span class="c1"># freq of val=99</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="evaluatormemoryregisters">4.1. Memory Registers</h3>
<div class="paragraph">
<p>The last four slots in a memory object are the registers R1 - R4. There is nothing special about these slots other than the convenience of being able to reference them in expressions using predefined index constants <code>R1</code>, <code>R2</code>, <code>R3</code>, and <code>R4</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/memreg.png" alt="fig_memreg">
</div>
<div class="title">Figure 3. Four registers at end of memory array</div>
</div>
<div class="listingblock">
<div class="title">Example: Use memory registers</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span> <span class="mi">16</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">store(R1, 111)</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">store(R2, 222)</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>
<span class="n">mem</span><span class="p">[</span> <span class="n">R1</span> <span class="p">]</span>         <span class="c1"># -&gt; 111 (memory object as list)
</span><span class="n">mem</span><span class="p">.</span><span class="n">R1</span>            <span class="c1"># -&gt; 111 (memory object attribute)
</span><span class="n">mem</span><span class="p">[</span> <span class="o">-</span><span class="mi">1</span> <span class="p">]</span>         <span class="c1"># -&gt; 111 (indexing from end)
</span><span class="n">mem</span><span class="p">[</span> <span class="mi">15</span> <span class="p">]</span>         <span class="c1"># -&gt; 111 (indexing from start)
</span><span class="n">mem</span><span class="p">.</span><span class="n">R1</span> <span class="o">+</span> <span class="n">mem</span><span class="p">.</span><span class="n">R2</span>   <span class="c1"># -&gt; 333
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">load(R1)*load(R2)</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="mi">24642</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To access the contents of a register it must be dereferenced using functions like <code>load()</code>, <code>store()</code>, etc., as shown in the example above. I.e. a constant like <code>R1</code> is just the number <code>-1</code> which represents a memory address.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="evaluatormemorystack">4.2. Memory Stack</h3>
<div class="paragraph">
<p>A virtual "stack" starts just below the registers and grows downward. A <code>push</code> operation puts a value on the stack and a <code>pop</code> operation removes a value from the stack and returns it. If the stack reaches the bottom of the array (index 0) it wraps around to the top overwriting register <code>R1</code>, then <code>R2</code>, etc. Likewise, repeated <code>pop</code> operations will move the stack pointer upwards wrapping to 0 when the last index is reached. Be careful to allocate a large enough array to accommodate the algorithm using it and to ensure balanced <code>push</code> and <code>pop</code> operations.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/memstack.png" alt="fig_memstack">
</div>
<div class="title">Figure 4. Memory stack</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Using <code>push</code> and <code>pop</code> provides no protection against unbalanced calls. Make sure your algorithm is guaranteed to execute an equal number of each operation to avoid leaking the stack into other areas of the memory array you may be using for other purposes.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Using the virtual stack</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span> <span class="mi">16</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">push( 111 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">push( 222 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">push( 333 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>
<span class="n">mem</span><span class="p">[</span> <span class="mi">11</span> <span class="p">]</span>   <span class="c1"># -&gt; 111
</span><span class="n">mem</span><span class="p">[</span> <span class="mi">10</span> <span class="p">]</span>   <span class="c1"># -&gt; 222
</span><span class="n">mem</span><span class="p">[</span> <span class="mi">9</span> <span class="p">]</span>    <span class="c1"># -&gt; 333
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">pop()</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>   <span class="o">-&gt;</span> <span class="mi">333</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">pop()</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>   <span class="o">-&gt;</span> <span class="mi">222</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">pop()</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>   <span class="o">-&gt;</span> <span class="mi">111</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluatormemoryindexing">4.3. Memory Indexing</h3>
<div class="paragraph">
<p>Memory arrays are modulo indexed, protecting system memory from invalid access and allowing negative indices to reference the array relative to its end. Although primarily included as a safeguard against invalid memory access you may find modulo indexing to be a useful feature when implementing certain algorithms.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/moduloindexing.png" alt="fig_moduloindexing">
</div>
<div class="title">Figure 5. Memory array slots have multiple aliases due to modulo indexing</div>
</div>
<div class="listingblock">
<div class="title">Example: Modulo indexing</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span> <span class="mi">16</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">store( 3, 555 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">load( 3 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>    <span class="o">-&gt;</span>   <span class="mi">555</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">load( 19 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>    <span class="o">-&gt;</span>   <span class="mi">555</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">load( -13 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span>     <span class="o">-&gt;</span>   <span class="mi">555</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To restrict the indexing span to a sub-range of the array use <a href="#_modindex">the <code>modindex()</code> function</a> to compute the array index.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="evaluatormemorypython">4.4. Memory Python Interface for Assignment and Lookup</h3>
<div class="paragraph">
<p>The <a href="../reference.html#memoryobject">Python interface for accessing <code>pyvgx.Memory</code> elements</a> is similar to <code>list</code>. Lookup and assignment use the standard array subscript syntax <code>[n]</code> and slice syntax <code>[a:b]</code>.</p>
</div>
<div class="sect3">
<h4 id="evaluatormemorysubscript">4.4.1. Memory Subscript</h4>
<div class="paragraph">
<p>For subscript syntax <code>[n]</code> the behavior is the same as for <code>list</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Memory subscript and value types (assignment)</caption>
<colgroup>
<col style="width: 35.2941%;">
<col style="width: 17.647%;">
<col style="width: 17.647%;">
<col style="width: 29.4119%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Syntax</th>
<th class="tableblock halign-left valign-top">Python Value Type</th>
<th class="tableblock halign-left valign-top">Stored Value Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ] = <em>value</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>integer</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign an integer <em>value</em> to memory location <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ] = <em>value</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>real</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign a real <em>value</em> to memory location <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ] = <em>value</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign a string <em>value</em> to memory location <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ] = <em>value</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>pyvgx.Vector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>vector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign a <em>vector</em> object to memory location <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ] = [ <em>value</em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>int</em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bitvector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign integer <em>value</em> as a 64-bit bitvector to memory location <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ] = ( <em>key</em>, <em>value</em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">( <em>int</em>, <em>float</em> )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>keyval</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign a <em>keyval</em> tuple to memory location <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ] = bytearray( <em>list</em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bytearray</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">raw bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign an array of raw (unsigned) bytes to memory location <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ] = bytes( <em>data</em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bytes</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">raw bytes (immutable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign an immutable array of (unsigned) bytes to memory location <em>n</em></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Memory subscript and value types (lookup)</caption>
<colgroup>
<col style="width: 17.647%;">
<col style="width: 35.2941%;">
<col style="width: 17.647%;">
<col style="width: 29.4119%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Syntax</th>
<th class="tableblock halign-left valign-top">When Stored Value Type Is&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Python Value Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>integer</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve an integer value from memory location <em>n</em> as a Python <em>int</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>real</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>float</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve a real value from memory location <em>n</em> as a Python <em>float</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>str</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve a string value from memory location <em>n</em> as a Python <em>str</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>vector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>pyvgx.Vector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve a vector object from memory location <em>n</em> as pyvgx.Vector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bitvector</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>int</em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve a bitvector from memory location <em>n</em> as a Python <em>list</em> with a single <em>int</em> value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>keyval</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">( <em>int</em>, <em>float</em> )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve a keyval from memory location <em>n</em> as a Python <em>tuple</em> with a 32-bit integer key and a single precision float value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">raw bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bytearray</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve a sequence of raw bytes from memory location <em>n</em> as a Python <em>bytearray</em> object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>n</em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">raw bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>bytes</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve an array of bytes from memory location <em>n</em> as a Python <em>bytes</em> object</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Memory indexing</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1234</span>      <span class="c1"># Assign 1234 to memory location 10
</span><span class="n">mem</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.14</span>      <span class="c1"># Assign 3.14 to memory location 11
</span><span class="n">mem</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="sh">"</span><span class="s">hello</span><span class="sh">"</span>   <span class="c1"># Assign string "hello" to memory location 13
</span><span class="n">mem</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mh">0xFF00</span><span class="p">]</span>  <span class="c1"># Assign bitvector 0xFF00 to memory location 12
</span><span class="n">mem</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mf">1.7</span><span class="p">)</span> <span class="c1"># Assign keyval 42:1.7 to memory location 14
</span><span class="n">mem</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="o">=</span> <span class="nf">bytearray</span><span class="p">(</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">50</span><span class="p">]</span> <span class="p">)</span> <span class="c1"># Assign raw bytes to mem 15
</span><span class="n">mem</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span> <span class="o">=</span> <span class="nf">bytes</span><span class="p">(</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span> <span class="p">)</span> <span class="c1"># Assign raw bytes to mem 16
</span><span class="n">mem</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">sim</span><span class="p">.</span><span class="nf">rvec</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span> <span class="c1"># Assign random vector to mem 17
</span>
<span class="c1"># int
</span><span class="nf">list</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="p">)</span>       <span class="c1"># &lt;class 'int'&gt;
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="p">)</span>      <span class="c1"># 1234
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="o">-</span><span class="mi">22</span><span class="p">]</span> <span class="p">)</span>     <span class="c1"># 1234 (modulo indexing)
</span>
<span class="c1"># float
</span><span class="nf">type</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="p">)</span>       <span class="c1"># &lt;class 'float'&gt;
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="p">)</span>      <span class="c1"># 3.14
</span>
<span class="c1"># str
</span><span class="nf">type</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="p">)</span>       <span class="c1"># &lt;class 'str'&gt;
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="p">)</span>      <span class="c1"># hello
</span>
<span class="c1"># bitvector
</span><span class="nf">type</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="p">)</span>       <span class="c1"># &lt;class 'list'&gt;
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="p">)</span>      <span class="c1"># [65280]
</span>
<span class="c1"># key/val
</span><span class="nf">type</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="p">)</span>       <span class="c1"># &lt;class 'tuple'&gt;
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="p">)</span>      <span class="c1"># (42, 1.7000000476837158)
</span>
<span class="c1"># bytearray
</span><span class="nf">type</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="p">)</span>       <span class="c1"># &lt;class 'bytearray'&gt;
</span><span class="nf">list</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="p">)</span>       <span class="c1"># [10, 20, 0, 0, 50]
</span>
<span class="c1"># bytes
</span><span class="nf">type</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span> <span class="p">)</span>       <span class="c1"># &lt;class 'bytes'&gt;
</span><span class="nf">list</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span> <span class="p">)</span>       <span class="c1"># [1,2,3,4]
</span>
<span class="c1"># vector
</span><span class="nf">type</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="p">)</span>       <span class="c1"># &lt;class 'pyvgx.Vector'&gt;
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="p">)</span>      <span class="c1"># &lt;PyVGX_Vector: ...&gt;
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="evaluatormemoryslice">4.4.2. Memory Slice</h4>
<div class="paragraph">
<p>For slice syntax <code>[a:b]</code> the behavior is the same as for <code>list</code> with the exception of assignment which differs when the assignment list is smaller than the slice. The memory object is updated by applying the new values starting from the beginning of the slice and leaving the end of the slice unmodified. The behavior of <code>list</code> is to replace the entire slice with the new assigned values.</p>
</div>
<div class="paragraph">
<p>Just as for <code>list</code> slices may omit either end point, and negative indices reference backwards from the end.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Memory slice and value types</caption>
<colgroup>
<col style="width: 38.4615%;">
<col style="width: 30.7692%;">
<col style="width: 30.7693%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Syntax</th>
<th class="tableblock halign-left valign-top">Value Types</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>a:b</em> ] = [ <em>v<sub>1</sub></em>,<em>v<sub>2</sub></em>,&#8230;&#8203;,<em>v<sub>n</sub></em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em> &#8594; <em>integer</em>
<br>
 <em>float</em> &#8594; <em>real</em>
<br>
 <em>str</em> &#8594; <em>string</em>
<br>
 [<em>int</em>] &#8594; <em>bitvector</em>
<br>
 (<em>int</em>,<em>float</em>) &#8594; <em>keyval</em>
<br>
 <em>bytearray</em> &#8594; raw bytes
<br>
 <em>bytes</em> &#8594; raw bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign values <em>v<sub>1</sub></em> through <em>v<sub>n</sub></em> to memory locations starting at <em>a</em>. If <em>n &lt; b - a</em> the end of the memory slice remains unaffected. (This behavior is different from Python <code>list</code>.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memobj[ <em>a:b</em> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em> &#8592; <em>integer</em>
<br>
 <em>float</em> &#8592; <em>real</em>
<br>
 <em>str</em> &#8592; <em>string</em>
<br>
 [<em>int</em>] &#8592; <em>bitvector</em>
<br>
 (<em>int</em>,<em>float</em>) &#8592; <em>keyval</em>
<br>
 <em>bytearray</em> &#8592; raw bytes
<br>
 <em>bytes</em> &#8592; raw bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a list of values from memory locations <em>a</em> through <em>b - 1</em>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Memory slices</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">44</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mf">7.89</span><span class="p">]</span>  <span class="c1"># Assign multiple values to slice
</span><span class="n">mem</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">444</span><span class="p">,</span><span class="mi">555</span><span class="p">]</span>        <span class="c1"># Partial slice assignment
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span> <span class="p">)</span>           <span class="c1"># [444, 555, 66, 7.89]
</span>
<span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[:]</span> <span class="p">)</span>             <span class="c1"># [0, 0, 0, 0, 444, 555, 66, 7.89]
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span> <span class="p">)</span>            <span class="c1"># [0, 0, 0, 0, 444]
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span> <span class="p">)</span>            <span class="c1"># [0, 444, 555, 66, 7.89]
</span><span class="nf">print</span><span class="p">(</span> <span class="n">mem</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span>           <span class="c1"># [0, 0, 0, 0, 444, 555]</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="evaluatormemoryinit">4.4.3. Memory Initialization</h4>
<div class="paragraph">
<p>New memory objects can be initialized to specific values by passing an initializer list to the constructor. An existing memory object can have all its elements reset to a certain constant value or range of values.</p>
</div>
<div class="listingblock">
<div class="title">Memory object initialization and reset</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="c1"># Construct using initializer
</span><span class="n">mem</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">]</span> <span class="p">)</span>
<span class="c1"># [100, 1, 1, 1, 50, 0, 0, 0]
</span><span class="nf">len</span><span class="p">(</span> <span class="n">mem</span> <span class="p">)</span> <span class="c1"># 8, smallest power of two to hold initializer
</span>
<span class="c1"># Reset all elements to zero
</span><span class="n">mem</span><span class="p">.</span><span class="nc">Reset</span><span class="p">()</span>
<span class="c1"># [0, 0, 0, 0, 0, 0, 0, 0]
</span>
<span class="c1"># Reset all elements to 2.5
</span><span class="n">mem</span><span class="p">.</span><span class="nc">Reset</span><span class="p">(</span> <span class="mf">2.5</span> <span class="p">)</span>
<span class="c1"># [2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5]
</span>
<span class="c1"># Reset elements to a range
</span><span class="n">mem</span><span class="p">.</span><span class="nc">Reset</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span> <span class="p">)</span> <span class="c1"># First value is 1, step is 5
# [1, 6, 11, 16, 21, 26, 31, 36]</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="evaluatormemorysort">4.4.4. Memory Sort</h4>
<div class="paragraph">
<p>Memory objects can be sorted. It is possible to sort the entire array or a specific range within the array. The element comparator used for sorting is automatically chosen by the type of the first element in the range to be sorted.</p>
</div>
<div class="listingblock">
<div class="title">Memory sorting</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span> <span class="mi">32</span> <span class="p">)</span>

<span class="c1"># Randomize 16 elements 0 through 15
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">mrandomize(0,15)</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span>

<span class="c1"># Sort 16-element range 0 through 15
</span><span class="n">mem</span><span class="p">.</span><span class="nc">Sort</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">16</span> <span class="p">)</span>

<span class="c1"># Reverse sort
</span><span class="n">mem</span><span class="p">.</span><span class="nc">Sort</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span> <span class="p">)</span>

<span class="c1"># Sort 28 non-register elements
</span><span class="n">mem</span><span class="p">.</span><span class="nc">Sort</span><span class="p">()</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="evaluatormemoryvaluetypes">4.4.5. A Note on Memory Value Types</h4>
<div class="paragraph">
<p>Although memory objects internally can hold elements of <a href="#evaluatordatatypes">any type supported by the evaluator engine</a>, the only element types accessible by the Python interpreter are <em>integer</em>, <em>real</em>, <em>string</em>, <em>bitvector</em>, <em>keyval</em>, <em>bytearray</em> and <em>bytes</em> which map to Python types or objects <code>int</code>, <code>float</code>, <code>str</code>, <code>[int]</code>, <code>(int,float)</code>, <code>bytearray</code> and <code>bytes</code>, respectively. Element types <em>null</em>, <em>nan</em> and <em>inf</em> in memory objects are accessed by the Python interpreter as Python type <code>float</code> with values <em>nan</em>, <em>nan</em> and <em>inf</em>, respectively.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>integer</em></dt>
<dd>
<p>Maps directly to Python <code>int</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">123</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isint(load(0))</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="mi">123</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><em>real</em></dt>
<dd>
<p>Maps directly to Python <code>float</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.14</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isreal(load(1))</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="mf">3.14</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><em>string</em></dt>
<dd>
<p>This type is interpreted differently in different contexts. When accessing a Python memory object the evaluator <em>string</em> type maps directly to Python <code>str</code> with implicit UTF-8 encoding internally. When the evaluator engine executes an expression the <em>string</em> type also encompasses the <em>bytearray</em> and <em>bytes</em> types, i.e. the execution engine treats <em>bytearray</em> and <em>bytes</em> as subtypes of <em>string</em>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="sh">'</span><span class="s">hello</span><span class="sh">'</span>
<span class="n">g</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isstr(load(2))</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="sh">'</span><span class="s">hello</span><span class="sh">'</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><em>bitvector</em></dt>
<dd>
<p>This is a pseudo-type represented by a single-element Python <code>list</code> where the element is a Python <code>int</code>. Bitvectors are assigned as <code>mem[<em>n</em>] = [<em>bv</em>]</code>. When retrieving the bitvector value it is returned as a singleton list <code>[<em>bv</em>]</code>. Evaluator expressions can also assign bitvectors, e.g. <code>"store( 0, bitvector( 0xFF00 ) )"</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mh">0xfff</span><span class="p">]</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isbitvector(load(3))</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="mi">4095</span><span class="p">]</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><em>keyval</em></dt>
<dd>
<p>This is a pseudo-type represented by a two-element Python <code>tuple</code> where the first element is a Python <code>int</code> and the second element is a Python <code>float</code>. Keyval items are assigned as <code>mem[<em>n</em>] = (<em>key</em>, <em>value</em>)</code>. Note that <em>key</em> has a 32-bit range and <em>value</em> is truncated to single precision internally.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">123</span><span class="p">,</span><span class="mf">3.14</span><span class="p">)</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">iskeyval(load(4))</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="mi">123</span><span class="p">,</span> <span class="mf">3.140000104904175</span><span class="p">)</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><em>bytearray</em> and <em>bytes</em></dt>
<dd>
<p>These types are applicable only when interacting with memory objects from Python. The Python <code>bytearray</code> and <code>bytes</code> types are internally represented as subtypes of <em>string</em>, which means that evaluator expressions operate on all string data as arrays of bytes. When assigning to a memory location as <code>mem[<em>n</em>] = bytearray( &#8230;&#8203; )</code> or <code>mem[<em>n</em>] = bytes( &#8230;&#8203; )</code> the internal object is <em>string</em> with attributes indicating the subtype.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nf">bytearray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isbytearray(load(5))</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isstr(load(5))</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="nf">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="sh">'</span><span class="se">\x01\x02\x03</span><span class="sh">'</span><span class="p">)</span>

<span class="n">mem</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="nf">bytes</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isbytes(load(6))</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isstr(load(6))</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="sa">b</span><span class="sh">'</span><span class="se">\x01\x02\x03</span><span class="sh">'</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><em>null</em>, <em>nan</em>, <em>inf</em></dt>
<dd>
<p>These types indicating "no value" in various contexts are all interpreted as Python <code>float</code> when retrieved from memory objects. They cannot be set from Python.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">store(7,null)</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span>
<span class="nf">type</span><span class="p">(</span><span class="n">mem</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">float</span><span class="sh">'</span><span class="s">&gt;
mem[7] -&gt; nan

graph.Evaluate( </span><span class="sh">"</span><span class="s">store(8,nan)</span><span class="sh">"</span><span class="s">, memory=mem ) -&gt; nan
type(mem[8]) -&gt; &lt;class </span><span class="sh">'</span><span class="nb">float</span><span class="sh">'</span><span class="s">&gt;
mem[8] -&gt; nan

graph.Evaluate( </span><span class="sh">"</span><span class="s">store(9,inf)</span><span class="sh">"</span><span class="s">, memory=mem ) -&gt; inf
type(mem[9]) -&gt; &lt;class </span><span class="sh">'</span><span class="nb">float</span><span class="sh">'</span><span class="s">&gt;
mem[9] -&gt; inf</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><em>vector</em></dt>
<dd>
<p>Maps directly to Python <code>pyvgx.Vector</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="n">sim</span><span class="p">.</span><span class="nf">rvec</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isvector(load(10))</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">mem</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">true</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="sh">'</span><span class="s">&lt;PyVGX_Vector: typ=euclidean len=128 mag=6.948...</span><span class="sh">'</span></code></pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="evaluatormemory_note_on_strings">4.4.6. A note about strings and vectors in evaluator expressions</h4>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>String and vector objects can be assigned to memory locations from within expressions and from the Python interpreter. The <code>pyvgx.Memory</code> instance becomes an owner of the assigned object, either by creating a copy or by owning an additional reference.</p>
</div>
<div class="paragraph">
<p>String and vector objects are retained by the <code>pyvgx.Memory</code> associated with the expression being evaluated. Each time a string-generating function (such as <code>str()</code> or <code>replace()</code>) is used, or a string or vector object is assigned to a memory location, the <code>pyvgx.Memory</code> instance will accumulate ownership of assigned objects even if the memory location is later overwritten by another value.</p>
</div>
<div class="paragraph">
<p>If a memory instance is long-lived manual cleanup of strings and vectors is required to avoid unbounded buildup of objects that are no longer in use. Cleanup is performed explicitly via <code>pyvgx.Memory.Reset()</code> or evaluator function <a href="#_mreset"><code>"mreset()"</code></a>. (Cleanup is automatic when the <code>pyvgx.Memory</code> instance itself is deleted.)</p>
</div>
<div class="paragraph">
<p>Note that copying existing strings or vectors between memory locations <em>does not</em> create new instances or additional ownership when performed by an expression. For instance, <code>"store( 0, str('hello') ); mov( 1, 0 )"</code> creates one new string object referenced from two separate memory locations, i.e. locations 0 and 1 point to the same string object owned <em>once</em> by the memory object. (Python interpreter copy (e.g. <code>mem[1] = mem[0]</code>) is normal assignment and therefore creates new object ownership each time.)</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Value Types</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">mem</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span> <span class="mi">16</span> <span class="p">)</span>

<span class="n">mem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0xFF0000</span>     <span class="c1"># Type is integer
</span><span class="n">mem</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="mh">0xFF0000</span> <span class="p">]</span> <span class="c1"># Type is bitvector
</span><span class="n">mem</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.14</span>         <span class="c1"># Type is real
</span><span class="n">mem</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span>      <span class="c1"># Type is string
</span><span class="n">mem</span><span class="p">.</span><span class="n">R1</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">sim</span><span class="p">.</span><span class="nf">rvec</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span> <span class="c1"># Type is vector
</span><span class="n">mem</span><span class="p">.</span><span class="n">R2</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="n">sim</span><span class="p">.</span><span class="nf">rvec</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span> <span class="c1"># Type is vector
</span>
<span class="n">mem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                <span class="c1"># -&gt; 16711680
</span><span class="n">mem</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>                <span class="c1"># -&gt; [16711680]
</span><span class="n">mem</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>                <span class="c1"># -&gt; 3.14
</span><span class="n">mem</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>                <span class="c1"># -&gt; 'Alice'
</span><span class="n">mem</span><span class="p">.</span><span class="n">R1</span>                <span class="c1"># -&gt; &lt;PyVGX_Vector: ...&gt;
</span><span class="n">mem</span><span class="p">.</span><span class="n">R2</span>                <span class="c1"># -&gt; &lt;PyVGX_Vector: ...&gt;
</span>
<span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isbitvector( load(0) )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span> <span class="c1"># -&gt; 0
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isbitvector( load(1) )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span> <span class="c1"># -&gt; 1
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">mul( 2, 10 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span>           <span class="c1"># -&gt; 31.4
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">load( 3 ) == </span><span class="sh">'</span><span class="s">Ali*</span><span class="sh">'</span><span class="s">  </span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span>  <span class="c1"># -&gt; 1
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">store( 4, </span><span class="sh">'</span><span class="s">Bob</span><span class="sh">'</span><span class="s"> )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span>      <span class="c1"># -&gt; 'Bob'
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">mov( 5, 3 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span>            <span class="c1"># -&gt; 'Alice'
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">mov( 6, 4 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span>            <span class="c1"># -&gt; 'Bob'
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">isvector(r1)</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span>           <span class="c1"># -&gt; 1
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">cosine(r1,r2)</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span>          <span class="c1"># -&gt; 0.02157
</span>
<span class="c1"># Strings 'Alice' and 'Bob', and vectors are now deleted
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">mreset()</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span> <span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="evaluatormemoryreference">5. Memory Operation Reference</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#evaluatormemorysingle">Operations on Single Memory Locations</a></p>
</li>
<li>
<p><a href="#evaluatormemory_multiple">Operations on Multiple Memory Locations</a></p>
</li>
<li>
<p><a href="#evaluator_specialpurpose">Special Purpose Operations</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_notation_conventions">5.1. Notation Conventions</h3>
<div class="paragraph">
<p>The following notation is used to describe operations listed in all tables below.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This notation is for describing how functions work, and has no relation to expression syntax.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Simple Assignment <code>:=</code></dt>
<dd>
<p>The simple assignment operator <code>:=</code> assigns the right operand to the left operand. For example, to indicate assignment of value <em>x</em> to memory location <em>a</em> we write <code>[ <em>a</em> ] := <em>x</em></code>.</p>
</dd>
<dt class="hdlist1">Operator Assignment <code>&lt;op&gt;=</code></dt>
<dd>
<p>When the value of a left operand is modified by the right operand the general <code>&lt;op&gt;=</code> syntax is used, such as <code>+=</code>, <code>/=</code>, <code>&gt;&gt;=</code>, etc. For example <code>[ <em>addr</em> ] /= <em>x</em></code> means the value at location <em>addr</em> is divided by <em>x</em> and the result written back to location <em>addr</em>.</p>
</dd>
<dt class="hdlist1">Exchange <code>:=:</code></dt>
<dd>
<p>The exchange operator <code>:=:</code> swaps the two operands. For example, <code>[ <em>a</em> ] :=: [ <em>b</em> ]</code> means the values at memory locations <em>a</em> and <em>b</em> are swapped.</p>
</dd>
<dt class="hdlist1">Dereference <code>[]</code></dt>
<dd>
<p>Dereference notation <code>[ <em>addr</em> ]</code> is used to represent the contents at memory address <em>addr</em>.</p>
</dd>
<dt class="hdlist1">Double Dereference <code>[[]]</code></dt>
<dd>
<p>Double dereference notation <code>[[ <em>addr</em> ]]</code> is used to represent the contents at address stored at address <em>addr</em>. For example, <code>[[ <em>a</em> ]] := <em>x</em></code> means the value <em>x</em> is written to memory location stored in location <em>a</em>. As a concrete example, if <code><em>a</em> = 1000</code> and the value <code>50</code> is stored in location <code>1000</code> then <code>[[ <em>a</em> ]] = 7</code> will assign <code>7</code> to location <code>50</code>.</p>
</dd>
<dt class="hdlist1">Range Dereference <code>[:]</code></dt>
<dd>
<p>Dereference notation <code>[ <em>a</em> : <em>b</em> ]</code> is used to indicate the contents of a range of addresses starting at address <em>a</em> and ending at address <em>b</em>, both endpoints included. For example, to assign value <em>x</em> to all memory locations starting at <em>a</em> and ending at <em>b</em> we write <code>[ <em>a</em> : <em>b</em> ] := <em>x</em></code> When the right operand is or includes a range the right element <em>i</em> is assigned to left element <em>i</em>. For example, <code>[ <em>a</em> : <em>b</em> ] := <em>operation</em>( [ <em>a</em> : <em>b</em> ] )</code> means the operation is applied to each element starting at location <em>a</em> and ending at location <em>b</em>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Operations taking a memory range input are <strong>inclusive of the end index</strong>. (This is different from how ranges are processed by the Python interpreter, where the end index is not included.) Negative indices are allowed. They count backwards from the element just beyond the end of the memory array, i.e. index <code>-1</code> references the very last element.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="evaluatormemorysingle">5.2. Operations on Single Memory Locations</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Quick Links</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top">Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemorystoreload">Storing and Loading</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>store()</code>, <code>write()</code>, <code>load()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemorystackops">Stack</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>push()</code>, <code>pop()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemorymovingdata">Moving Data</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mov()</code>, <code>xchg()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemoryincdec">Increment and Decrement</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inc()</code>, <code>dec()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemorycomparator">Comparator</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>equ()</code>, <code>neq()</code>, <code>gt()</code>, <code>lte()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemoryarithmetic">Arithmetic</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>add()</code>, <code>sub()</code>, <code>mul()</code>, <code>div()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemorybitwise">Bitwise</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shr()</code>, <code>shl()</code>, <code>and()</code>, <code>or()</code>, <code>xor()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemoryvector">Vector Arithmetic</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dp_pi8()</code>, <code>cos_pi8()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemoryvarious">Various Functions</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>smooth()</code>, <code>count()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemoryindexingop">Indexing</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>modindex()</code>, <code>index()</code>, etc.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="evaluatormemorystoreload">5.2.1. Storing and Loading</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Storing and Loading</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 28.8888%;">
<col style="width: 11.1111%;">
<col style="width: 26.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Store</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>store( <em>dest</em>, <em>x</em> )</code> <a id="_store"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>] := <em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign numeric value <em>x</em> to memory location <em>dest</em> and return <em>x</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rstore( <em>pdest</em>, <em>x</em> )</code> <a id="_rstore"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93; := <em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign numeric value <em>x</em> to memory location pointed to by address in <em>pdest</em> and return <em>x</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storeif( <em>cond</em>, <em>dest</em>, <em>x</em> )</code> <a id="_storeif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>] := <em>x</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero assign numeric value <em>x</em> to memory location <em>dest</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rstoreif( <em>cond</em>, <em>pdest</em>, <em>x</em> )</code> <a id="_rstoreif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93; := <em>x</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero assign numeric value <em>x</em> to memory location pointed to by address in <em>pdest</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Write</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>write( <em>dest<sub>1</sub></em>, <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_write"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest<sub>1</sub></em> : <em>dest<sub>n</sub></em>] := <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign <em>n</em> numeric values <em>x<sub>1</sub></em> through <em>x<sub>n</sub></em> to a range of consecutive destinations starting at <em>dest<sub>1</sub></em>. The number <em>n</em> of values to write equals the number of value arguments <em>x<sub>i</sub></em> and therefore <em>dest<sub>n</sub></em> is implied. If the end of the memory array is reached during writing, the next destination will be index 0 and writing continues until all <em>x<sub>i</sub></em> have been written.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>writeif( <em>cond</em>, <em>dest<sub>1</sub></em>, <em>x<sub>1</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_writeif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest<sub>1</sub></em> : <em>dest<sub>n</sub></em>] := <em>x<sub>1</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero the remaining arguments are passed to <code>write()</code>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rwrite( <em>pdest</em>, <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_rwrite"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[[<em>pdest</em>]&#43;&#43;] := <em>x<sub>1</sub></em>
<br>
 [[<em>pdest</em>]&#43;&#43;] := <em>x<sub>2</sub></em>
<br>
 &#8230;&#8203;
<br>
 [[<em>pdest</em>]&#43;&#43;] := <em>x<sub>n</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign <em>n</em> numeric values <em>x<sub>1</sub></em> through <em>x<sub>n</sub></em> to a range of consecutive destinations starting at the index referenced by <em>pdest</em>, incrementing the index in <em>pdest</em> after each iteration. If the end of the memory array is reached during writing, modulo indexing ensures the next destination will be index 0 and writing continues until all <em>x<sub>i</sub></em> have been written. The value in <em>pdest</em> will have been incremented by <em>n</em> after the operation completes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rwriteif( <em>cond</em>, <em>pdest</em>, <em>x<sub>1</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_rwriteif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is true then:
<br>
 [[<em>pdest</em>]&#43;&#43;] := <em>x<sub>1</sub></em>
<br>
 [[<em>pdest</em>]&#43;&#43;] := <em>x<sub>2</sub></em>
<br>
 &#8230;&#8203;
<br>
 [[<em>pdest</em>]&#43;&#43;] := <em>x<sub>n</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero the remaining arguments are passed to <code>rwrite()</code>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Load</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>load( <em>src</em> )</code> <a id="_load"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>src</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>src</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return value at memory location <em>src</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rload( <em>psrc</em> )</code> <a id="_rload"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>psrc</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>psrc</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return value at memory location pointed to by <em>psrc</em></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemorystackops">5.2.2. Stack</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Stack</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>push( <em>x</em> )</code> <a id="_push"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>stackptr</em>] := <em>x</em>, <em>stackptr</em> &#8722;= 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Push numeric value <em>x</em> onto stack and return <em>x</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pushif( <em>cond</em>, <em>x</em> )</code> <a id="_pushif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if <em>cond</em> == true then
<br>
[<em>stackptr</em>] := <em>x</em>, <em>stackptr</em> &#8722;= 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero push numeric value <em>x</em> onto stack. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pop()</code> <a id="_pop"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>stackptr</em> += 1, <em>x</em> := [<em>stackptr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop value from stack and return it</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get()</code> <a id="_get"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x</em> := [<em>stackptr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return value at top of stack without popping</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemorymovingdata">5.2.3. Moving Data</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Moving Data</caption>
<colgroup>
<col style="width: 31.9148%;">
<col style="width: 29.7872%;">
<col style="width: 12.7659%;">
<col style="width: 25.5321%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Copy</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mov( <em>dest</em>, <em>src</em> )</code> <a id="_mov"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>] := [<em>src</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy the value at memory location <em>src</em> into memory location <em>dest</em> and return the copied value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rmov( <em>pdest</em>, <em>psrc</em> )</code> <a id="_rmov"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93; := &#91;&#91; <em>psrc</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy the value at memory location pointed to by address in <em>psrc</em> into memory location pointed to by address in <em>pdest</em> and return the copied value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>movif( <em>cond</em>, <em>dest</em>, <em>src</em> )</code> <a id="_movif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>] := [<em>src</em>]
<br>
 if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero copy the value at memory location <em>src</em> into memory location <em>dest</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rmovif( <em>cond</em>, <em>pdest</em>, <em>psrc</em> )</code> <a id="_rmovif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93; :=&#91;&#91; <em>psrc</em> &#93;&#93;
<br>
 if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero copy the value at memory location pointed to by address in <em>psrc</em> into memory location pointed to by address in <em>pdest</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Exchange</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xchg( <em>m<sub>1</sub></em>, <em>m<sub>2</sub></em> )</code> <a id="_xchg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>m<sub>1</sub></em>] :=: [<em>m<sub>2</sub></em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>m<sub>1</sub></em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exchange the values at memory locations <em>m<sub>1</sub></em> and <em>m<sub>2</sub></em> and return the value at location <em>m<sub>1</sub></em> after the exchange (i.e. the value originally in <em>m<sub>2</sub></em>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rxchg( <em>pm<sub>1</sub></em>, <em>pm<sub>2</sub></em> )</code> <a id="_rxchg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pm<sub>1</sub></em> &#93;&#93; :=: &#91;&#91; <em>pm<sub>2</sub></em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pm<sub>1</sub></em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exchange the values at memory locations pointed to by addresses in <em>pm<sub>1</sub></em> and <em>pm<sub>2</sub></em> and return the value at location pointed to by address in <em>pm<sub>1</sub></em> after the exchange (i.e. the value originally pointed to by address in <em>pm<sub>2</sub></em>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xchgif( <em>cond</em>, <em>m<sub>1</sub></em>, <em>m<sub>2</sub></em> )</code> <a id="_xchgif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>m<sub>1</sub></em>] :=: [<em>m<sub>2</sub></em>]
<br>
 if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero exchange the values at memory locations <em>m<sub>1</sub></em> and <em>m<sub>2</sub></em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rxchgif( <em>cond</em>, <em>pm<sub>1</sub></em>, <em>pm<sub>2</sub></em> )</code> <a id="_rxchgif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pm<sub>1</sub></em> &#93;&#93; :=:&#91;&#91; <em>pm<sub>2</sub></em> &#93;&#93;
<br>
 if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero exchange the values at memory locations pointed to by addresses in <em>pm<sub>1</sub></em> and <em>pm<sub>2</sub></em>. Always returns <em>cond</em>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemoryincdec">5.2.4. Increment and Decrement</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Increment and Decrement</caption>
<colgroup>
<col style="width: 31.25%;">
<col style="width: 31.25%;">
<col style="width: 12.5%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Increment</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inc( <em>dest</em> )</code> <a id="_inc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>] += 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increment value at memory location <em>dest</em> and return the new value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rinc( <em>pdest</em> )</code> <a id="_rinc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93; += 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increment value at memory location pointed to by address in <em>pdest</em> and return the new value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>incif( <em>cond</em>, <em>dest</em> )</code> <a id="_incif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>] += 1 if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero increment value at memory location <em>dest</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rincif( <em>cond</em>, <em>pdest</em> )</code> <a id="_rincif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93; += 1 if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero increment value at memory location pointed to by address in <em>pdest</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Decrement</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dec( <em>dest</em> )</code> <a id="_dec"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>] &#8722;= 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrement value at memory location <em>dest</em> and return the new value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rdec( <em>pdest</em> )</code> <a id="_rdec"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93; &#8722;= 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrement value at memory location pointed to by address in <em>pdest</em> and return the new value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>decif( <em>cond</em>, <em>dest</em> )</code> <a id="_decif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>] &#8722;= 1 if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if <em>cond</em> is nonzero decrement value at memory location <em>dest</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rdecif( <em>cond</em>, <em>pdest</em> )</code> <a id="_rdecif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#91;&#91; <em>pdest</em> &#93;&#93; &#8722;= 1 if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if <em>cond</em> is nonzero decrement value at memory location pointed to by address in <em>pdest</em>. Always returns <em>cond</em>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemorycomparator">5.2.5. Comparator</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Comparator</caption>
<colgroup>
<col style="width: 23.2558%;">
<col style="width: 23.2558%;">
<col style="width: 6.9767%;">
<col style="width: 46.5117%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Equality</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>equ( <em>a</em>, <em>b</em> )</code> <a id="_equ"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := [<em>a</em>] == [<em>b</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if items in memory locations <em>a</em> and <em>b</em> compare equal, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requ( <em>pa</em>, <em>pb</em> )</code> <a id="_requ"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := &#91;&#91; <em>pa</em> &#93;&#93; == &#91;&#91; <em>pb</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if items pointed to by addresses in memory locations <em>pa</em> and <em>pb</em> compare equal, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>neq( <em>a</em>, <em>b</em> )</code> <a id="_neq"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := [<em>a</em>] != [<em>b</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if items in memory locations <em>a</em> and <em>b</em> compare not equal, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rneq( <em>pa</em>, <em>pb</em> )</code> <a id="_rneq"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := &#91;&#91; <em>pa</em> &#93;&#93; != &#91;&#91; <em>pb</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if items pointed to by addresses in memory locations <em>pa</em> and <em>pb</em> compare not equal, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Greater</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gt( <em>a</em>, <em>b</em> )</code> <a id="_gt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := [<em>a</em>] &gt; [<em>b</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if item in memory location <em>a</em> compares greater than item in memory location <em>b</em>, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rgt( <em>pa</em>, <em>pb</em> )</code> <a id="_rgt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := &#91;&#91; <em>pa</em> &#93;&#93; &gt; &#91;&#91; <em>pb</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if item pointed to by address in memory location <em>pa</em> compares greater than item pointed to by address in memory location <em>pb</em>, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gte( <em>a</em>, <em>b</em> )</code> <a id="_gte"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := [<em>a</em>] &gt;= [<em>b</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if item in memory location <em>a</em> compares greater than or equal to item in memory location <em>b</em>, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rgte( <em>pa</em>, <em>pb</em> )</code> <a id="_rgte"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := &#91;&#91; <em>pa</em> &#93;&#93; &gt;= &#91;&#91; <em>pb</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if item pointed to by address in memory location <em>pa</em> compares greater than or equal to item pointed to by address in memory location <em>pb</em>, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Less</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lt( <em>a</em>, <em>b</em> )</code> <a id="_lt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := [<em>a</em>] &lt; [<em>b</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if item in memory location <em>a</em> compares less than item in memory location <em>b</em>, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rlt( <em>pa</em>, <em>pb</em> )</code> <a id="_rlt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := &#91;&#91; <em>pa</em> &#93;&#93; &lt; &#91;&#91; <em>pb</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if item pointed to by address in memory location <em>pa</em> compares less than item pointed to by address in memory location <em>pb</em>, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lte( <em>a</em>, <em>b</em> )</code> <a id="_lte"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := [<em>a</em>] &lt;= [<em>b</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if item in memory location <em>a</em> compares less than or equal to item in memory location <em>b</em>, else return <em>false</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rlte( <em>pa</em>, <em>pb</em> )</code> <a id="_rlte"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em> := &#91;&#91; <em>pa</em> &#93;&#93; &lt;= &#91;&#91; <em>pb</em> &#93;&#93;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return <em>true</em> if item pointed to by address in memory location <em>pa</em> compares less than or equal to item pointed to by address in memory location <em>pb</em>, else return <em>false</em></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemoryarithmetic">5.2.6. Arithmetic</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Arithmetic</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Addition</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>add( <em>addr</em>, <em>x</em> )</code> <a id="_add"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] += <em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add <em>x</em> to value at memory location <em>addr</em> and return the sum</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addif( <em>cond</em>, <em>addr</em>, <em>x</em> )</code> <a id="_addif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] += <em>x</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero add <em>x</em> to value at memory location <em>addr</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Subtraction</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sub( <em>addr</em>, <em>x</em> )</code> <a id="_sub"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] &#8722;= <em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract <em>x</em> from value at memory location <em>addr</em> and return the difference</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subif( <em>cond</em>, <em>addr</em>, <em>x</em> )</code> <a id="_subif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] &#8722;= <em>x</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero subtract <em>x</em> from value at memory location <em>addr</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Multiplication</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mul( <em>addr</em>, <em>x</em> )</code> <a id="_mul"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] *= <em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply value at memory location <em>addr</em> by <em>x</em> and return the product</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mulif( <em>cond</em>, <em>addr</em>, <em>x</em> )</code> <a id="_mulif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] *= <em>x</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero multiply value at memory location <em>addr</em> by <em>x</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Division</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>div( <em>addr</em>, <em>x</em> )</code> <a id="_div"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] /= <em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide value at memory location <em>addr</em> by <em>x</em> and return the quotient</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>divif( <em>cond</em>, <em>addr</em>, <em>x</em> )</code> <a id="_divif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] /= <em>x</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero divide value at memory location <em>addr</em> by <em>x</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Modulo</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mod( <em>addr</em>, <em>x</em> )</code> <a id="_mod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] %= <em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform modulo by <em>x</em> operation on value at memory location <em>addr</em> and return the remainder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>modif( <em>cond</em>, <em>addr</em>, <em>x</em> )</code> <a id="_modif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] %= <em>x</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero perform modulo by <em>x</em> operation on value at memory location <em>addr</em>. Always returns <em>cond</em>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemorybitwise">5.2.7. Bitwise</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Bitwise Operations</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Shift</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shr( <em>addr</em>, <em>b</em> )</code> <a id="_shr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] &gt;&gt;= <em>b</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shift value (interpreted as integer) at memory location <em>addr</em> right by <em>b</em> bits and return the new value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shrif( <em>cond</em>, <em>addr</em>, <em>b</em> )</code> <a id="_shrif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] &gt;&gt;= <em>b</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero shift value (interpreted as integer) at memory location <em>addr</em> right by <em>b</em> bits. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shl( <em>addr</em>, <em>b</em> )</code> <a id="_shl"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] &lt;&lt;= <em>b</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shift value (interpreted as integer) at memory location <em>addr</em> left by <em>b</em> bits and return the new value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shlif( <em>cond</em>, <em>addr</em>, <em>b</em> )</code> <a id="_shlif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] &lt;&lt;= <em>b</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero shift value (interpreted as integer) at memory location <em>addr</em> left by <em>b</em> bits. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Bitwise AND</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>and( <em>addr</em>, <em>x</em> )</code> <a id="_and"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] &amp;= <em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform bitwise-AND operation on value (interpreted as integer) at memory location <em>addr</em> using bit mask <em>x</em> and return the new value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>andif( <em>cond</em>, <em>addr</em>, <em>x</em> )</code> <a id="_andif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] &amp;= <em>x</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero perform bitwise-AND operation on value (interpreted as integer) at memory location <em>addr</em> using bit mask <em>x</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Bitwise OR</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>or( <em>addr</em>, <em>x</em> )</code> <a id="_or"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] |= <em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform bitwise-OR operation on value (interpreted as integer) at memory location <em>addr</em> using bit mask <em>x</em> and return the new value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>orif( <em>cond</em>, <em>addr</em>, <em>x</em> )</code> <a id="_orif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] |= <em>x</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero perform bitwise-OR operation on value (interpreted as integer) at memory location <em>addr</em> using bit mask <em>x</em>. Always returns <em>cond</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Bitwise XOR</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xor( <em>addr</em>, <em>x</em> )</code> <a id="_xor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] ^= <em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform bitwise-XOR operation on value (interpreted as integer) at memory location <em>addr</em> using bit mask <em>x</em> and return the new value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xorif( <em>cond</em>, <em>addr</em>, <em>x</em> )</code> <a id="_xorif"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] ^= <em>x</em> if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>cond</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>cond</em> is nonzero perform bitwise-XOR operation on value (interpreted as integer) at memory location <em>addr</em> using bit mask <em>x</em>. Always returns <em>cond</em>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemoryvector">5.2.8. Vector Arithmetic</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Vector Arithmetic</caption>
<colgroup>
<col style="width: 24.4897%;">
<col style="width: 32.653%;">
<col style="width: 10.204%;">
<col style="width: 32.6533%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dp_pi8( <strong>A</strong>, <strong>B</strong> )</code>
<br>
 <code>dp_pi8_256( <strong>A</strong>, <strong>B</strong> )</code>
<br>
 <code>dp_pi8_512( <strong>A</strong>, <strong>B</strong> )</code> <a id="_dp_pi8"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y := \mathbf{A} \cdot \mathbf{B} \)
<br>
<br>
 where
<br>
 \( \mathbf{A} = (a_1,a_2,...,a_n) \)
<br>
 \( \mathbf{B} = (b_1,b_2,...,b_n) \)
<br>
<br>
 i.e.
<br>
 \( y := a_1b_1 + a_2b_2 + ... + a_nb_n\)
<br>
<br>
 \( a_i \in [-128,127] \)
<br>
 \( b_i \in [-128,127] \)
<br>
<br>
 Vector length <em>n</em> such that
<br>
 \( n \mod w = 0 \)
<br>
<br>
 where
<br>
 \( w = \begin{cases} 32 &amp; \quad \text{for 256 version} \\ 64 &amp; \quad \text{for 512 version} \end{cases}\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float( <em>y</em> )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the dot-product of vectors <strong>A</strong> and <strong>B</strong> represented by <em>bytearrays</em>. Vector lengths must be equal, and a multiple of <em>w</em> bytes where <em>w</em> depends on the function version. Vector elements are interpreted as signed bytes.
<br>
<br>
 The returned value is floating point.
<br>
<br>
 <strong>NOTE1</strong>: Availability of these functions depends on the pyvgx library build version and the instruction set extensions present on the CPU. The <code>512</code> version requires the AVX-512 enabled build and a CPU with AVX-512 support. The <code>256</code> version requires the AVX2 enabled build and a CPU with AVX2 support. <code>dp_pi8()</code> is an alias for the highest width version available on the system.
<br>
<br>
 <strong>NOTE2</strong>: <em>bytearray</em> objects store unsigned byte values in range [0,255]. However, <code>dp_pi8()</code> uses signed arithmetic where values are two&#8217;s complement encoded. Raw array values in range [128,255] are therefore interpreted as negative.
<br>
<br>
 <strong>NOTE3</strong>: <strong>A</strong> and/or <strong>B</strong> may be supplied as <a href="../similarity/vector.html"><em>vector objects</em></a> (e.g. <a href="#_nextvector"><code>next.vector</code></a>). A vector object is implicitly cast to <em>bytearray</em> for the computation. The vector&#8217;s scaling factor is applied</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cos_pi8( <strong>A</strong>, <strong>B</strong> )</code>
<br>
 <code>cos_pi8_256( <strong>A</strong>, <strong>B</strong> )</code>
<br>
 <code>cos_pi8_512( <strong>A</strong>, <strong>B</strong> )</code> <a id="_cos_pi8"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y := \cos{ \theta } = \displaystyle \frac{ \mathbf{A} \cdot \mathbf{B}}{ \|\mathbf{A}\| \cdot \|\mathbf{B}\|} \)
<br>
<br>
 where
<br>
 \( \mathbf{A} = (a_1,a_2,...,a_n) \)
<br>
 \( \mathbf{B} = (b_1,b_2,...,b_n) \)
<br>
<br>
 i.e.
<br>
 \( y := \displaystyle \frac{\displaystyle \sum_{i=1}^n {a_ib_i}}{ \sqrt{\displaystyle \sum_{i=1}^n {a_i^2}} \cdot \sqrt{\displaystyle \sum_{i=1}^n {b_i^2} }} \)
<br>
<br>
 \( a_i \in [-128,127] \)
<br>
 \( b_i \in [-128,127] \)
<br>
<br>
 Vector length <em>n</em> such that
<br>
 \( n \mod w = 0 \)
<br>
<br>
 where
<br>
 \( w = \begin{cases} 32 &amp; \quad \text{for 256 version} \\ 64 &amp; \quad \text{for 512 version} \end{cases}\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>y</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute cosine of angle \( \theta \) between vectors <strong>A</strong> and <strong>B</strong> (represented by <em>bytearrays</em>) whose lengths must be equal, and a multiple of <em>w</em> bytes where <em>w</em> depends on the function version. Vector elements are interpreted as signed bytes.
<br>
<br>
 Return float value \( y \in [-1, 1]\)
<br>
<br>
 <strong>NOTE1</strong>: <a href="#_dp_pi8">See <code>dp_pi8()</code> NOTE1</a> for availability of <code>512</code>, <code>256</code> versions.
<br>
<br>
 <strong>NOTE2</strong>: <a href="#_dp_pi8">See <code>dp_pi8()</code> NOTE2</a> regarding encoding of signed values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ecld_pi8( <strong>A</strong>, <strong>B</strong> )</code>
<br>
 <code>ecld_pi8_256( <strong>A</strong>, <strong>B</strong> )</code>
<br>
 <code>ecld_pi8_512( <strong>A</strong>, <strong>B</strong> )</code> <a id="_ecld_pi8"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y := d( \mathbf{A}, \mathbf{B} ) = \displaystyle \|\overrightarrow{ \mathbf{AB} }\| \)
<br>
<br>
 where
<br>
 \( \mathbf{A} = (a_1,a_2,...,a_n) \)
<br>
 \( \mathbf{B} = (b_1,b_2,...,b_n) \)
<br>
<br>
 i.e.
<br>
 \( y := \displaystyle \sqrt{ \sum_{i=1}^n {(a_i - b_i)^2}} \)
<br>
<br>
 \( a_i \in [-128,127] \)
<br>
 \( b_i \in [-128,127] \)
<br>
<br>
 Vector length <em>n</em> such that
<br>
 \( n \mod w = 0 \)
<br>
<br>
 where
<br>
 \( w = \begin{cases} 32 &amp; \quad \text{for 256 version} \\ 64 &amp; \quad \text{for 512 version} \end{cases}\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>y</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the Euclidean (L2) norm of the difference between vectors <strong>A</strong> and <strong>B</strong> represented by <em>bytearrays</em>. The number of vector dimensions must be a multiple of <em>w</em> bytes where <em>w</em> depends on the function version. Vector elements are interpreted as signed bytes.
<br>
<br>
 Return float value \( y \geq 0 \)
<br>
<br>
 <strong>NOTE1</strong>: <a href="#_dp_pi8">See <code>dp_pi8()</code> NOTE1</a> for availability of <code>512</code>, <code>256</code> versions.
<br>
<br>
 <strong>NOTE2</strong>: <a href="#_dp_pi8">See <code>dp_pi8()</code> NOTE2</a> regarding encoding of signed values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ham_pi8( <strong>A</strong>, <strong>B</strong> )</code> <a id="_ham_pi8"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y := hamdist( \mathbf{A}, \mathbf{B} ) \)
<br>
<br>
 where
<br>
 \( \mathbf{A} = (a_1,a_2,...,a_n) \)
<br>
 \( \mathbf{B} = (b_1,b_2,...,b_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>y</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the Hamming Distance between the 64-bit fingerprints (LSH) of vectors <strong>A</strong> and <strong>B</strong> (represented by <em>bytearrays</em> or vector objects.) Vector elements are interpreted as signed bytes.
<br>
<br>
 Return integer value \( y \in \lbrack 0, 64 \rbrack \)
<br>
<br>
 <strong>NOTE2</strong>: <a href="#_dp_pi8">See <code>dp_pi8()</code> NOTE2</a> regarding encoding of signed values.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>512</code> versions of the above functions are generally 50% faster than <code>256</code> versions for large vectors.</p>
</div>
<div class="paragraph">
<p>However, there is a cost to using the <code>512</code> versions in that the CPU has to switch back and forth between using the wider 512-bit registers and the narrower registers used by other parts of the program code. Furthermore the CPU may automatically throttle down its frequency while executing AVX-512 instructions to remain within thermal bounds, and this could have an impact on both the performance of the vector computation and other concurrently running parts of the system.</p>
</div>
<div class="paragraph">
<p>Benchmarking is the only way to select the most performant vector function in a given application.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="evaluatormemoryvarious">5.2.9. Various Functions</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Various Functions</caption>
<colgroup>
<col style="width: 47.826%;">
<col style="width: 23.913%;">
<col style="width: 6.5217%;">
<col style="width: 21.7393%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>smooth( <em>addr</em>, <em>x</em>, <em>&#945;</em> )</code> <a id="_smooth"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] += <em>&#945;</em> &#183; ( <em>x</em> &#8722; [addr] )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update value at memory location <em>addr</em> from new value <em>x</em> using exponential smoothing factor <em>&#945;</em> and return the updated value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>count( <em>addr</em> [, <em>&lt;expr<sub>1</sub>&gt;</em>, &#8230;&#8203;, <em>&lt;expr<sub>n</sub>&gt;</em>] )</code> <a id="_count"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] += 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluate any number of sub-expressions <em>&lt;expr<sub>k</sub>&gt;</em> (discarding their return values), increment value at memory location <em>addr</em> and return the new value. This provides a way to count the number of times an expression is evaluated and to execute expressions that don&#8217;t contribute directly to the overall expression result value, but may be needed for their side-effects such as operating on memory locations that will be used later.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>countif( <em>cond</em>, <em>addr</em>[, <em>&lt;expr<sub>1</sub>&gt;</em>, &#8230;&#8203;, <em>&lt;expr<sub>n</sub>&gt;</em>] )</code> <a id="_count"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>addr</em>] += 1 if <em>cond</em> == true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>cond</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same behavior as <code>count()</code> except value at location <em>addr</em> is incremented only when <em>cond</em> is true, and <em>cond</em> is always returned.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemoryindexingop">5.2.10. Indexing</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Indexing</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>modindex( <em>i</em>, <em>mod</em>, <em>ofs</em> )</code> <a id="_modindex"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x</em> = <em>i</em> % <em>mod</em> + <em>ofs</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the array index <em>x</em> for a sub-array index <em>i</em> defined by <em>mod</em> and <em>ofs</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>index( <em>vertex</em> )</code> <a id="_index"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>vertex</em>.bitindex] |= <em>vertex</em>.bitvector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 or 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add <em>vertex</em> to memory array bitvector index by setting the appropriate bit of the value in a memory location determined by the vertex address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>indexed( <em>vertex</em> )</code> <a id="_indexed"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>vertex</em>.bitindex] &amp; <em>vertex</em>.bitvector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 or 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test if <em>vertex</em> has been indexed in the memory array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unindex( <em>vertex</em> )</code> <a id="_unindex"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>vertex</em>.bitindex] &amp;= ~<em>vertex</em>.bitvector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove <em>vertex</em> from memory array bitvector index by clearing the appropriate bit of the value in a memory location determined by the vertex address</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="evaluatormemory_multiple">5.3. Operations on Multiple Memory Locations</h3>
<div class="paragraph">
<p>These operations affect ranges of memory locations.</p>
</div>
<div class="sect3">
<h4 id="_function_naming_conventions">5.3.1. Function Naming Conventions</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Prefix <code>m*</code></dt>
<dd>
<p>All functions of this type start with the letter <code>m</code>.</p>
</dd>
<dt class="hdlist1">Prefix <code>mi*</code></dt>
<dd>
<p>Some functions are optimized for use with integer arrays and have the <code>mi</code> prefix. These functions have undefined behavior on non-integer data.</p>
</dd>
<dt class="hdlist1">Prefix <code>mr*</code></dt>
<dd>
<p>Some functions are optimized for use with floating point arrays and have the <code>mr</code> prefix. These functions have undefined behavior on non-floating point data.</p>
</dd>
<dt class="hdlist1">Prefix <code>mv*</code></dt>
<dd>
<p>Some functions operate element-wise on two equally sized vectors and have the <code>mv</code> prefix.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_array_indexing_and_range_specification">5.3.2. Array Indexing and Range Specification</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Array index subscript convention</dt>
<dd>
<p>Array indices are specified using 1-based offsets. The array <em>A</em> with <em>k</em> elements has its first element at <em>A<sub>1</sub></em> and its last element at <em>A<sub>k</sub></em>.</p>
</dd>
<dt class="hdlist1">Start and end indices</dt>
<dd>
<p>Functions that specify a memory range using start and end indices are inclusive of the end index. In general, a function <code>m&lt;func&gt;( m<sub>1</sub>, m<sub>n</sub>[, &#8230;&#8203; ] )</code> applies to memory locations <em>m<sub>1</sub></em>, <em>m<sub>2</sub></em>, &#8230;&#8203;, <em>m<sub>n</sub></em>.</p>
</dd>
<dt class="hdlist1">Array location and length</dt>
<dd>
<p>Functions that specify a memory range using an array location <em>A</em> and its length <em>k</em> generally have the form <code>m&lt;func&gt;( A, k[, &#8230;&#8203; ] )</code> and apply to memory locations <em>A<sub>1</sub></em>, <em>A<sub>2</sub></em>, &#8230;&#8203;, <em>A<sub>k</sub></em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_applying_operations_to_memory_range">5.3.3. Applying Operations to Memory Range</h4>
<div class="paragraph">
<p>The simplified notation \( M_n \) is sometimes used to represent the set of <em>n</em> values in consecutive memory range <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em>.</p>
</div>
<div class="paragraph">
<p>\( M_n ::=\ [ m_1 : m_n ] \),</p>
</div>
<div class="paragraph">
<p>where dereference notation \( [m] \) is used to represent the value in memory location <em>m</em>.</p>
</div>
<div class="paragraph">
<p>Using this definition of \( M_n \) we can then describe functions more compactly.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Simplified memory range notation examples</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 41.6666%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function Example</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m&lt;f&gt;( m<sub>1</sub>, m<sub>n</sub> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := f( M_n ) \)
<br>
<br>
 is the equivalent of
<br>
<br>
 \( [ m_1 : m_n ] := f( [ m_1 : m_n ] ) \)
<br>
<br>
 is the equivalent of
<br>
<br>
 \( [m_i] := f([m_i]) \text{ for all } i \in \{1,2,...,n\} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Let \( y = f(x) \) and let \( [ m ] \) represent the value in memory location <em>m</em>. This evaluator function then computes \( y_i = f(x_i) \text{ for all } x_i = [m_i]\),
<br>
 \( i \in \{m_1, m_2, ..., m_n\} \)
<br>
 and then performs \( [m_i] = y_i \).
<br>
<br>
 Stated more simply, transform all values in the specified memory range using \(f(x)\).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m&lt;g&gt;( m<sub>1</sub>, m<sub>n</sub>, p )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \text{ &lt;g&gt; } p \)
<br>
<br>
 is the equivalent of
<br>
<br>
 \( M_n := g( M_n, p ) \)
<br>
<br>
 is the equivalent of
<br>
<br>
 \( [m_i] := g([m_i],p) \text{ for all } i \in \{1,2,...,n\} \)
<br>
 where \( g(x,p) = x \text{ &lt;g&gt; } p \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Let \( y = g(x,p) \) and let \( [ m ] \) represent the value in memory location <em>m</em>. This evaluator function then computes \( y_i = g(x_i,p) \text{ for all } x_i = [m_i]\),
<br>
 \( i \in \{m_1, m_2, ..., m_n\} \)
<br>
 and then performs \( [m_i] = y_i \).
<br>
<br>
 Stated more simply, transform all values in the specified memory range using \(g(x,p)\).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_section_links">5.3.4. Section Links</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top">Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arraysetcopy">Set and Copy</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mset()</code>, <code>mreset()</code>, <code>mrandomize()</code>, <code>mcopy()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arrayheap">Heap Operations</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mheapinit()</code>, <code>mheapifymin()</code>, <code>mheappushmin()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arraysort">Sorting</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msort()</code>, <code>mreverse()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arraycast">Type Cast</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mint()</code>, <code>mreal()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arrayincdec">Increment and Decrement</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minc()</code>, <code>mdec()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_scalararrayarithmetic">Arithmetic</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>madd()</code>, <code>mvadd()</code>, <code>mvmul()</code>, <code>mpow()</code>, <code>msqrt()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arraynumeric">Numeric</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mceil()</code>, <code>mround()</code>, <code>mabs()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arraylogexp">Logarithms and Exponential Functions</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mlog()</code>, <code>mlog2()</code>, <code>mexp()</code>, <code>mexp10()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arraytrighyp">Trigonometric and Hyperbolic</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msin()</code>, <code>macos()</code>, <code>mtanh()</code>, <code>msinc()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arraybitwise">Bitwise Operations</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mshr()</code>, <code>mvshr()</code>, <code>mand()</code>, <code>mvxor()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arrayhash">Hashing</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mhash()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arrayaggregate">Aggregation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msum()</code>, <code>msumsqr()</code>, <code>mprod()</code>, <code>mmean()</code>, <code>mstdev()</code>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluatormemory_arrayprobe">Array Probing</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmax()</code>, <code>mcontains()</code>, <code>msubset()</code>, etc.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arraysetcopy">5.3.5. Set and Copy</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 19. Set and Copy Operations</caption>
<colgroup>
<col style="width: 30.4347%;">
<col style="width: 36.9565%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mset( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mset"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign numeric value <em>x</em> to all memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mreset()</code> <a id="_mreset"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [ 0 : -1 ] := 0 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set all memory locations to integer 0 and free all temporary string memory consumed by any previous calls to string functions such as <a href="#_str"><code>str()</code></a>, <a href="#_join"><code>join()</code></a>, etc. Return the total number of memory locations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrandomize( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrandomize"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \text{random}() \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign a different random value in the range [0.0 - 1.0] to each memory location <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrandbits( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrandbits"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \text{randbits}() \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign a different random bit pattern to each memory location <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mcopy( <em>D</em>, <em>S</em>, <em>k</em> )</code> <a id="_mcopy"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [D_1 : D_k] := [S_1 : S_k] \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy the contents of <em>k</em> consecutive source locations starting at <em>S<sub>1</sub></em> to the range of consecutive destinations starting at <em>D<sub>1</sub></em>. If any <em>D<sub>i</sub></em> or <em>S<sub>i</sub></em> references a slot beyond the end of the memory array nothing is copied. The number of copied memory locations is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mpwrite( <em>pD</em>, <em>S</em>, <em>k</em> )</code> <a id="_mpwrite"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [ [pD] : [pD] + (k-1) ] := [ S_1 : S_k] \)
<br>
<br>
 then
<br>
<br>
 \( [pD] := [pD] + k \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy the contents of <em>k</em> consecutive source locations starting at <em>S<sub>1</sub></em> to the range of consecutive destinations starting at <em>the memory location referenced by value in location</em> <em>pD</em>, then increment the value stored in location <em>pD</em> by <em>k</em>. If any <em>S<sub>i</sub></em> or the value at <em>pD</em> plus <em>i</em> - 1 references a slot beyond the end of the memory array nothing is copied. The number of copied memory locations is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mcopyobj( <em>D</em>, <em>obj</em> )</code> <a id="_mcopyobj"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [D_1 : D_n] := [obj_1 : obj_n] \)
<br>
<br>
 where
<br>
<br>
 \( n = \| obj \| \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy the <em>n</em> raw quadwords of object <em>obj</em> into memory starting at location <em>D<sub>1</sub></em>. The number of quadwords <em>n</em> comprising <em>obj</em> is determined automatically. If any <em>D<sub>i</sub></em> references a slot beyond the end of the memory array nothing is copied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mterm( <em>m</em> )</code> <a id="_mterm"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [m] := \text{null} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>m</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set element at memory location <em>m</em> to <em>null</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mlen( <em>A</em> )</code> <a id="_mlen"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( \text{max}(k) \text{ such that} \)
<br>
 \( \text{null} \notin [ A_1 : A_k ]\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the number of elements between memory location <em>A<sub>1</sub></em> and the first occurrence of a <em>null</em> value or the end of the memory object if no <em>null</em> value is encountered.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arrayheap">5.3.6. Heap Operations</h4>
<div class="paragraph">
<p>These functions implement <a href="https://en.wikipedia.org/wiki/Binary_heap" target="_blank" rel="noopener">binary heap operations</a> useful for maintaining subsets of smallest or largest values from a greater set of candidates.</p>
</div>
<div class="paragraph">
<p>The <em>min</em> and <em>max</em> versions of these functions signify min-heap or max-heap semantics. Recall that a min-heap will discard smaller values as larger values are added, and that a max-heap will discard larger values as smaller values are added:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">min-heap</dt>
<dd>
<p>Keep larger values</p>
</dd>
<dt class="hdlist1">max-heap</dt>
<dd>
<p>Keep smaller values</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 20. Heap Operations</caption>
<colgroup>
<col style="width: 37.5%;">
<col style="width: 25%;">
<col style="width: 12.5%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Initialize</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mheapinit( <em>A</em>, <em>k</em> )</code> <a id="_mheapinit"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [A_1 : A_k] := \text{null} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prepare array of <em>k</em> elements starting at location <em>A</em> for use with heap operations. The array is initialized with null-values that are interpreted as <em>inf</em> for <em>max-heaps</em> and <em>-inf</em> for <em>min-heaps</em>. The array satisfies both shape property and heap property for binary min and max heaps after this.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mheapifymin( <em>A</em>, <em>k</em> )</code> <a id="_mheapifymin"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( \text{heapifymin}( [ A_1 : A_k ] ) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process array of <em>k</em> elements starting at location <em>A</em> such that the array satisfies the heap property for a <em>min-heap</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mheapifymax( <em>A</em>, <em>k</em> )</code> <a id="_mheapifymax"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( \text{heapifymax}( [ A_1 : A_k ] ) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process array of <em>k</em> elements starting at location <em>A</em> such that the array satisfies the heap property for a <em>max-heap</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Populate</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mheappushmin( <em>A</em>, <em>k</em>, <em>x</em> )</code> <a id="_mheappushmin"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(\text{if } [A_1] &lt; x\ \text{, then}\)
<br>
 \(\quad [A_1] := [A_k]\)
<br>
 \(\quad [A_k] := x\)
<br>
 \(\quad \text{downheapmin}( A, k-1 ) \)
<br>
 \(\quad \text{upheapmin}( A, k-1 ) \)
<br>
 \(\quad \text{return } 1\)
<br>
<br>
 \(\quad \text{else}\)
<br>
 \(\quad \text{return } 0\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 or 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attempt to insert numeric value <em>x</em> into binary <em>min-heap</em> represented by array of <em>k</em> elements starting at location <em>A</em> and return 1 if successful. Inserting a new value implies discarding the previous smallest value from the heap (if no null-values remain). If the new value is less than all values in the heap nothing is inserted and 0 is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mheappushmax( <em>A</em>, <em>k</em>, <em>x</em> )</code> <a id="_mheappushmax"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(\text{if } [A_1] &gt; x\ \text{, then}\)
<br>
 \(\quad [A_1] := [A_k]\)
<br>
 \(\quad [A_k] := x\)
<br>
 \(\quad \text{downheapmax}( A, k-1 ) \)
<br>
 \(\quad \text{upheapmax}( A, k-1 ) \)
<br>
 \(\quad \text{return } 1\)
<br>
<br>
 \(\quad \text{else}\)
<br>
 \(\quad \text{return } 0\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 or 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attempt to insert numeric value <em>x</em> into binary <em>max-heap</em> represented by array of <em>k</em> elements starting at location <em>A</em> and return 1 if successful. Inserting a new value implies discarding the previous largest value from the heap (if no null-values remain). If the new value is greater than all values in the heap nothing is inserted and 0 is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mheapwritemin( <em>A</em>, <em>k</em>, <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_mheapwritemin"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(\text{for all } x_i, i \in \{1,2,...,n\}\)
<br>
 \(r_i = \text{mheappushmin}(A,k,x_i)\)
<br>
<br>
 \(N = \displaystyle \sum_{i=1}^n r_i\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>N</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attempt to insert numeric values <em>x<sub>1</sub></em> through <em>x<sub>n</sub></em> into binary <em>min-heap</em> represented by array of <em>k</em> elements starting at location <em>A</em> and return the number of values inserted. This is functionally equivalent to calling <a href="#_mheappushmin"><code>mheappushmin( <em>A</em>, <em>k</em>, <em>x<sub>i</sub></em>)</code></a> for all <em>i</em> from 1 through <em>n</em> and counting as <em>N</em> the number of <em>x<sub>i</sub></em> successfully inserted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mheapwritemax( <em>A</em>, <em>k</em>, <em>x<sub>1</sub></em>, <em>x<sub>2</sub></em>, &#8230;&#8203;, <em>x<sub>n</sub></em> )</code> <a id="_mheapwritemax"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(\text{for all } x_i, i \in \{1,2,...,n\}\)
<br>
 \(r_i = \text{mheappushmax}(A,k,x_i)\)
<br>
<br>
 \(N = \displaystyle \sum_{i=1}^n r_i\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>N</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attempt to insert numeric values <em>x<sub>1</sub></em> through <em>x<sub>n</sub></em> into binary <em>max-heap</em> represented by array of <em>k</em> elements starting at location <em>A</em> and return the number of values inserted. This is functionally equivalent to calling <a href="#_mheappushmax"><code>mheappushmax( <em>A</em>, <em>k</em>, <em>x<sub>i</sub></em>)</code></a> for all <em>i</em> from 1 through <em>n</em> and counting as <em>N</em> the number of <em>x<sub>i</sub></em> successfully inserted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mheapsiftmin( <em>A</em>, <em>k</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mheapsiftmin"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(\text{for all } i \in \{1,2,...,n\}\)
<br>
 mheappushmin(<em>A</em>,<em>k</em>,[<em>m<sub>i</sub></em>])</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process all numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> by attempting to insert them into binary <em>min-heap</em> represented by array of <em>k</em> elements starting at location <em>A</em> and return the number of processed values, whether inserted or not. On completion the array <em>A</em> will contain the <em>k</em> largest values from the source range.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mheapsiftmax( <em>A</em>, <em>k</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mheapsiftmax"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(\text{for all } i \in \{1,2,...,n\}\)
<br>
 mheappushmax(<em>A</em>,<em>k</em>,[<em>m<sub>i</sub></em>])</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process all numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> by attempting to insert them into binary <em>max-heap</em> represented by array of <em>k</em> elements starting at location <em>A</em> and return the number of processed values, whether inserted or not. On completion the array <em>A</em> will contain the <em>k</em> smallest values from the source range.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arraysort">5.3.7. Sorting</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 21. Array Sorting</caption>
<colgroup>
<col style="width: 31.9148%;">
<col style="width: 29.7872%;">
<col style="width: 12.7659%;">
<col style="width: 25.5321%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msort( <em>A</em>, <em>k</em> )</code> <a id="_msort"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>sort<sub>ascending</sub></em>( [ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em> &#8804; <em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort array of <em>k</em> values starting at location <em>A</em> in ascending order, in-place. Any null-value compares greater-than any numeric value, and will appear at the end of the sorted array. The number <em>n</em> of non-null values is returned. (All other non-<em>real</em> elements are interpreted as integers.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msortrev( <em>A</em>, <em>k</em> )</code> <a id="_msortrev"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>sort<sub>descending</sub></em>( [ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em> &#8804; <em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort array of <em>k</em> values starting at location <em>A</em> in descending order, in-place. Any null-value compares less-than any numeric value, and will appear at the end of the sorted array. The number <em>n</em> of non-null values is returned. (All other non-<em>real</em> elements are interpreted as integers.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsort( <em>A</em>, <em>k</em> )</code> <a id="_mrsort"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>sort<sub>ascending</sub></em>( [ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] )
 <br>
  ( assumes <em>isreal</em>( <em>A<sub>i</sub></em> ) == true )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort array of <em>k</em> values (interpreted as floating point) starting at location <em>A</em> in ascending order, in-place.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsortrev( <em>A</em>, <em>k</em> )</code> <a id="_mrsortrev"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>sort<sub>descending</sub></em>( [ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] )
 <br>
  ( assumes <em>isreal</em>( <em>A<sub>i</sub></em> ) == true )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sort array of <em>k</em> values (interpreted as floating point) starting at location <em>A</em> in descending order, in-place.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mreverse( <em>A</em>, <em>k</em> )</code> <a id="_mreverse"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>reverse</em>( [<em>A<sub>1</sub></em> : <em>A<sub>k</sub></em>] )</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reverse array of <em>k</em> objects starting at location <em>A</em>, in-place.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arraycast">5.3.8. Type Cast</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 22. Array Type Cast</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mint( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_min"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \text{integer}( M_n ) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cast all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to integer and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mintr( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_min"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \text{integer}( \lfloor M_n \rceil ) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cast all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to integer after rounding to the nearest whole number and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mreal( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mreal"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \text{real}( M_n ) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cast all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to floating point and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mbits( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mreal"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \text{real}( M_n ) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cast all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to floating point and return the number of memory locations affected by the operation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arrayincdec">5.3.9. Increment and Decrement</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 23. Array Increment and Decrement</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Increment</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minc( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_minc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n + 1 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increment all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>miinc( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_miinc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n + 1 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increment all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as integers) and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrinc( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrinc"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n + 1 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increment all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as floating point) and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Decrement</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mdec( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mdec"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n - 1 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrement all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>midec( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_midec"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n - 1 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrement all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as integers) and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrdec( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrdec"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n - 1 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrement all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as floating point) and return the number of memory locations affected by the operation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_scalararrayarithmetic">5.3.10. Arithmetic</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 24. Array Arithmetic</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Add</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>madd( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_madd"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n + x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add <em>x</em> to all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>miadd( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_miadd"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n + x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add integer <em>x</em> to all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as integers) and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mradd( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mradd"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n + x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add floating point value <em>x</em> to all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as floating point) and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mvadd( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mvadd"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] := [ <em>A<sub>1</sub></em> + <em>B<sub>1</sub></em> : <em>A<sub>k</sub></em> + <em>B<sub>k</sub></em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, add numeric values in memory locations <em>A<sub>i</sub></em> and <em>B<sub>i</sub></em> and store the result in location <em>A<sub>i</sub></em>, then return <em>k</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Subtract</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msub( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_msub"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n - x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract <em>x</em> from all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>misub( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_misub"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n - x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract integer <em>x</em> from all values in memory locations <em>m<sub>1</sub></em> (interpreted as integers) to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsub( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mrsub"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n - x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract floating point value <em>x</em> from all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as floating point) and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mvsub( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mvsub"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] := [ <em>A<sub>1</sub></em> &#8722; <em>B<sub>1</sub></em> : <em>A<sub>k</sub></em> &#8722; <em>B<sub>k</sub></em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, subtract numeric value in memory location <em>B<sub>i</sub></em> from numeric value in memory location <em>A<sub>i</sub></em> and store the result in location <em>A<sub>i</sub></em>, then return <em>k</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Multiply</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmul( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mmul"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \cdot x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> by <em>x</em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mimul( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mimul"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \cdot x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as integers) by integer <em>x</em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrmul( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mrmul"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \cdot x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as floating point) by floating point value <em>x</em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mvmul( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mvmul"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] := [ <em>A<sub>1</sub></em> * <em>B<sub>1</sub></em> : <em>A<sub>k</sub></em> * <em>B<sub>k</sub></em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, multiply numeric values in memory locations <em>A<sub>i</sub></em> and <em>B<sub>i</sub></em> and store the result in location <em>A<sub>i</sub></em>, then return <em>k</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Divide</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mdiv( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mdiv"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{M_n}{x} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> by <em>x</em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>midiv( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_midiv"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{M_n}{x} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as integers) by integer <em>x</em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrdiv( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mrdiv"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{M_n}{x} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as floating point) by floating point value <em>x</em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mvdiv( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mvdiv"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] := [ <em>A<sub>1</sub></em> / <em>B<sub>1</sub></em> : <em>A<sub>k</sub></em> / <em>B<sub>k</sub></em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, divide numeric value in memory location <em>A<sub>i</sub></em> by numeric value in memory location <em>B<sub>i</sub></em> and store the result in location <em>A<sub>i</sub></em>, then return <em>k</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Modulo</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmod( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mmod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \mod x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform modulo by <em>x</em> operation on all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mimod( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mimod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \mod x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform integer modulo by <em>x</em> on all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as integers) and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrmod( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mrmod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \mod x \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform floating point modulo by <em>x</em> on all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> (interpreted as floating point) and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mvmod( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mvmod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] := [ <em>A<sub>1</sub></em> % <em>B<sub>1</sub></em> : <em>A<sub>k</sub></em> % <em>B<sub>k</sub></em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, perform [<em>A<sub>i</sub></em>] modulo [<em>B<sub>i</sub></em>] and store the result in location <em>A<sub>i</sub></em>, then return <em>k</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Inverse</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minv( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_minv"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{1}{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform the inverse operation on all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrinv( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrinv"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{1}{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform the inverse operation on all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> interpreted as floating point values and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Power</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mpow( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>y</em> )</code> <a id="_mpow"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := (M_n)^y \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raise all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to the <em>y</em><sup>th</sup> power and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrpow( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>y</em> )</code> <a id="_mrpow"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := (M_n)^y \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raise all values (interpreted as floating point values) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to the <em>y</em><sup>th</sup> power and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Square</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msq( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_msq"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := (M_n)^2 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Square all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsq( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrsq"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := (M_n)^2 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Square all values (interpreted as floating point values) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Square Root</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msqrt( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_msqrt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \sqrt{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Take the square root of all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsqrt( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrsqrt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \sqrt{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Take the square root of all values (interpreted as floating point values) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arraynumeric">5.3.11. Numeric</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 25. Array Numeric Functions</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Ceil</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mceil( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mceil"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \lceil M_n \rceil \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to their floating point values representing the smallest integers greater than or equal to their values. Return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrceil( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrceil"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \lceil M_n \rceil \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set all values (interpreted as floating point values) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to their floating point values representing the smallest integers greater than or equal to their values. Return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Floor</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mfloor( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mfloor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \lfloor M_n \rfloor \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to their floating point values representing the largest integers less than or equal to their values. Return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrfloor( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrfloor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \lfloor M_n \rfloor \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set all values (interpreted as floating point values) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to their floating point values representing the largest integers less than or equal to their values. Return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Round</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mround( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mround"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \lfloor M_n \rceil \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Round all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to the real values representing their nearest integers and return the number of memory locations affected by the operation.
<br>
<br>
 NOTE: Rounding rule is to round away from zero. (Differs from Python3 <em>round-to-even</em> rule!)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrround( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrround"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \lfloor M_n \rceil \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Round all values (interpreted as floating point values) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to the real values representing their nearest integers and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Absolute Value</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mabs( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mabs"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := | M_n | \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to their absolute values and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrabs( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrabs"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := | M_n | \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert all values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to their absolute values and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Sign</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msign( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_msign"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \sgn(M_n) \)
<br>
<br>
 \( \sgn(x) = \begin{cases} 1 &amp; \quad \text{if } x &gt; 0 \\ 0 &amp; \quad \text{if } x = 0 \\ -1 &amp; \quad \text{if } x &lt; 0 \end {cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> with their signs as 1 or -1, and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsign( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrsign"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \sgn(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace all values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> with their signs as 1.0 or -1.0, and return the number of memory locations affected by the operation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arraylogexp">5.3.12. Logarithms and Exponential Functions</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 26. Array Logarithm and Exponential Functions</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>log<sub>2</sub></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mlog2( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mlog2"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \log_2(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the base-2 logarithm of values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em>. Return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrlog2( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrlog2"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \log_2(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the base-2 logarithm of values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em>. Return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Natural Logarithm</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mlog( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mlog"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \ln(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the natural logarithm of values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em>. Return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrlog( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrlog"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \ln(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the natural logarithm of values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em>. Return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>log<sub>10</sub></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mlog10( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mlog10"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \log_{10}(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the base-10 logarithm of values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em>. Return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrlog10( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrlog10"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \log_{10}(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the base-10 logarithm of values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em>. Return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>exp<sub>2</sub></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mexp2( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mexp2"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := 2^{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform 2<sup>x</sup> for all values x in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrexp2( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrexp2"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := 2^{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform 2<sup>x</sup> for all values x (interpreted as floating point values) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Exponentiation</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mexp( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mexp"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := e^{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform e<sup>x</sup> for all values x in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrexp( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrexp"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := e^{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform e<sup>x</sup> for all values x (interpreted as floating point values) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>exp<sub>10</sub></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mexp10( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mexp10"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := 10^{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform 10<sup>x</sup> for all values x in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrexp10( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrexp10"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := 10^{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform 10<sup>x</sup> for all values x (interpreted as floating point values) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arraytrighyp">5.3.13. Trigonometric and Hyperbolic</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 27. Array Trigonometric and Hyperbolic Functions</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Angle Conversion</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrad( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrad"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{\pi}{180} \cdot M_n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert all values (assumed to be degrees) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to radians and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrrad( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrrad"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{\pi}{180} \cdot M_n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert all values (assumed to be degrees and interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to radians and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mdeg( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mdeg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{180}{\pi} \cdot M_n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert all values (assumed to be radians) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to degrees and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrdeg( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrdeg"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{180}{\pi} \cdot M_n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert all values (assumed to be radians and interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> to degrees and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Trigonometric</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msin( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mcos( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mtan( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \sin(M_n) \)
<br>
 \( M_n := \cos(M_n) \)
<br>
 \( M_n := \tan(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute sin(<em>x</em>), cos(<em>x</em>) or tan(<em>x</em>) for all <em>x</em> in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsin( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mrcos( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mrtan( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \sin(M_n) \)
<br>
 \( M_n := \cos(M_n) \)
<br>
 \( M_n := \tan(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute sin(<em>x</em>), cos(<em>x</em>) or tan(<em>x</em>) for all <em>x</em> (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Inverse Trigonometric</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>masin( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>macos( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>matan( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \arcsin(M_n) \)
<br>
 \( M_n := \arccos(M_n) \)
<br>
 \( M_n := \arctan(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute asin(<em>x</em>), acos(<em>x</em>) or atan(<em>x</em>) for all <em>x</em> in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrasin( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mracos( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mratan( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \arcsin(M_n) \)
<br>
 \( M_n := \arccos(M_n) \)
<br>
 \( M_n := \arctan(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute asin(<em>x</em>), acos(<em>x</em>) or atan(<em>x</em>) for all <em>x</em> (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Hyperbolic</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msinh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mcosh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mtanh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \sinh(M_n) \)
<br>
 \( M_n := \cosh(M_n) \)
<br>
 \( M_n := \tanh(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute sinh(<em>x</em>), cosh(<em>x</em>) or tanh(<em>x</em>) for all <em>x</em> in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsinh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mrcosh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mrtanh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \sinh(M_n) \)
<br>
 \( M_n := \cosh(M_n) \)
<br>
 \( M_n := \tanh(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute sinh(<em>x</em>), cosh(<em>x</em>) or tanh(<em>x</em>) for all <em>x</em> (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Inverse Hyperbolic</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>masinh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>macosh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>matanh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \arcsinh(M_n) \)
<br>
 \( M_n := \arccosh(M_n) \)
<br>
 \( M_n := \arctanh(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute asinh(<em>x</em>), acosh(<em>x</em>) or atanh(<em>x</em>) for all <em>x</em> in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrasinh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mracosh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code>
<br>
 <code>mratanh( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \arcsinh(M_n) \)
<br>
 \( M_n := \arccosh(M_n) \)
<br>
 \( M_n := \arctanh(M_n) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute asinh(<em>x</em>), acosh(<em>x</em>) or atanh(<em>x</em>) for all <em>x</em> (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Sinc</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msinc( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{\sin{ \pi M_n }}{\pi M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute sin( <em>&#960;x</em> ) / <em>&#960;x</em> for all <em>x</em> in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsinc( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := \displaystyle \frac{\sin{ \pi M_n }}{\pi M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute sin( <em>&#960;x</em> ) / <em>&#960;x</em> for all <em>x</em> (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> and return the number of memory locations affected by the operation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arraybitwise">5.3.14. Bitwise Operations</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 28. Array Bitwise Functions</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Shift</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mshr( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>b</em> )</code> <a id="_mshr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \text{ &gt;&gt; } b \)
<br>
<br>
 where
<br>
<br>
 \( a \text{ &gt;&gt; } b \quad\) shifts integer \(a\) right by \(b\) bit positions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shift all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> right by <em>b</em> bits and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mvshr( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mvshr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] := [ <em>A<sub>1</sub></em> &gt;&gt; <em>B<sub>1</sub></em> : <em>A<sub>k</sub></em> &gt;&gt; <em>B<sub>k</sub></em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, shift integer value in memory location <em>A<sub>i</sub></em> right by the number of bits indicated by integer value in memory location <em>B<sub>i</sub></em> and store the result in location <em>A<sub>i</sub></em>, then return <em>k</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mshl( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>b</em> )</code> <a id="_mshl"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \text{ &lt;&lt; } b \)
<br>
<br>
 where
<br>
<br>
 \( a \text{ &lt;&lt; } b \quad\) shifts integer \(a\) left by \(b\) bit positions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shift all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> left by <em>b</em> bits and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mvshl( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mvshl"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] := [ <em>A<sub>1</sub></em> &lt;&lt; <em>B<sub>1</sub></em> : <em>A<sub>k</sub></em> &lt;&lt; <em>B<sub>k</sub></em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, shift integer value in memory location <em>A<sub>i</sub></em> left by the number of bits indicated by integer value in memory location <em>B<sub>i</sub></em> and store the result in location <em>A<sub>i</sub></em>, then return <em>k</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Logical</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mand( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mand"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \text{ &amp; } x \)
<br>
<br>
 where
<br>
<br>
 \( a \text{ &amp; } x \quad\) performs bitwise AND on integers \(a \text{ and } x\).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform bitwise-AND operation on all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> using mask <em>x</em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mvand( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mvand"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] := [ <em>A<sub>1</sub></em> &amp; <em>B<sub>1</sub></em> : <em>A<sub>k</sub></em> &amp; <em>B<sub>k</sub></em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, perform bitwise-AND on integer values in memory locations <em>A<sub>i</sub></em> and <em>B<sub>i</sub></em> and store the result in location <em>A<sub>i</sub></em>, then return <em>k</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mor( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \text{ | } x \)
<br>
<br>
 where
<br>
<br>
 \( a \text{ | } x \quad\) performs bitwise OR on integers \(a \text{ and } x\).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform bitwise-OR operation on all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> using mask <em>x</em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mvor( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mvor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] := [ <em>A<sub>1</sub></em> | <em>B<sub>1</sub></em> : <em>A<sub>k</sub></em> | <em>B<sub>k</sub></em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, perform bitwise-OR on integer values in memory locations <em>A<sub>i</sub></em> and <em>B<sub>i</sub></em> and store the result in location <em>A<sub>i</sub></em>, then return <em>k</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mxor( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>x</em> )</code> <a id="_mxor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := M_n \text{ ^ } x \)
<br>
<br>
 where
<br>
<br>
 \( a \text{ ^ } x \quad\) performs bitwise XOR on integers \(a \text{ and } x\).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform bitwise-XOR operation on all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em> using mask <em>x</em> and return the number of memory locations affected by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mvxor( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mvxor"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ <em>A<sub>1</sub></em> : <em>A<sub>k</sub></em> ] := [ <em>A<sub>1</sub></em> ^ <em>B<sub>1</sub></em> : <em>A<sub>k</sub></em> ^ <em>B<sub>k</sub></em> ]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>k</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, perform bitwise-XOR on integer values in memory locations <em>A<sub>i</sub></em> and <em>B<sub>i</sub></em> and store the result in location <em>A<sub>i</sub></em>, then return <em>k</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Other</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mpopcnt( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mpopcnt"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := popcnt(M_n) \)
<br>
<br>
 where
<br>
<br>
 \( popcnt(a) \) is the number of bits set to 1 in the binary representation of \(a\).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Count the number of bits set to 1 for all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em>, update all locations with their respective bit counts and return the number of memory locations affected.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arrayhash">5.3.15. Hashing</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 29. Array Hashing</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mhash( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mhash"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( M_n := h(M_n) \)
<br>
<br>
 where
<br>
<br>
 \( h : x \mapsto y \)
<br>
 such that \(y\) has the properties of a uniformly distributed random number with respect to \(x\).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the 64-bit integer hash of all values in memory locations <em>m<sub>1</sub></em> to <em>m<sub>n</sub></em>, update all locations with their hash value and return the number of memory locations affected.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arrayaggregate">5.3.16. Aggregation</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 30. Array Aggregation</caption>
<colgroup>
<col style="width: 32.6086%;">
<col style="width: 34.7826%;">
<col style="width: 6.5217%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Sum</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msum( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_msum"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \sum M_n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add all numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the resulting sum to memory location <em>dest</em> as a <em>real</em> value then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsum( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrsum"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \sum M_n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add all values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the resulting sum to memory location <em>dest</em> as a <em>real</em> value then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msumsqr( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_msumsqr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \sum (M_n)^2 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the square of all numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the resulting sum to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrsumsqr( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrsumsqr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \sum (M_n)^2 \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the square of all values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the resulting sum to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minvsum( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_minvsum"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \sum \frac{1}{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the inverse of all numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the resulting sum to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrinvsum( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrinvsum"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \sum \frac{1}{M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the inverse of all values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the resulting sum to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Product</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mprod( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mprod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \prod M_n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply all numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the resulting product to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrprod( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrprod"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \prod M_n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply all values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the resulting product to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Mean</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmean( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mmean"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \frac{1}{n} \sum M_n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the arithmetic mean (average) of all numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the result to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrmean( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrmean"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \frac{1}{n} \sum M_n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the arithmetic mean (average) of all values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the result to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mharmmean( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mharmmean"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \left(\frac{1}{n} \sum {\frac{1}{M_n}} \right)^{-1} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the harmonic mean of all numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the result to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrharmmean( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrharmmean"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \left(\frac{1}{n} \sum {\frac{1}{M_n}} \right)^{-1} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the harmonic mean of all values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the result to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mgeomean( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mgeomean"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \sqrt[n]{\prod{M_n}} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the geometric mean of all numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the result to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrgeomean( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrgeomean"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\([dest] := \displaystyle \sqrt[n]{\prod{M_n}} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the geometric mean of all values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the result to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Deviation</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mstdev( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mstdev"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [dest] := \displaystyle \sqrt{ \frac{1}{n} \displaystyle \sum_{i=1}^n {(x_i-\mu)^2} } \)
<br>
<br>
 where
<br>
<br>
 \( x_i = \text{value at location } m_i\)
<br>
 and
<br>
 \( \mu = \displaystyle \frac{1}{n} \sum M_n\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the standard deviation of numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the result to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrstdev( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrstdev"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [dest] := \displaystyle \sqrt{ \frac{1}{n} \displaystyle \sum_{i=1}^n {(x_i-\mu)^2} } \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the standard deviation of values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the result to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mgeostdev( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mgeostdev"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [dest] := \exp \left(\displaystyle \sqrt{\displaystyle \frac{\displaystyle \sum_{i=1}^n{\left(\ln{\frac{x_i}{\mu_g}}\right)^2}}{n}}\right)     \)
<br>
<br>
 where
<br>
<br>
 \( x_i = \text{value at location } m_i\)
<br>
 and
<br>
 \( \mu_g = \displaystyle \sqrt[n]{\prod M_n} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the geometric standard deviation of numeric values in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the result to memory location <em>dest</em> then return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mrgeostdev( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mrgeostdev"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [dest] := \exp \left(\displaystyle \sqrt{\displaystyle \frac{\displaystyle \sum_{i=1}^n{\left(\ln{\frac{x_i}{\mu_g}}\right)^2}}{n}}\right)     \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>dest</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute the geometric standard deviation of values (interpreted as floating point) in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign the result to memory location <em>dest</em> then return the result.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluatormemory_arrayprobe">5.3.17. Array Probing</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 31. Array Probing</caption>
<colgroup>
<col style="width: 30.4347%;">
<col style="width: 34.7826%;">
<col style="width: 8.6956%;">
<col style="width: 26.0871%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Ret</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Simple</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmax( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mmax"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [dest] := \max( M_n ) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>m<sub>k</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Find the largest value in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign it to memory location <em>dest</em>, then return the location <em>m<sub>k</sub></em> where the largest value was found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mmin( <em>dest</em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_mmin"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( [dest] := \min( M_n ) \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>m<sub>k</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Find the smallest value in memory locations <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em> and assign it to memory location <em>dest</em>, then return the location <em>m<sub>k</sub></em> where the smallest value was found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mcontains( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>value</em> )</code> <a id="_mcontains"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{if value } \in M_n \\ 0 &amp; \quad \text{if value } \notin M_n \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>y</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>value</em> occurs in any memory location <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em>, otherwise return 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mcount( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>value</em> )</code> <a id="_mcount"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = | { x \in M_n : x = \text{value} } | \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>y</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the number of times <em>value</em> occurs in memory location range <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mcmp( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mcmp"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = cmp( [ A_1 : A_k ], [ B_1 : B_k ] ) \)
<br>
<br>
 \( cmp(a,b) = \begin{cases} 0 &amp; \quad \text{if } a = b \\ 1 &amp; \quad \text{if } a &gt; b \\ -1 &amp; \quad \text{if } a &lt; b \end{cases}\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>y</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, compare numeric values in memory locations <em>A<sub>i</sub></em> and <em>B<sub>i</sub></em>. Immediately return -1 at the first iteration where [<em>A<sub>i</sub></em>] &lt; [<em>B<sub>i</sub></em>] or 1 at the first iteration where [<em>A<sub>i</sub></em>] &gt; [<em>B<sub>i</sub></em>]. If [<em>A<sub>i</sub></em>] == [<em>B<sub>i</sub></em>] for all <em>i</em> return 0. If <em>k</em> is such that either <em>A</em> or <em>B</em> extends beyond the end of memory -1 is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mcmpa( <em>A</em>, <em>B</em>, <em>k</em> )</code> <a id="_mcmpa"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = cmp( [ A_1 : A_k ], [ B_1 : B_k ] ) \)
<br>
<br>
 Element-wise comparison function defined as:
<br>
<br>
 \( cmp(a,b) = \begin{cases} 0 &amp; \quad \text{if } \delta &lt; \varepsilon \\ 1 &amp; \quad \text{if } a &gt; b \wedge \delta \geq \varepsilon \\ -1 &amp; \quad \text{if } a &lt; b \wedge \delta \geq \varepsilon \end{cases}\)
<br>
<br>
 where \( \delta = |a-b| \)
<br>
 and \( \varepsilon = 1.1921 \cdot 10^{-7} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>y</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For all <em>i</em> from 1 through <em>k</em>, compare numeric values in memory locations <em>A<sub>i</sub></em> and <em>B<sub>i</sub></em> using approximate matching for real values. Real values <em>a</em> and <em>b</em> compare equal when \( |a-b| &lt; \varepsilon \). Immediately return -1 at the first iteration where [<em>A<sub>i</sub></em>] &lt; [<em>B<sub>i</sub></em>] or 1 at the first iteration where [<em>A<sub>i</sub></em>] &gt; [<em>B<sub>i</sub></em>]. If [<em>A<sub>i</sub></em>] == [<em>B<sub>i</sub></em>] for all <em>i</em> return 0. If <em>k</em> is such that either <em>A</em> or <em>B</em> extends beyond the end of memory -1 is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mindex( <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em>, <em>value</em> )</code> <a id="_mindex"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( k = \min( i ), i \in [1,n] \text{ such that} \)
<br>
 \( value \in [m_1 : m_i]\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>m<sub>k</sub></em> or -1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return first memory location <em>m<sub>k</sub></em> where <em>value</em> occurs in range <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em>. If <em>value</em> does not occur in specified range return -1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>Subset</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msubset( <em>p<sub>1</sub></em>, <em>p<sub>k</sub></em>, <em>m<sub>1</sub></em>, <em>m<sub>n</sub></em> )</code> <a id="_msubset"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{if } P_k \in M_n \\ 0 &amp; \quad \text{if } P_k \notin M_n \end{cases} \)
<br>
<br>
 \( k \leq n \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 or 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if all values in probe memory location range <em>p<sub>1</sub></em> through <em>p<sub>k</sub></em> occur in memory location range <em>m<sub>1</sub></em> through <em>m<sub>n</sub></em>, otherwise return 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>msubsetobj( <em>p<sub>1</sub></em>, <em>p<sub>k</sub></em>, <em>obj</em> )</code> <a id="_msubsetobj"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{if } P_k \in obj \\ 0 &amp; \quad \text{if } P_k \notin obj \end{cases} \)
<br>
<br>
 \( k \leq | obj | \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 or 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if all values in probe memory location range <em>p<sub>1</sub></em> through <em>p<sub>k</sub></em> occur in <em>obj</em>, otherwise return 0. The object <em>obj</em> is either a numeric array or a map, i.e. an object for which <a href="#_isarray">isarray()</a> or <a href="#_ismap">ismap()</a> is true. If <em>obj</em> is a numeric array its values must be integers.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="evaluator_mappingsets">5.4. Mappings and Sets</h3>
<div class="paragraph">
<p>These functions operate on built-in maps and sets associated with memory objects.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The integer set and vertex set functions operate on the same internal set structure. Mixing <code>iset</code> and <code>vset</code> operations will most certainly yield unexpected results.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="evaluator_integerset">5.4.1. Integer Set</h4>
<div class="paragraph">
<p>The integer set is used to store and check existence of unique (32-bit) integer keys. Object <em>key</em> may be of any type, but its raw bit value (as produced by <a href="#_asbits"><code>asbits(<em>key</em>)</code></a>) is always implied and only the 32 lower bits are used.</p>
</div>
<div class="paragraph">
<p>Key <code>0xffffffff</code> is reserved and cannot be used.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iset.add( <em>key</em> )</code> <a id="_isetadd"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{key added} \\ 0 &amp; \quad \text{already exists} \\ -1 &amp; \quad \text{error} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add <em>key</em> to set and return 1 if added or 0 if <em>key</em> already existed in the set. If the value could not be added -1 is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iset.del( <em>key</em> )</code> <a id="_isetdel"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{key deleted} \\ 0 &amp; \quad \text{does not exist} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete <em>key</em> from set and return 1 if deleted or 0 if <em>key</em> did not exist in the set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iset.has( <em>key</em> )</code> <a id="_isethas"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{key exists} \\ 0 &amp; \quad \text{does not exist} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>key</em> exists in set, otherwise return 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iset.len()</code> <a id="_isetlen"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of mapped keys</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the number of keys in set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iset.clr()</code> <a id="_isetclr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of removed keys</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove all keys from set and return the number of keys removed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="evaluator_vertexset">5.4.2. Vertex Set</h4>
<div class="paragraph">
<p>The vertex set is used to store and check existence of unique vertex instances.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Return Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vset.add( <em>vertex</em> )</code> <a id="_vsetadd"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{vertex added} \\ 0 &amp; \quad \text{already exists} \\ -1 &amp; \quad \text{error} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add <em>vertex</em> to set and return 1 if added or 0 if <em>vertex</em> already existed in the set. If the vertex could not be added -1 is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vset.del( <em>vertex</em> )</code> <a id="_vsetdel"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{vertex deleted} \\ 0 &amp; \quad \text{does not exist} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete <em>vertex</em> from set and return 1 if deleted or 0 if <em>vertex</em> did not exist in the set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vset.has( <em>vertex</em> )</code> <a id="_vsethas"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( y = \begin{cases} 1 &amp; \quad \text{vertex exists} \\ 0 &amp; \quad \text{does not exist} \end{cases} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return 1 if <em>vertex</em> exists in set, otherwise return 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vset.len()</code> <a id="_vsetlen"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of vertices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the number of vertices in set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vset.clr()</code> <a id="_vsetclr"></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of vertices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove all vertices from set and return the number of vertices removed.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="evaluator_specialpurpose">6. Special Purpose Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes specialized operations for solving specific problems.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 32. Quick Links</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluator_sumprodobj"><em>sumprodobj</em>()</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluator_probealtarray"><em>probealtarray</em>()</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compare array object to probe stored in memory range and compute match score</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#evaluator_synarc_decay"><em>synarc.decay</em>() and <em>synarc.xdecay</em>()</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time-dependent arc values</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="evaluator_sumprodobj">6.1. <em>sumprodobj</em>()</h3>
<div class="paragraph">
<p>Compute the sum of products of all matching pairs of items in object <em>obj</em> and memory location range \( [p_1 : p_k] \).</p>
</div>
<div class="paragraph">
<p>The object <em>obj</em> is either a <a href="#_isarray">numeric array</a> or a <a href="#_ismap">map</a>. If <em>obj</em> is a numeric array its values must be integers.</p>
</div>
<div class="paragraph">
<p>The items to be matched are compared using key function \(K(x)\) which is either the integer <em>key</em> of <em>keyval</em> item <em>x</em>, or <em>x</em> itself if <em>x</em> is an integer.</p>
</div>
<div class="paragraph">
<p>The item value \( V(x) \) is either the float <em>value</em> of <em>keyval</em> item <em>x</em>, or 1.0 if <em>x</em> is an integer.</p>
</div>
<div class="sect3">
<h4 id="_syntax_3">6.1.1. Syntax</h4>
<div class="listingblock">
<div class="content">
<pre>msumprodobj( p1, pk, obj ) -&gt; y</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_3">6.1.2. Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 17.8571%;">
<col style="width: 28.5714%;">
<col style="width: 53.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>p<sub>1</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>integer</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First memory location of probe item</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>p<sub>k</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>integer</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last memory location of probe item</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>obj</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_isarray">numeric array</a> or <a href="#_ismap">map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric array objects are sequences of integers, such as vertex properties assigned as <code>V.SetProperty( "A", [10,20,30,40] )</code>. Map object are sets of <em>keyval</em> items, such as vertex properties assigned as <code>V.SetProperty( "M", {1:2.34, 5:6.78} )</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_return_value_3">6.1.3. Return Value</h4>
<div class="paragraph">
<p>This function returns a floating point value representing the sum of products of item values for all items that occur in both <em>obj</em> and memory range \( [p_1 : p_k] \).</p>
</div>
</div>
<div class="sect3">
<h4 id="_remarks_3">6.1.4. Remarks</h4>
<div class="paragraph">
<p>Items to be matched and whose values are contributing to the sum must be plain integers or <em>keyval</em> items.</p>
</div>
<div class="paragraph">
<p>Memory probe items are assigned to the memory object using the respective <a href="#datatypes">data type syntax</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Integer item in memory probe location</dt>
<dd>
<p><code>m[i] = integer_value</code></p>
<div class="paragraph">
<p>Item key is the assigned integer, and item has implicit value 1.0.</p>
</div>
</dd>
<dt class="hdlist1">Keyval item in memory probe location</dt>
<dd>
<p><code>m[i] = (integer_key, float_value)</code></p>
<div class="paragraph">
<p>Item key is the tuple&#8217;s integer_key, and item value is the tuple&#8217;s float_value.</p>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Memory probe example</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">from</span> <span class="n">pyvgx</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">g</span> <span class="o">=</span> <span class="nc">Graph</span><span class="p">(</span><span class="sh">"</span><span class="s">test</span><span class="sh">"</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>

<span class="c1"># Assign integer items
</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">123</span>          <span class="c1"># key=123, val=1.0
</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">456</span>          <span class="c1"># key=456, val=1.0
</span><span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">789</span>          <span class="c1"># key=789, val=1.0
</span>
<span class="c1"># Assign keyval items
</span><span class="n">m</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mf">2.718</span><span class="p">)</span> <span class="c1"># key=200, val=2.718
</span><span class="n">m</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mf">3.142</span><span class="p">)</span> <span class="c1"># key=300, val=3.142</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Objects are typically vertex properties and are assigned according to <a href="../vertex/vertexProperty.html#vertexsetproperty">property assignment syntax</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Numeric array in vertex property</dt>
<dd>
<p><code>V[prop] = [v1, v2, &#8230;&#8203;]</code></p>
<div class="paragraph">
<p>The item key of each integer <em>v<sub>i</sub></em> is the integer itself, and the item has implicit value 1.0.</p>
</div>
</dd>
<dt class="hdlist1">Keyval map in vertex property</dt>
<dd>
<p><code>V[prop] = { k1:v1, k2:v2, &#8230;&#8203; }</code></p>
<div class="paragraph">
<p>The item key of each <em>k<sub>i</sub></em> : <em>v<sub>i</sub></em> pair is integer key <em>k<sub>i</sub></em>, and the item value is float <em>v<sub>i</sub></em>.</p>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Object example (vertex property)</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">from</span> <span class="n">pyvgx</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">g</span> <span class="o">=</span> <span class="nc">Graph</span><span class="p">(</span><span class="sh">"</span><span class="s">test</span><span class="sh">"</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">V</span><span class="sh">"</span> <span class="p">)</span>

<span class="c1"># Assign array of three integers to property 'p1'
</span><span class="n">V</span><span class="p">[</span><span class="sh">'</span><span class="s">p1</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">,</span> <span class="mi">789</span><span class="p">]</span>

<span class="c1"># Assign map of two int:float items to property 'p2'
</span><span class="n">V</span><span class="p">[</span><span class="sh">'</span><span class="s">p2</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">200</span><span class="p">:</span><span class="mf">2.718</span><span class="p">,</span> <span class="mi">300</span><span class="p">:</span><span class="mf">3.142</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_formula">6.1.5. Formula</h4>
<div class="paragraph">
<p>The return value <em>s</em> is computed as follows.</p>
</div>
<div class="paragraph">
<p>\( s = \displaystyle \sum_{i=1}^k{ \left[   V(p_i) \sum_{j=1}^n{ \bigg( V(x_j) \: \big| \: x_j \in obj \wedge M(p_i,x_j)  \bigg)  }   \right] }\)</p>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="paragraph">
<p>\( V(x) = \begin{cases} \text{value of x} &amp; \quad \text{if x is keyval} \\ 1 &amp; \quad \text{if x is integer} \end{cases} \)</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>\( M(a,b) = \begin{cases} true &amp; \quad \text{if } K(a) = K(b) \\ false &amp; \quad \text{if } K(a) \ne K(b) \end{cases} \)</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>\( K(x) = \begin{cases} \text{key of x} &amp; \quad \text{if x is keyval} \\ x &amp; \quad \text{if x is integer} \end{cases} \)</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>\( n = | obj | \)</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_2">6.1.6. Example</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">from</span> <span class="n">pyvgx</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">g</span> <span class="o">=</span> <span class="nc">Graph</span><span class="p">(</span><span class="sh">"</span><span class="s">test</span><span class="sh">"</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>

<span class="c1"># Vertex with array and map properties
#V = g.NewVertex("V")
</span><span class="n">V</span><span class="p">[</span><span class="sh">'</span><span class="s">p1</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">,</span> <span class="mi">789</span><span class="p">]</span>
<span class="n">V</span><span class="p">[</span><span class="sh">'</span><span class="s">p2</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">200</span><span class="p">:</span><span class="mf">2.718</span><span class="p">,</span> <span class="mi">300</span><span class="p">:</span><span class="mf">3.142</span><span class="p">}</span>

<span class="c1"># Probe items
</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">123</span>
<span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">456</span>
<span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">789</span>
<span class="n">m</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mf">2.718</span><span class="p">)</span>
<span class="n">m</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mf">3.142</span><span class="p">)</span>

<span class="c1"># Probe against numeric array object will
# match three integer items and
# return 3.0
</span><span class="n">g</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">msumprodobj(0,4,next[</span><span class="sh">'</span><span class="s">p1</span><span class="sh">'</span><span class="s">])</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">V</span><span class="sh">"</span> <span class="p">)</span>

<span class="c1"># Probe against keyval map object will
# match two keyval items and
# return 17.26
</span><span class="n">g</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">msumprodobj(0,4,next[</span><span class="sh">'</span><span class="s">p2</span><span class="sh">'</span><span class="s">])</span><span class="sh">"</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="sh">"</span><span class="s">V</span><span class="sh">"</span> <span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluator_probealtarray">6.2. <em>probealtarray</em>()</h3>
<div class="paragraph">
<p>Test if all elements of a probe stored in memory range [<em>p<sub>1</sub></em>, <em>p<sub>n</sub></em>] exist in array object <em>altarray</em> and return a position-dependent and match-type dependent score. The array can have up to 16 elements. Array elements are <em>dual-value integers</em>, divided into a <strong>primary</strong> region and a <strong>secondary</strong> (alternative) region. For a probe element and an array element to match their primary regions must be equal, or their secondary regions must be equal. A probe element may also be a <em>dual bitvector</em> split into a primary and secondary region for cases where the probe is already known to match the array object in one or more positions, but needs to be included for keeping track of number of matches and their positions.</p>
</div>
<div class="sect3">
<h4 id="_syntax_4">6.2.1. Syntax</h4>
<div class="listingblock">
<div class="content">
<pre>probealtarray( p1, pn, altarray, prefix_boost, alt_deboost ) -&gt; score</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_4">6.2.2. Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 17.8571%;">
<col style="width: 28.5714%;">
<col style="width: 53.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>p<sub>1</sub></em>, <em>p<sub>n</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 x 32-bit integers
<br>
 or
<br>
 2 x 16-bit bitvectors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Memory locations 1, 2, &#8230;&#8203;, <em>n</em> of the probe holding <em>dual-value integers</em> or <em>dual bitvectors</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>altarray</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric array object (multi-valued vertex property)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array object to be probed, containing up to 16 <em>dual-value integers</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>prefix_boost</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>real</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Score multiplier for ordered match starting from the first element of <em>altarray</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>alt_deboost</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>real</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Score multiplier for match involving one or more matches on secondary (alternative) element regions</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong><em>altarray</em></strong>: The values in <em>altarray</em> are presumed to be encoded as two 32-bit integers packed into a 64-bit integer. This special encoding will be referred to as <em>dual-value integer</em>. The upper 32 bits represent the <strong>primary</strong> region. The lower 32 bits represent the <strong>secondary</strong> (or alternative) region. This makes it possible for two distinct values to occupy the same position in <em>altarray</em>, enabling position-aware matching with alternative scoring depending on which region of the element is matched.</p>
</div>
<div class="paragraph">
<p><strong>[<em>p<sub>1</sub></em>, <em>p<sub>n</sub></em>]</strong>: A probe element is either a <em>dual-value integer</em> encoded the same way as values in <em>altarray</em>, or a <em>dual bitvector</em>. A <a href="#_bitvector">bitvector</a> in this context uses only the 32 lower bits, subdivided into a 16-bit <strong>primary</strong> region (bits 16-31) and a 16-bit <strong>secondary</strong> region (bits 0-15.) A bitvector asserts a match in all position(s) of <em>altarray</em> corresponding to bitvector position(s) set to 1.</p>
</div>
<div class="paragraph">
<p>Probe elements <em>p<sub>1</sub></em> through <em>p<sub>n</sub></em> reference a consecutive region of a <a href="#evaluatormemory">memory object</a> into which the probe data must be entered before calling <em>probealtarray</em>().</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Probe bitvectors are limited to 32 bits and therefore <em>dual bitvectors</em> are limited to 16 bit positions. Hence the number of positions we are able to keep track of in <em>altarray</em> is also 16. The reason for the 32-bit restriction is to maintain compatibility with arc values, which often will be the carriers of data used to construct bitvector probes.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_return_value_4">6.2.3. Return Value</h4>
<div class="paragraph">
<p>The default (un-boosted) score returned when all probe elements exist in the array is 1.0. If one or more probe elements do not exist in array 0.0 is returned.</p>
</div>
<div class="paragraph">
<p>If probe elements match the array <em>in order, starting from the first array element</em> (a prefix match) the return score is multiplied by <em>prefix_boost</em>.</p>
</div>
<div class="paragraph">
<p>If any element match occurs because of a match in the secondary region (due to no match in primary region) the return score is multiplied by <em>alt_deboost</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_remarks_4">6.2.4. Remarks</h4>
<div class="paragraph">
<p>Probe elements <em>p<sub>1</sub></em> through <em>p<sub>n</sub></em> are evaluated against values in <em>altarray</em>, in order. Each time a match is found it is "consumed", i.e. if a probe element matched position <em>q</em> in <em>altarray</em> no subsequent probe element can match position <em>q</em> in <em>altarray</em>.</p>
</div>
<div class="paragraph">
<p>Probe elements encoded as <em>dual-value integers</em> are compared against values in <em>altarray</em> by matching primary regions first, then secondary regions if no match in primary regions. As long as ordered (prefix) matches can continue to be made, an element is declared a match if either primary or secondary regions match. If ordered matching fails, unordered matching is attempted and in this case all possibilities for primary region matches are considered before any secondary region matches are considered.</p>
</div>
<div class="paragraph">
<p>Probe elements encoded as <em>dual bitvectors</em> are used to assert matches in <em>altarray</em> at the position(s) corresponding to 1s in the bitvectors. When a bitvector probe <em>p<sub>k</sub></em> is matched against a value in <em>altarray</em>, the position <em>q</em> of the least significant 1 in the bitvector that also corresponds to unmatched position <em>q</em> in <em>altarray</em> (if one exists) is marked as matched, i.e. position <em>q</em> cannot be matched by any subsequent probe. The primary bit-region of <em>p<sub>k</sub></em> is processed first, then if no match the secondary bit-region of <em>p<sub>k</sub></em> is processed. Note that bitvector probe <em>p<sub>k</sub></em> will only consume one position <em>q</em> in altarray even if <em>p<sub>k</sub></em> has multiple bits set to 1.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_3">6.2.5. Example</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="c1"># Create a vertex and assign a multi-valued
# property of dual-value integers
</span><span class="n">V</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">NewVertex</span><span class="p">(</span> <span class="sh">"</span><span class="s">V</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">V</span><span class="p">[</span><span class="sh">'</span><span class="s">data</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="mi">1111</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="mi">555</span><span class="p">,</span> <span class="p">(</span><span class="mi">4444</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="mi">444</span><span class="p">,</span> <span class="p">(</span><span class="mi">3333</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1000</span><span class="p">,</span> <span class="p">(</span><span class="mi">7777</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="mi">555</span> <span class="p">]</span>

<span class="c1"># Create the probe
</span><span class="n">probe</span> <span class="o">=</span> <span class="n">graph</span><span class="p">.</span><span class="nc">Memory</span><span class="p">(</span> <span class="mi">32</span> <span class="p">)</span>
<span class="n">probe</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1111</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="mi">555</span>   <span class="c1"># primary match (pos 0)
</span><span class="n">probe</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">9999</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1000</span>  <span class="c1"># secondary match (pos 2)
</span><span class="n">probe</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="mh">0x00000009</span> <span class="p">]</span>       <span class="c1"># secondary match (pos 0 and 3)
</span>
<span class="c1"># Execute search
</span><span class="n">graph</span><span class="p">.</span><span class="nc">Evaluate</span><span class="p">(</span> <span class="sh">"</span><span class="s">probealtarray( 1 , 3, vertex[</span><span class="sh">'</span><span class="s">data</span><span class="sh">'</span><span class="s">], 100.0, 0.5 )</span><span class="sh">"</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">V</span><span class="p">,</span> <span class="n">memory</span><span class="o">=</span><span class="n">probe</span> <span class="p">)</span>  <span class="c1"># -&gt; 0.5
</span>
<span class="c1"># Explanation:
# probe[1] has a primary match for 1111 in pos 0
# probe[2] has a secondary match for 1000 in pos 2
# probe[3] is a bitvector and asserts secondary matches
#          in positions 0 and 3 (0x9 = binary 1001). Position 0
#          was consumed by probe[1] but position 3 was not
#          yet consumed and therefore a match occurs.
# We do not have a prefix match, and we are falling back
# on secondary matches, hence the returned score is
# 1.0 * 0.5 = 0.5.</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="evaluator_synarc_decay">6.3. <em>synarc.decay</em>() and <em>synarc.xdecay</em>()</h3>
<div class="paragraph">
<p>Compute age-dependent arc value.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Linear decay <code>synarc.decay()</code></dt>
<dd>
<p>\( N_t = N_0 - r \cdot t \)</p>
</dd>
<dt class="hdlist1">Exponential decay <code>synarc.xdecay()</code></dt>
<dd>
<p>\( N_t = N_0 e^{-\lambda t} \)</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="synarc_decay_syntax">6.3.1. Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">synarc</span><span class="p">.</span><span class="nf">decay</span><span class="p">(</span> <span class="n">relationship</span><span class="p">[,</span> <span class="n">rate</span><span class="p">]</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">decayed_value</span> <span class="n">Nt</span>
<span class="n">synarc</span><span class="p">.</span><span class="nf">xdecay</span><span class="p">(</span> <span class="n">relationship</span><span class="p">[,</span> <span class="n">rate</span><span class="p">]</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">decayed_value</span> <span class="n">Nt</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="synarc_decay_parameters">6.3.2. Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>relationship</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code> or <code>integer</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relationship type given as string or as integer enumeration. To enable computation of decayed value <em>N<sub>t</sub></em> the relationship must be represented by a <a href="../graph/graphArc.html#multiple_arc">multiple arc</a> comprising a creation (<code>M_TMC</code>) and/or modification time (<code>M_TMM</code>), an initial value <em>N<sub>0</sub></em> (floating point modifier(s)), and an expiration time (<code>M_TMX</code>), all sharing the same relationship type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rate</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\( \displaystyle \frac{1}{t_{end} - t_0} \)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional <em>rate</em> overrides <em>rate</em> derived from arc timestamps. Decay constants are always computed as:
<br>
<br>
 \( r = rate \cdot N_0 \)
<br>
<br>
 \( \lambda = rate \cdot ln \left( 10^4 \right) \)
<br>
<br>
 By default linear decay produces \( N_t = 0 \) at \( t_1 = t_{end} \) and exponential decay produces \( N_t = \frac{N_0}{10000} \) at \( t_1 = t_{end} \).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="synarc_decay_return_value">6.3.3. Return Value</h4>
<div class="paragraph">
<p>This function returns either <em>null</em> or a <em>real</em> value:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>null</em></dt>
<dd>
<p>Evaluation of the expression containing <code>synarc.decay()</code> or <code>synarc.xdecay()</code> occurs for each traversed arc during neighborhood traversal, and for all such evaluations this function returns <em>null</em>.</p>
</dd>
<dt class="hdlist1"><em>N<sub>t</sub></em></dt>
<dd>
<p><a href="#synarc_decay_post_traversal">Post-traversal evaluation</a> of the expression takes place each time all arcs between two vertices have been processed, and at this point a real value representing decayed value <em>N<sub>t</sub></em> is returned.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="synarc_decay_remarks">6.3.4. Remarks</h4>
<div class="paragraph">
<p>Arc decay functions are special in that they require multiple evaluations to compute a result. Arc components are first captured during traversal of the multiple arc, and finally the decayed value <em>N<sub>t</sub></em> is computed using those components when the expression is invoked one additional time post-traversal.</p>
</div>
<div class="sect4">
<h5 id="synarc_decay_arc_components">6.3.4.1. Capture arc components</h5>
<div class="paragraph">
<p>During processing of arcs the arc decay functions will capture arc information for arcs whose relationship matches the <em>rel</em> argument. The arc&#8217;s value is captured and interpreted according to the modifier.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>t<sub>0</sub></em></dt>
<dd>
<p><code>(A) -[ rel, M_TMC, t<sub>c</sub> ]-&gt; (B)</code><br>
<code>(A) -[ rel, M_TMM, t<sub>m</sub> ]-&gt; (B)</code><br></p>
<div class="paragraph">
<p>When a decay function is evaluated at time <em>t<sub>1</sub></em> the creation (or modification) time <em>t<sub>0</sub></em> provides a reference for computing elapsed time <em>t</em> required by the decay formulas. If both <code>M_TMC</code> and <code>M_TMM</code> arcs exist the value from the <code>M_TMM</code> arc takes precedence.</p>
</div>
<div class="paragraph">
<p>\( t_0 = \begin{cases} t_m &amp; \quad \text{if M_TMM arc exists} \\ t_c &amp; \quad \text{if M_TMC arc exists and M_TMM arc does not exist} \end {cases} \)</p>
</div>
<div class="paragraph">
<p>If neither <code>M_TMC</code> nor <code>M_TMM</code> arc exists <em>t<sub>0</sub></em> takes on a default value:</p>
</div>
<div class="paragraph">
<p>\( t_0 = \begin{cases} t_{end} - \frac{1}{rate} &amp; \quad \text{if rate &gt; 0 and M_TMX arc exists} \\ graph.t_0 &amp; \quad \text{if rate = 0 or M_TMX arc does not exist} \end {cases} \)</p>
</div>
<div class="paragraph">
<p>where \( graph.t_0 \) is the <a href="#_grapht0">graph inception time</a>.</p>
</div>
</dd>
<dt class="hdlist1"><em>t<sub>end</sub></em></dt>
<dd>
<p><code>(A) -[ rel, M_TMX, t<sub>x</sub> ]-&gt; (B)</code><br></p>
<div class="paragraph">
<p>The time <em>t<sub>1</sub></em> at which the arc&#8217;s decayed value reaches its minimum is <em>t<sub>end</sub></em>, which is provided by an arc with the <code>M_TMX</code> modifier.</p>
</div>
<div class="paragraph">
<p>\( t_{end} = t_x \)</p>
</div>
<div class="paragraph">
<p>If no arc with modifier <code>M_TMX</code> exists <em>t<sub>end</sub></em> takes on a default value:</p>
</div>
<div class="paragraph">
<p>\( t_{end} = \begin{cases} t_0 + \frac{1}{rate} &amp; \quad \text{if } rate &gt; 0 \text{ and } t_0 &gt; graph.t_0 \\ \to \infty &amp; \quad \text{if } rate = 0 \text{ or } t_0 \leq graph.t_0 \end{cases} \)</p>
</div>
</dd>
<dt class="hdlist1">N<sub>0</sub></dt>
<dd>
<p><code>(A) -[ rel, M_FLT, v<sub>i</sub> ]-&gt; (B)</code><br>
<code>(A) -[ rel, M_ACC, v<sub>i</sub> ]-&gt; (B)</code><br>
<code>(A) -[ rel, M_SIM, v<sub>i</sub> ]-&gt; (B)</code><br>
<code>(A) -[ rel, M_DIST, v<sub>i</sub> ]-&gt; (B)</code><br></p>
<div class="paragraph">
<p>The arc&#8217;s initial value <em>N<sub>0</sub></em> is derived as the sum of all arcs <em>with a floating point modifier</em>. Let <em>n</em> be the number of such arcs, then:<br>
<br>
 \( N_0 = \begin{cases} \displaystyle \sum_{i=1}^n{v_i} &amp; \quad \text{if } n &gt; 0 \\ 1 &amp; \quad \text{if } n = 0 \text{ and } rate &gt; 0 \\ 0 &amp; \quad \text{if } n = 0 \text{ and } rate = 0 \end{cases}\)</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Arcs with relationships other than <em>rel</em>, or with modifiers other than those with timestamp or floating point values are ignored by the arc decay function. The ignored non-floating point modifiers are <code>M_STAT</code>, <code>M_LSH</code>, <code>M_INT</code>, <code>M_UINT</code>, and <code>M_CNT</code>.</p>
</div>
<div class="paragraph">
<p>The value returned by <code>synarc.decay()</code> and <code>synarc.xdecay()</code> is always <em>null</em> when the expression is evaluated as part of arc traversal.</p>
</div>
</div>
<div class="sect4">
<h5 id="synarc_decay_post_traversal">6.3.4.2. Post-traversal evaluation</h5>
<div class="paragraph">
<p>Arc decay functions are available for use in <a href="../vertex/vertexFilter.html#vertexfilteradjacentfilter">adjacency filters</a> and <a href="../vertex/vertexFilter.html#vertexfiltertraversefilter">traversal filters</a>, i.e. filters involving processing of arcs. Normally such filters evaluate once for each arc. However, when an expression contains one or more calls to an arc decay function <strong>the expression is invoked one additional time for each head vertex</strong> following completion of arc processing for that head vertex. Specifically, if <em>a</em> arcs are processed for <em>h</em> head vertices the expression is invoked <em>a</em> + <em>h</em> times, instead of the normal <em>a</em> times for expressions without arc decay functions.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Beware of the extra evaluation per vertex pair since this will have side-effects for other functions within the same expression such as <code>count()</code>, <code>inc()</code>, <code>rwrite()</code>, and many others.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="synarc_decay_synthetic_arc">6.3.4.3. Synthetic arc and return value</h5>
<div class="paragraph">
<p>The arc processed by the expression at the final invocation is a <a href="#evaluator_synthetic_arcs"><em>synthetic arc</em></a> that triggers different behavior for functions like <code>synarc.decay()</code> and <code>synarc.xdecay()</code>. The behavior triggered is to compute and return the decayed value <em>N<sub>t</sub></em> based on the current time <em>t<sub>1</sub></em> and arc components captured during processing of arcs.</p>
</div>
<div class="paragraph">
<p>Expressions should check for <code>next.arc.issyn == true</code> or include a type-check such as <code>isreal()</code> on the value returned by <code>synarc.decay()</code> and <code>synarc.xdecay()</code> if the value is to be used as part of a larger expression.</p>
</div>
</div>
<div class="sect4">
<h5 id="synarc_decay_formulas">6.3.4.4. Decay Formula Summary</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Elapse time <em>t</em></dt>
<dd>
<p>The relative elapse time <em>t</em> is the difference between the expression invocation time <em>t<sub>1</sub></em> and the arc&#8217;s initial time <em>t<sub>0</sub></em>.</p>
<div class="paragraph">
<p>\( t = t_1 - t_0 \)</p>
</div>
</dd>
<dt class="hdlist1">Decay rate</dt>
<dd>
<p>If <em>rate</em> is not explicitly given, it is derived from the arc&#8217;s lifespan:</p>
<div class="paragraph">
<p>\( rate = \displaystyle \frac{1}{t_{end} - t_0} \)</p>
</div>
</dd>
<dt class="hdlist1">Initial value</dt>
<dd>
<p>The arc&#8217;s initial value <em>N<sub>0</sub></em> is computed as:</p>
<div class="paragraph">
<p>\( N_0 = \displaystyle \sum_{i=1}^n{ v_i } \)<br>
where <em>n</em> is the number of arc values <em>v</em> with a floating point modifier.</p>
</div>
<div class="paragraph">
<p>If no arcs exist with a floating point modifier (<em>n</em> = 0) the initial value defaults to:</p>
</div>
<div class="paragraph">
<p>\( N_0 = \begin{cases} 1 &amp; \quad \text{if } rate &gt; 0 \\ 0 &amp; \quad \text {if } rate = 0 \end{cases}\)</p>
</div>
</dd>
<dt class="hdlist1">Linear decay function <code>synarc.decay( rel[, rate] )</code></dt>
<dd>
<p>The arc value at elapse time <em>t</em> is computed as:</p>
<div class="paragraph">
<p>\( N_t = N_0 - r \cdot t \)</p>
</div>
<div class="paragraph">
<p>\( r = \begin{cases} \frac{N_0}{t_{end} - t_0} &amp; \quad \text{if no rate parameter} \\ rate \cdot N_0 &amp; \quad \text{if rate parameter specified} \end{cases} \)</p>
</div>
</dd>
<dt class="hdlist1">Exponential decay function <code>synarc.xdecay( rel[, rate] )</code></dt>
<dd>
<p>The arc value at elapse time <em>t</em> is computed as:</p>
<div class="paragraph">
<p>\( N_t = N_0 e^{-\lambda t} \)</p>
</div>
<div class="paragraph">
<p>\( \lambda = \begin{cases} \frac{ln\left( 10^4 \right)}{t_{end} - t_0} &amp; \quad \text{if no rate parameter} \\ rate \cdot \ln\left( 10^4 \right) &amp; \quad \text{if rate parameter specified} \end{cases} \)</p>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When exponential decay constant  &#955; is derived from the arc&#8217;s lifespan it is chosen such that <em>N<sub>t</sub></em> decays to 0.01% of the arc&#8217;s initial value <em>N<sub>0</sub></em> at <em>t<sub>1</sub></em> = <em>t<sub>end</sub></em>. This also implies a decay to 10% of initial value 1/4 through the lifespan, 1% of initial value 1/2 through the lifespan, and 0.1% of initial value 3/4 through the lifespan.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="synarc_decay_collect">6.3.5. Returning decayed arc value in search result</h4>
<div class="paragraph">
<p>Search results include arcs that are collected during graph traversal. Arcs are collected into the result set in accordance with the  <a href="../graph/graphQuery.html#graphneighborhood_parameters">query <code>collect</code> parameter</a> or the <a href="../vertex/vertexFilter.html#vertexfiltertraversecollect">vertex condition <code>'traverse': { 'collect': &#8230;&#8203; }</code> clause</a>. Values computed in evaluator expressions can also be collected but must be done using <a href="#collectorstagingfunctions"><code>collect()</code> or <code>collectif()</code> functions</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When collecting search results using evaluator expressions it is often desirable to collect using the <a href="../constants/collectConstants.html#C_SCAN"><code>C_SCAN</code> mode</a>. This mode disables automatic collection of traversed arcs and ensures traversal of the entire neighborhood.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To collect an arc with a decayed value we pass the result of <code>synarc.decay()</code> or <code>synarc.xdecay()</code> to <code>collect()</code>.</p>
</div>
<div class="sect4">
<h5 id="synarc_decay_collect_example">6.3.5.1. Example: Collect decayed arc value</h5>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="nf">collect</span><span class="p">(</span> <span class="n">synarc</span><span class="p">.</span><span class="nf">decay</span><span class="p">(</span> <span class="sh">'</span><span class="s">score</span><span class="sh">'</span> <span class="p">)</span> <span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The function <code>collect( <em>value</em> )</code> works by adding the currently traversed arc to the search result with the arc&#8217;s value overridden by <em>value</em>, which in the above example is the decayed value. Note that <code>collect( <em>value</em> )</code> does nothing unless <em>value</em> is numeric and therefore ignores the <em>null</em> return value from <code>synarc.decay()</code> during traversal (i.e. when arc components needed to compute the decayed value are captured.) Only the post-traversal evaluation step results in a numeric value and this is when the arc is collected.</p>
</div>
<div class="paragraph">
<p>The arc collected this way will appear in the result as:</p>
</div>
<div class="paragraph">
<p><code>-[ 'score', M_FLT, N<sub>t</sub> ]-&gt;</code></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="synarc_decay_example">6.3.6. Complete example</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">from</span> <span class="n">pyvgx</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Build a small graph
</span><span class="n">g</span> <span class="o">=</span> <span class="nc">Graph</span><span class="p">(</span> <span class="sh">"</span><span class="s">decaytest</span><span class="sh">"</span> <span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nc">Connect</span><span class="p">(</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span> <span class="p">(</span><span class="sh">"</span><span class="s">score</span><span class="sh">"</span><span class="p">,</span> <span class="n">M_FLT</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span> <span class="sh">"</span><span class="s">B</span><span class="sh">"</span><span class="p">,</span> <span class="n">lifespan</span><span class="o">=</span><span class="mi">3600</span> <span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nc">Connect</span><span class="p">(</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span> <span class="p">(</span><span class="sh">"</span><span class="s">score</span><span class="sh">"</span><span class="p">,</span> <span class="n">M_FLT</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>  <span class="sh">"</span><span class="s">C</span><span class="sh">"</span><span class="p">,</span> <span class="n">lifespan</span><span class="o">=</span><span class="mi">3600</span> <span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nc">Connect</span><span class="p">(</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span> <span class="p">(</span><span class="sh">"</span><span class="s">score</span><span class="sh">"</span><span class="p">,</span> <span class="n">M_FLT</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">),</span>  <span class="sh">"</span><span class="s">D</span><span class="sh">"</span><span class="p">,</span> <span class="n">lifespan</span><span class="o">=</span><span class="mi">86400</span> <span class="p">)</span>

<span class="c1"># Wait a few seconds...
</span>
<span class="c1"># Query with LINEAR DECAY
</span><span class="n">g</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span> <span class="nb">id</span>      <span class="o">=</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
                <span class="n">collect</span> <span class="o">=</span> <span class="n">C_SCAN</span><span class="p">,</span>
                <span class="n">fields</span>  <span class="o">=</span> <span class="n">F_AARC</span><span class="p">,</span>
                <span class="nb">filter</span>  <span class="o">=</span> <span class="sh">"</span><span class="s">collect( synarc.decay( </span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="s"> ) )</span><span class="sh">"</span>
<span class="p">)</span>
<span class="c1"># [
#   ( A )-[ score &lt;M_FLT&gt; 99.8160 ]-&gt;( B ),
#   ( A )-[ score &lt;M_FLT&gt; 49.9080 ]-&gt;( C ),
#   ( A )-[ score &lt;M_FLT&gt; 24.9981 ]-&gt;( D )
# ]
</span>
<span class="c1"># Wait some more...
</span>
<span class="c1"># Query with EXPONENTIAL DECAY
</span><span class="n">g</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span> <span class="nb">id</span>      <span class="o">=</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
                <span class="n">collect</span> <span class="o">=</span> <span class="n">C_SCAN</span><span class="p">,</span>
                <span class="n">fields</span>  <span class="o">=</span> <span class="n">F_AARC</span><span class="p">,</span>
                <span class="nb">filter</span>  <span class="o">=</span> <span class="sh">"</span><span class="s">collect( synarc.xdecay( </span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="s"> ) )</span><span class="sh">"</span>
<span class="p">)</span>
<span class="c1"># [
#   ( A )-[ score &lt;M_FLT&gt; 43.6150 ]-&gt;( B ),
#   ( A )-[ score &lt;M_FLT&gt; 21.8075 ]-&gt;( C ),
#   ( A )-[ score &lt;M_FLT&gt; 24.1504 ]-&gt;( D )
# ]
</span>
<span class="c1"># Query with EXPONENTIAL DECAY and override decay rate to emulate
# 15 minute lifespan of all arcs.
</span><span class="n">g</span><span class="p">.</span><span class="nc">Neighborhood</span><span class="p">(</span> <span class="nb">id</span>      <span class="o">=</span> <span class="sh">"</span><span class="s">A</span><span class="sh">"</span><span class="p">,</span>
                <span class="n">collect</span> <span class="o">=</span> <span class="n">C_SCAN</span><span class="p">,</span>
                <span class="n">fields</span>  <span class="o">=</span> <span class="n">F_AARC</span><span class="p">,</span>
                <span class="nb">filter</span>  <span class="o">=</span> <span class="sh">"</span><span class="s">collect( synarc.xdecay( </span><span class="sh">'</span><span class="s">score</span><span class="sh">'</span><span class="s">, 1/900 ) )</span><span class="sh">"</span>
<span class="p">)</span>
<span class="c1"># [
#   ( A )-[ score &lt;M_FLT&gt; 0.0552536 ]-&gt;( B ),
#   ( A )-[ score &lt;M_FLT&gt; 0.0276268 ]-&gt;( C ),
#   ( A )-[ score &lt;M_FLT&gt; 0.0138134 ]-&gt;( D )
# ]
</span></code></pre>
</div>
</div>
<hr>
<div class="openblock float-group">
<div class="content">
<div class="paragraph left">
<p><a href="selectEvaluator.html"><span class="icon"><i class="fa fa-arrow-circle-left fa-2x" title="Select Evaluator"></i></span></a>
<a href="../reference.html"><span class="icon"><i class="fa fa-arrow-circle-up fa-2x" title="pyvgx Reference"></i></span></a>
<a href="selectEvaluator.html"><span class="icon"><i class="fa fa-arrow-circle-right fa-2x" title="Select Evaluator"></i></span></a></p>
</div>
<div class="paragraph right">
<p><a href="#"><span class="icon"><i class="fa fa-chevron-circle-up fa-2x" title="Top of page"></i></span></a></p>
</div>
</div>
</div>
<div id="theend" class="paragraph text-center">
<p><a href="../reference.html"><span class="image"><img src="../images/pyvgx.png" alt="PYVGX" width="120" height="120"></span></a></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-05 20:18:34 -0400
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>